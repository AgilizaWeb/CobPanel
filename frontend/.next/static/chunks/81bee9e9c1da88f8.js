(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89504,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({type:e="text",id:r,name:t,placeholder:s,defaultValue:l,onChange:i,min:n,max:d,step:c,disabled:o=!1,success:x=!1,error:u=!1,hint:m,value:g,required:h,className:f="",...b})=>{let p=`h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ${f}`;if("date"!==e&&(p+=" appearance-none"),o)p+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(u){if(p+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof u)return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{...b,type:e,id:r,name:t,placeholder:s,defaultValue:l,onChange:i,className:p,min:n,max:d,step:c,disabled:o,value:g,required:h}),(0,a.jsx)("p",{className:"mt-1 text-xs text-error-500",children:u})]})}else x?p+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":p+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...b,type:e,id:r,name:t,placeholder:s,value:g,defaultValue:l,onChange:i,min:n,max:d,required:h,step:c,disabled:o,className:p}),m&&(0,a.jsx)("p",{className:`mt-1.5 text-xs ${u?"text-error-500":x?"text-success-500":"text-gray-500"}`,children:m})]})}])},90418,e=>{"use strict";var a=e.i(60466);e.s(["EyeIcon",()=>a.default])},15288,e=>{"use strict";var a=e.i(43476);let r=({children:e,className:r=""})=>(0,a.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 ${r}`,children:e});e.s(["Card",()=>r])},47688,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({currentPage:e,totalPages:r,onPageChange:t})=>{let s=Array.from({length:Math.min(3,r)},(a,r)=>r+Math.max(e-1,1));return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>t(e-1),disabled:1===e,className:"mr-2.5 flex items-center h-10 justify-center rounded-lg border border-gray-300 bg-white px-3.5 py-2.5 text-gray-700 shadow-theme-xs hover:bg-gray-50 disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] text-sm","aria-label":"P√°gina anterior",children:"Anterior"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e>3&&(0,a.jsx)("span",{className:"px-2 text-gray-500 dark:text-gray-400",children:"..."}),s.map(r=>(0,a.jsx)("button",{onClick:()=>t(r),className:`px-4 py-2 rounded ${e===r?"bg-brand-500 text-white":"text-gray-700 dark:text-gray-400"} flex w-10 items-center justify-center h-10 rounded-lg text-sm font-medium hover:bg-blue-500/[0.08] hover:text-brand-500 dark:hover:text-brand-500`,"aria-label":`Ir para p\xe1gina ${r}`,children:r},r)),e<r-2&&(0,a.jsx)("span",{className:"px-2 text-gray-500 dark:text-gray-400",children:"..."})]}),(0,a.jsx)("button",{onClick:()=>t(e+1),disabled:e===r,className:"ml-2.5 flex items-center justify-center rounded-lg border border-gray-300 bg-white px-3.5 py-2.5 text-gray-700 shadow-theme-xs text-sm hover:bg-gray-50 h-10 disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]","aria-label":"Pr√≥xima p√°gina",children:"Pr√≥ximo"})]})}])},41245,e=>e.a(async(a,r)=>{try{var t=e.i(43476),s=e.i(15288),l=e.i(90873),i=e.i(52455);e.i(35829);var n=e.i(56770),d=e.i(90418),c=e.i(58923),o=e.i(54338),x=a([o]);function u({notificacao:e,onMarcarComoLida:a,onDelete:r,onView:x}){let{user:u}=(0,o.useAuth)(),m=u?.role==="SUPERADMIN";return(0,t.jsx)(s.Card,{className:`p-4 transition-all hover:shadow-md ${!e.lida?"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10":""}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-2xl",children:function(e){switch(e){case"VENCIMENTO_EMPRESA":return"‚ö†Ô∏è";case"PLANO_PAGO":return"‚úÖ";case"COBRANCA_GERADA":return"üí≥";case"FATURA_PAGA":return"üí∞";case"PARCELA_PAGA":return"üíµ";case"MANUAL":return"üì¢";case"TICKET_MENSAGEM":return"üé´";default:return"üîî"}}(e.tipo)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-2 mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:`text-base font-semibold text-gray-900 dark:text-white mb-1 ${!e.lida?"font-bold":""}`,children:e.titulo}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:function(e){switch(e){case"VENCIMENTO_EMPRESA":return"Vencimento de Empresa";case"PLANO_PAGO":return"Plano Pago";case"COBRANCA_GERADA":return"Cobran√ßa Gerada";case"FATURA_PAGA":return"Fatura Paga";case"PARCELA_PAGA":return"Parcela Paga";case"MANUAL":return"Manual";case"TICKET_MENSAGEM":return"Ticket";default:return e}}(e.tipo)}),!e.lida&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:"N√£o lida"})]})]})}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:e.mensagem}),m&&(e.empresa||e.user)&&(0,t.jsx)("div",{className:"mb-3 p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600 dark:text-gray-400",children:[e.empresa&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"üì¶"}),(0,t.jsx)("span",{className:"font-medium",children:"Empresa:"}),(0,t.jsx)("span",{children:e.empresa.nome})]}),e.user&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"üë§"}),(0,t.jsx)("span",{className:"font-medium",children:"Usu√°rio:"}),(0,t.jsx)("span",{children:e.user.nome})]})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3",children:[(0,t.jsx)("span",{children:function(e){try{let a=new Date(e),r=new Date,t=Math.floor((r.getTime()-a.getTime())/1e3);if(t<60)return"agora";if(t<3600)return`${Math.floor(t/60)} min atr\xe1s`;if(t<86400)return`${Math.floor(t/3600)} hr atr\xe1s`;if(t<604800)return`${Math.floor(t/86400)} dias atr\xe1s`;return(0,i.formatDate)(e)}catch{return e}}(e.createdAt)}),e.actionLink&&e.actionLabel&&(0,t.jsxs)("a",{href:e.actionLink,className:"text-brand-500 hover:text-brand-600 dark:text-brand-400 font-medium",children:[e.actionLabel," ‚Üí"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[!e.lida&&(0,t.jsx)(l.default,{variant:"outline",size:"sm",onClick:()=>a(e.id),startIcon:(0,t.jsx)(c.CheckCircleIcon,{className:"w-5 h-5"}),"aria-label":"Marcar como lida",children:"Marcar como lida"}),x&&(0,t.jsx)(l.default,{variant:"outline",size:"sm",onClick:()=>x(e.id),startIcon:(0,t.jsx)(d.EyeIcon,{className:"w-5 h-5"}),"aria-label":"Ver detalhes",children:"Ver"}),(0,t.jsx)(l.default,{variant:"outline",size:"sm",onClick:()=>r(e.id),startIcon:(0,t.jsx)(n.TrashBinIcon,{className:"w-5 h-5"}),"aria-label":"Excluir notifica√ß√£o",className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Excluir"})]})]})]})})}[o]=x.then?(await x)():x,e.s(["default",()=>u]),r()}catch(e){r(e)}},!1),99491,e=>e.a(async(a,r)=>{try{var t=e.i(43476),s=e.i(71645),l=e.i(5766),i=e.i(15288),n=e.i(89504),d=e.i(67073),c=e.i(90873),o=e.i(47688),x=e.i(23115),u=e.i(76318),m=e.i(41245),g=e.i(21550),h=e.i(8703),f=e.i(54338);e.i(35829);var b=e.i(30624),p=a([u,m,g,h,f]);function y(){let{user:e}=(0,f.useAuth)(),{marcarComoLida:a,marcarTodasComoLidas:r,deleteNotificacao:p}=(0,h.useNotifications)(),[y,N]=(0,s.useState)([]),[j,v]=(0,s.useState)(!0),[w,A]=(0,s.useState)(""),[k,C]=(0,s.useState)(1),[P,E]=(0,s.useState)(0),[M,T]=(0,s.useState)({}),[L,S]=(0,s.useState)(20),[G,R]=(0,s.useState)(!1),[_,I]=(0,s.useState)(null),O=(0,s.useCallback)(async()=>{try{v(!0);let e={page:k,perPage:L};void 0!==M.lida&&(e.lida=M.lida),M.tipo&&(e.tipo=M.tipo);let a=await u.services.notificacao.list(e);N(a.data||[]),E(a.pagination?.totalPages||1)}catch(e){console.error("Erro ao carregar notifica√ß√µes:",e),l.toast.error("Erro ao carregar notifica√ß√µes")}finally{v(!1)}},[k,w,M,L]);(0,s.useEffect)(()=>{O()},[O]);let V=y.filter(e=>{if(!w)return!0;let a=w.toLowerCase();return e.titulo.toLowerCase().includes(a)||e.mensagem.toLowerCase().includes(a)}),U=e=>{T(a=>({...a,...e})),C(1)},$=async e=>{try{await a(e),await O(),l.toast.success("Notifica√ß√£o marcada como lida")}catch(e){l.toast.error("Erro ao marcar notifica√ß√£o como lida")}},B=async()=>{try{await r(),await O(),l.toast.success("Todas as notifica√ß√µes foram marcadas como lidas")}catch(e){l.toast.error("Erro ao marcar todas como lidas")}},D=async e=>{if(window.confirm("Tem certeza que deseja excluir esta notifica√ß√£o?"))try{await p(e),await O(),l.toast.success("Notifica√ß√£o exclu√≠da com sucesso")}catch(e){l.toast.error("Erro ao excluir notifica√ß√£o")}},F=e=>{let a=y.find(a=>a.id===e);a&&(I(a),R(!0))},K=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobran√ßa Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"},{value:"TICKET_MENSAGEM",label:"Ticket Mensagem"}],z=[{value:"true",label:"Lidas"},{value:"false",label:"N√£o lidas"}],q=y.filter(e=>!e.lida).length;return(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Notifica√ß√µes"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie todas as suas notifica√ß√µes"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:q>0&&(0,t.jsx)(c.default,{variant:"outline",onClick:B,"aria-label":"Marcar todas como lidas",children:"Marcar todas como lidas"})})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,t.jsx)(n.default,{type:"text",placeholder:"Buscar notifica√ß√µes...",value:w,onChange:e=>{A(e.target.value),C(1)},className:"w-full","aria-label":"Buscar notifica√ß√µes"})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)(d.default,{placeholder:"Status",options:z,value:void 0!==M.lida?z.find(e=>e.value===String(M.lida)):void 0,onChange:e=>U({lida:e?"true"===e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,t.jsx)(d.default,{placeholder:"Tipo",options:K,value:M.tipo?K.find(e=>e.value===M.tipo):void 0,onChange:e=>U({tipo:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50","aria-label":"Filtrar por tipo"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.default,{className:"flex items-center mb-0 h-full",children:"Quantidade por p√°gina"}),(0,t.jsx)(n.default,{className:"max-w-24",type:"number",defaultValue:L,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||20;S(a),C(1)},"aria-label":"Itens por p√°gina"})]}),(0,t.jsx)(o.default,{currentPage:k,totalPages:P,onPageChange:C})]}),j?(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):0===V.length?(0,t.jsxs)(i.Card,{className:"p-12 text-center",children:[(0,t.jsx)(b.BellIcon,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma notifica√ß√£o encontrada"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:w||void 0!==M.lida||M.tipo?"Tente ajustar os filtros de busca":"Voc√™ n√£o possui notifica√ß√µes no momento"})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:V.map(e=>(0,t.jsx)(m.default,{notificacao:e,onMarcarComoLida:$,onDelete:D,onView:F},e.id))}),!j&&V.length>0&&(0,t.jsx)("div",{className:"mt-6 flex justify-center",children:(0,t.jsx)(o.default,{currentPage:k,totalPages:P,onPageChange:C})}),(0,t.jsx)(g.default,{isOpen:G,onClose:()=>{R(!1),I(null),O()},notificacao:_,onMarcarComoLida:$,onDelete:D})]})}[u,m,g,h,f]=p.then?(await p)():p,e.s(["default",()=>y]),r()}catch(e){r(e)}},!1)]);