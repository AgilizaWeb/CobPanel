(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24925,e=>{"use strict";var t=e.i(71645);let a=null,r=null,n=0,o={appName:"CobPanel",usarLandingPage:!1,apiEnv:"production",backendUrl:"http://localhost:5555"};async function s(e=!1){let t=Date.now();return a&&!e&&t-n<3e5?a:r&&!e?r:r=fetch("/api/config",{cache:e?"no-cache":"default",headers:{"Content-Type":"application/json"}}).then(async e=>{if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);return e.json()}).then(e=>{let r={appName:e.appName||o.appName,usarLandingPage:!!e.usarLandingPage,apiEnv:e.apiEnv||o.apiEnv,backendUrl:e.backendUrl||o.backendUrl};return a=r,n=t,r}).catch(r=>a&&!e?a:(a=o,n=t,o)).finally(()=>{r=null})}function i(){return a}async function c(e=!1){return s(e)}function l(){let{config:e}=function(){let[e,r]=(0,t.useState)(a),[n,o]=(0,t.useState)(!a),[i,c]=(0,t.useState)(null),l=(0,t.useCallback)(async()=>{try{o(!0),c(null);let e=await s(!0);r(e)}catch(e){c(e instanceof Error?e.message:"Erro desconhecido")}finally{o(!1)}},[]);return(0,t.useEffect)(()=>{(!a||!a.backendUrl||a.backendUrl.includes("localhost"))&&s().then(r).catch(e=>{c(e instanceof Error?e.message:"Erro ao carregar configuração")}).finally(()=>o(!1))},[]),{config:e,loading:n,error:i,refreshConfig:l,isConfigured:!!a}}();return e?.backendUrl||o.backendUrl}e.s(["getAppConfig",()=>i,"loadAppConfig",()=>c,"useBackendUrl",()=>l])},67833,e=>{"use strict";function t(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}e.i(47167);var a=function e(a,r){function n(e,n,o){if("u">typeof document){"number"==typeof(o=t({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in o)o[i]&&(s+="; "+i,!0!==o[i]&&(s+="="+o[i].split(";")[0]));return document.cookie=e+"="+a.write(n,e)+s}}return Object.create({set:n,get:function(e){if("u">typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},n=0;n<t.length;n++){var o=t[n].split("="),s=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(r[i]=a.read(s,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,a){n(e,"",t({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,t({},this.attributes,a))},withConverter:function(a){return e(t({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),r=e.i(24925);let n=(e,t,n={})=>{let o=(0,r.getAppConfig)(),s=!!o&&"production"===o.apiEnv;a.set(e,t,{...n,secure:s,sameSite:"lax"})},o=e=>a.get(e),s=e=>{a.remove(e)},i={get:()=>o("token"),set:(e,t={})=>n("token",e,t),remove:()=>s("token")},c={get:()=>o("user"),set:(e,t={})=>n("user",e,t),remove:()=>s("user")};e.s(["cookies",0,{user:c,token:i,auth:{clear:()=>{c.remove(),i.remove()}}},"getCookie",0,o,"removeCookie",0,s,"setCookie",0,n],67833)},74186,e=>e.a(async(t,a)=>{try{var r=e.i(20403),n=t([r]);[r]=n.then?(await n)():n,e.s(["authService",0,{login:async e=>(await r.api.post("/auth/login",e)).data,loginByToken:async e=>(await r.api.post(`/auth/login/${e}`)).data,register:async e=>(await r.api.post("/auth/register",e)).data,getMe:async()=>(await r.api.get("/auth/me")).data,changePassword:async e=>(await r.api.post("/auth/change-password",e)).data,resetPassword:async e=>(await r.api.post("/auth/reset-password",e)).data,validateToken:async e=>(await r.api.post("/auth/validate-token",{token:e})).data}]),a()}catch(e){a(e)}},!1),18566,(e,t,a)=>{t.exports=e.r(76562)},34120,e=>e.a(async(t,a)=>{try{var r=e.i(43476),n=e.i(71645),o=e.i(18566),s=e.i(74186),i=e.i(67833),c=e.i(5766),l=t([s]);function u(){let{token:e}=(0,o.useParams)(),t=(0,o.useRouter)(),[a,l]=(0,n.useState)(!0),[u,d]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{if(!e){d("Token não fornecido"),l(!1);return}try{l(!0),d(null);let a=await s.authService.loginByToken(e);if(a.message&&a.data){let{user:e,token:r}=a.data;c.default.success("Login realizado com sucesso!"),i.cookies.token.set(r),i.cookies.user.set(JSON.stringify(e)),await new Promise(e=>setTimeout(e,1e3));let n={SUPERADMIN:"/dashboard/admin",ADMIN:"/dashboard/empresa",GESTOR:"/dashboard/empresa",VENDEDOR:"/dashboard/empresa",CLIENTE:"/dashboard/cliente"}[e.role]||"/";setTimeout(()=>{t.push(n),setTimeout(()=>{window.location.reload()},1500)},1500)}else throw Error("Resposta inválida do servidor")}catch(a){console.error("Erro no login por token:",a);let e=a.response?.data?.error||a.message||"Erro ao fazer login com o token";d(e),c.default.error(e),setTimeout(()=>{t.push("/auth/login")},3e3)}finally{l(!1)}})()},[e,t]),a)?(0,r.jsx)("div",{className:"flex flex-col flex-1 lg:w-1/2 w-full",children:(0,r.jsx)("div",{className:"w-full max-w-md sm:pt-10 mx-auto mb-5",children:(0,r.jsx)("div",{className:"flex flex-col justify-center flex-1 w-full max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"mb-5 sm:mb-8",children:[(0,r.jsx)("h1",{className:"mb-2 font-semibold text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md",children:"Fazendo login..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aguarde enquanto verificamos seu token de acesso."})]})})})}):u?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,r.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto h-12 w-12 text-red-500",children:(0,r.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Erro no Login"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:u}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:()=>t.push("/auth/login"),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ir para Login"})}),(0,r.jsx)("p",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:"Você será redirecionado automaticamente em alguns segundos..."})]})})}):null}[s]=l.then?(await l)():l,e.s(["default",()=>u]),a()}catch(e){a(e)}},!1)]);