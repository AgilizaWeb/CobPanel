(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89504,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({type:e="text",id:r,name:t,placeholder:s,defaultValue:i,onChange:l,min:o,max:d,step:n,disabled:c=!1,success:u=!1,error:m=!1,hint:x,value:g,required:h,className:p="",...f})=>{let b=`h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ${p}`;if("date"!==e&&(b+=" appearance-none"),c)b+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(m){if(b+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof m)return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{...f,type:e,id:r,name:t,placeholder:s,defaultValue:i,onChange:l,className:b,min:o,max:d,step:n,disabled:c,value:g,required:h}),(0,a.jsx)("p",{className:"mt-1 text-xs text-error-500",children:m})]})}else u?b+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":b+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...f,type:e,id:r,name:t,placeholder:s,value:g,defaultValue:i,onChange:l,min:o,max:d,required:h,step:n,disabled:c,className:b}),x&&(0,a.jsx)("p",{className:`mt-1.5 text-xs ${m?"text-error-500":u?"text-success-500":"text-gray-500"}`,children:x})]})}])},59544,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({variant:e="primary",size:r="md",loading:t=!1,fullWidth:s=!1,className:i="",children:l,disabled:o,...d})=>{let n=["inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2",{success:"bg-green-500 text-white hover:bg-green-600 focus:ring-green-500",primary:"bg-brand-500 text-white hover:bg-brand-600 focus:ring-brand-500 disabled:bg-brand-300",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",danger:"bg-error-500 text-white hover:bg-error-600 focus:ring-error-500"}[e],{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"}[r],s?"w-full":"",o||t?"opacity-50 cursor-not-allowed":"",i].join(" ");return(0,a.jsxs)("button",{className:n,disabled:o||t,...d,children:[t&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})}])},38853,e=>{"use strict";var a=e.i(33502);e.s(["EditIcon",()=>a.default])},90418,e=>{"use strict";var a=e.i(60466);e.s(["EyeIcon",()=>a.default])},25511,e=>{"use strict";var a=e.i(71645);let r=a.forwardRef(function({title:e,titleId:r,...t},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))});e.s(["PlayIcon",0,r],25511)},35665,e=>{"use strict";var a=e.i(81783);e.s(["QrcodeIcon",()=>a.default])},50890,e=>{"use strict";var a=e.i(43476);e.i(35829);var r=e.i(38853),t=e.i(56770),s=e.i(90418),i=e.i(73648),i=i,l=e.i(57129),l=l,o=e.i(35665),d=e.i(59544),n=e.i(25511);e.s(["default",0,({size:e="md",variant:c="primary",onClick:u,className:m="",disabled:x=!1,type:g="button",title:h="Editar",icon:p="edit"})=>{let f=`${"edit"===p||"eye"===p||"reload"===p||"stop"===p||"qrcode"===p?"text-gray-400 hover:text-brand-500 dark:hover:text-brand-400":"text-red-500 dark:text-red-400"} rounded-md flex items-center justify-center transition-colors`;return(0,a.jsx)(d.default,{variant:c,size:e,onClick:()=>u&&u(),className:`${f} ${m}`,title:h,type:g,disabled:x,children:p&&(0,a.jsx)("span",{className:"flex items-center",children:"edit"===p?(0,a.jsx)(r.EditIcon,{className:"w-5 h-5 inline-block"}):"eye"===p?(0,a.jsx)(s.EyeIcon,{className:"w-5 h-5 inline-block"}):"reload"===p?(0,a.jsx)(i.default,{className:"w-5 h-5 inline-block"}):"stop"===p?(0,a.jsx)(l.default,{className:"w-5 h-5 inline-block"}):"qrcode"===p?(0,a.jsx)(o.QrcodeIcon,{className:"w-5 h-5 inline-block"}):"play"===p?(0,a.jsx)(n.PlayIcon,{className:"w-5 h-5 inline-block text-green-500"}):(0,a.jsx)(t.TrashBinIcon,{className:"w-5 h-5 inline-block"})})})}],50890)},64255,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({variant:e="light",color:r="primary",size:t="md",startIcon:s,className:i,endIcon:l,children:o})=>{let d={light:{primary:"bg-brand-50 text-brand-500 dark:bg-brand-500/15 dark:text-brand-400",success:"bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500",error:"bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500",warning:"bg-warning-50 text-warning-600 dark:bg-warning-500/15 dark:text-orange-400",info:"bg-blue-light-50 text-blue-light-500 dark:bg-blue-light-500/15 dark:text-blue-light-500",light:"bg-gray-100 text-gray-700 dark:bg-white/5 dark:text-white/80",dark:"bg-gray-500 text-white dark:bg-white/5 dark:text-white"},solid:{primary:"bg-brand-500 text-white dark:text-white",success:"bg-success-500 text-white dark:text-white",error:"bg-error-500 text-white dark:text-white",warning:"bg-warning-500 text-white dark:text-white",info:"bg-blue-light-500 text-white dark:text-white",light:"bg-gray-400 dark:bg-white/5 text-white dark:text-white/80",dark:"bg-gray-700 text-white dark:text-white"}}[e][r];return(0,a.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 justify-center gap-1 rounded-full font-medium ${{sm:"text-theme-xs",md:"text-sm"}[t]} ${d} ${i}`,children:[s&&(0,a.jsx)("span",{className:"mr-1",children:s}),o,l&&(0,a.jsx)("span",{className:"ml-1",children:l})]})}])},58700,e=>{"use strict";var a=e.i(43476);let r=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})}),t=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,a.jsx)("polyline",{points:"9 18 15 12 9 6"})});var s=e.i(59544);e.s(["default",0,({currentPage:e,totalPages:i,onPageChange:l})=>(0,a.jsxs)("nav",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)(s.default,{variant:"secondary",size:"sm",onClick:()=>l(e-1),disabled:1===e,children:(0,a.jsx)(r,{className:"h-5 w-5"})}),(()=>{let r=[],t=Math.max(1,e-2),o=Math.min(i,e+2);t>1&&(r.push((0,a.jsx)(s.default,{variant:1===e?"primary":"secondary",size:"sm",onClick:()=>l(1),className:"hidden sm:block",children:"1"},1)),t>2&&r.push((0,a.jsx)("span",{className:"px-2 py-2 text-gray-500 dark:text-gray-400",children:"..."},"start-ellipsis")));for(let i=t;i<=o;i++)r.push((0,a.jsx)(s.default,{variant:e===i?"primary":"secondary",size:"sm",onClick:()=>l(i),children:i},i));return o<i&&(o<i-1&&r.push((0,a.jsx)("span",{className:"px-2 py-2 text-gray-500 dark:text-gray-400",children:"..."},"end-ellipsis")),r.push((0,a.jsx)(s.default,{variant:e===i?"primary":"secondary",size:"sm",onClick:()=>l(i),className:"hidden sm:block",children:i},i))),r})(),(0,a.jsx)(s.default,{variant:"secondary",size:"sm",onClick:()=>l(e+1),disabled:e===i,children:(0,a.jsx)(t,{className:"h-5 w-5"})})]})],58700)},38434,e=>{"use strict";let a,r,t;var s=e.i(43476),i=e.i(71645),l=e.i(23115);e.i(35829);var o=e.i(6571),o=o;function d({id:d,mode:n,onChange:c,label:u,defaultDate:m,dateFormat:x="d/m/Y",placeholder:g,onClickHj:h,onClickMes:p,onClickAno:f,onClickClean:b}){let[v,y]=(0,i.useState)(!1);return(h||(h=e=>{e&&e.setDate(new Date),e.close()}),b||(b=e=>{e&&e.clear(),e.close()}),(0,i.useEffect)(()=>{y(!0)},[]),(0,i.useEffect)(()=>{v&&(async()=>{try{a=(await e.A(97813)).default,r=(await e.A(72952)).Portuguese;try{t=(await e.A(47793)).default}catch(e){t=void 0}let s=a(`#${d}`,{mode:n||"single",static:!1,dateFormat:x,defaultDate:m,onChange:c,locale:r,plugins:t?[t({button:[{label:"Hoje"},...p?[{label:"Este Mês"}]:[],...f?[{label:"Este Ano"}]:[],{label:"Limpar"}],onClick:[(e,a)=>{0===e&&h(a)},...p?[(e,a)=>{1===e&&p(a)}]:[],...f?[(e,a)=>{e===(p?2:1)&&f(a)}]:[],(e,a)=>{e===1+ +!!p+ +!!f&&b(a)}]})]:[]});return a.l10ns?.default&&(a.l10ns.default.firstDayOfWeek=1),()=>{Array.isArray(s)||s.destroy()}}catch(e){console.error("Erro ao carregar flatpickr:",e)}})()},[v,n,c,d,m,x,f,p,h,b]),v)?(0,s.jsxs)("div",{children:[u&&(0,s.jsx)(l.default,{htmlFor:d,children:u}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:d,placeholder:g,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3  dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30  bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700  dark:focus:border-brand-800"}),(0,s.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,s.jsx)(o.default,{className:"size-6"})})]})]}):(0,s.jsxs)("div",{children:[u&&(0,s.jsx)(l.default,{htmlFor:d,children:u}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:d,placeholder:g,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:focus:border-brand-800",disabled:!0}),(0,s.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,s.jsx)(o.default,{className:"size-6"})})]})]})}e.s(["default",()=>d],38434)},38578,e=>e.a(async(a,r)=>{try{var t=e.i(20403),s=a([t]);[t]=s.then?(await s)():s,e.s(["fornecedorService",0,{create:async e=>(await t.api.post("/fornecedores",e)).data,list:async({page:e=1,perPage:a=10,search:r=""}={})=>(await t.api.get("/fornecedores",{params:{page:e,perPage:a,search:r}})).data,getById:async e=>(await t.api.get(`/fornecedores/${e}`)).data,update:async(e,a)=>(await t.api.put(`/fornecedores/${e}`,a)).data,delete:async e=>(await t.api.delete(`/fornecedores/${e}`)).data,getTotal:async()=>(await t.api.get("/fornecedores/count/total")).data}]),r()}catch(e){r(e)}},!1),68944,e=>{"use strict";var a=e.i(43476),r=e.i(52455),t=e.i(64255),s=e.i(50890);let i={ENTRADA:"success",SAIDA:"error"};e.s(["default",0,({movimentacao:e,onEdit:l,onDelete:o})=>(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md shadow-gray-200 dark:shadow-gray-700 border border-gray-200 dark:border-gray-700 p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap overflow-x-hidden",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 dark:text-white",children:[e.produto?.nome||"Produto não encontrado"," - ",(0,r.formatCurrency)(e.valorUnitario)]}),(0,a.jsx)(t.default,{color:i[e.tipo],className:"capitalize",children:e.tipo.toLowerCase()})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Quantidade: ",e.quantidade]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Data: ",(0,r.formatDate)(e.data)]}),e.fornecedor&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Fornecedor: ",e.fornecedor.nome]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(s.default,{variant:"secondary",size:"xs",onClick:l,title:"Editar",icon:"edit"}),(0,a.jsx)(s.default,{variant:"secondary",size:"xs",onClick:o,title:"Excluir",icon:"delete"})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.observacoes&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:e.observacoes})})]})})])},90016,e=>e.a(async(a,r)=>{try{var t=e.i(43476),s=e.i(71645),i=e.i(5766),l=e.i(27682),o=e.i(38578),d=e.i(89504),n=e.i(67073),c=e.i(59544),u=e.i(38434),m=e.i(52455),x=a([l,o]);[l,o]=x.then?(await x)():x;let g=[{value:"ENTRADA",label:"Entrada"},{value:"SAIDA",label:"Saída"}];e.s(["default",0,({movimentacao:e,onSubmit:a,onCancel:r})=>{let[x,h]=(0,s.useState)({tipo:e?.tipo||"ENTRADA",quantidade:e?.quantidade||1,data:e?.data||new Date,produtoId:e?.produtoId||0,valorUnitario:e?.valorUnitario||0,fornecedorId:e?.fornecedorId||0,observacoes:e?.observacoes||""}),[p,f]=(0,s.useState)(e?.valorUnitario?(0,m.formatCurrency)(e.valorUnitario).replace("R$","").trim():""),[b,v]=(0,s.useState)([]),[y,j]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0),[N,C]=(0,s.useState)(!0),[S,I]=(0,s.useState)({}),[E,q]=(0,s.useState)(!1);(0,s.useEffect)(()=>{A(),D()},[]);let A=async()=>{try{k(!0);let e=await l.produtoService.list({page:1,limit:100});v(e.data)}catch(e){i.toast.error("Erro ao carregar produtos")}finally{k(!1)}},D=async()=>{try{C(!0);let e=await o.fornecedorService.list({page:1,perPage:100});j(e.data)}catch(e){i.toast.error("Erro ao carregar fornecedores")}finally{C(!1)}},z=async e=>{let r;if(e.preventDefault(),r={},["produtoId","fornecedorId","tipo","quantidade","valorUnitario","data"].forEach(e=>{x[e]||(r[e]=`${e.charAt(0).toUpperCase()+e.slice(1)} \xe9 obrigat\xf3rio`)}),x.quantidade<1&&(r.quantidade="Quantidade deve ser maior que zero"),x.valorUnitario<0&&(r.valorUnitario="Valor unitário não pode ser negativo"),I(r),0===Object.keys(r).length){q(!0);try{await a(x)}catch(e){i.toast.error("Erro ao salvar movimentação")}finally{q(!1)}}};return(0,t.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Movimentação"}),(0,t.jsx)(n.default,{id:"tipo",name:"tipo",value:g.find(e=>e.value===x.tipo),options:g,onChange:e=>h({...x,tipo:e.value}),placeholder:"Selecione o tipo",error:S.tipo,className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"produtoId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Produto"}),(0,t.jsx)(n.default,{id:"produtoId",name:"produtoId",isLoading:w,value:b.filter(e=>e.id===x.produtoId).map(e=>({value:String(e.id),label:e.nome}))[0],options:b.map(e=>({value:String(e.id),label:e.nome+` (${e.estoque} em estoque)`})),onChange:e=>{e&&h({...x,produtoId:parseInt(e.value,10)})},placeholder:"Selecione o produto",error:S.produtoId,className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"quantidade",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantidade"}),(0,t.jsx)(d.default,{id:"quantidade",name:"quantidade",type:"number",min:"1",value:x.quantidade,onChange:e=>h({...x,quantidade:parseInt(e.target.value)||0}),error:S.quantidade})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"fornecedorId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fornecedor"}),(0,t.jsx)(n.default,{id:"fornecedorId",name:"fornecedorId",isLoading:N,value:y.filter(e=>e.id===x.fornecedorId).map(e=>({value:String(e.id),label:e.nome}))[0],options:y.map(e=>({value:String(e.id),label:e.nome})),onChange:e=>{e&&h({...x,fornecedorId:parseInt(e.value,10)})},placeholder:"Selecione o fornecedor",error:S.fornecedorId,className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"valorUnitario",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor Unitário"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute z-1 left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-300",children:"R$"}),(0,t.jsx)(d.default,{id:"valorUnitario",name:"valorUnitario",type:"text",value:p,className:"pl-9",onChange:e=>{let a=e.target.value.replace(/\D/g,"");if(""===a){f(""),h({...x,valorUnitario:0});return}let r=(0,m.formatCurrencyInput)(a);f(r),h({...x,valorUnitario:(0,m.parseCurrencyInput)(a)})},error:S.valorUnitario})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data"}),(0,t.jsx)(u.default,{id:"data",onChange:e=>{e[0]&&h({...x,data:e[0]})},defaultDate:new Date(x.data)}),S.data&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.data})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"observacoes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observações"}),(0,t.jsx)("textarea",{id:"observacoes",name:"observacoes",rows:3,value:x.observacoes,onChange:e=>h({...x,observacoes:e.target.value}),className:"w-full rounded-lg border border-stroke bg-transparent px-4 py-3 outline-none focus:border-primary focus-visible:shadow-none dark:border-gray-600 dark:bg-gray-900 dark:focus:border-primary"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,t.jsx)(c.default,{variant:"secondary",onClick:r,disabled:E,children:"Cancelar"}),(0,t.jsx)(c.default,{variant:"primary",type:"submit",disabled:E,children:E?"Salvando...":e?"Atualizar":"Criar"})]})]})}]),r()}catch(e){r(e)}},!1),84841,e=>e.a(async(a,r)=>{try{var t=e.i(43476),s=e.i(71645),i=e.i(18566),l=e.i(5766),o=e.i(59544),d=e.i(59629),n=e.i(89504),c=e.i(67073),u=e.i(2865),m=e.i(68944),x=e.i(58700),g=e.i(90016),h=e.i(23115),p=a([u,g]);function f(){(0,i.useRouter)();let[e,a]=(0,s.useState)([]),[r,p]=(0,s.useState)(!0),[f,b]=(0,s.useState)(""),[v,y]=(0,s.useState)(1),[j,w]=(0,s.useState)(0),[k,N]=(0,s.useState)(!1),[C,S]=(0,s.useState)(null),[I,E]=(0,s.useState)({}),[q,A]=(0,s.useState)(9),D=(0,s.useCallback)(async()=>{try{p(!0);let e=await u.movimentoEstoqueService.list({page:v,perPage:q,search:f,tipo:I.tipo,produtoIds:I.produtoIds,orderBy:I.orderBy});a(e.data),w(e.pagination.pages)}catch(e){l.toast.error("Erro ao carregar movimentações")}finally{p(!1)}},[v,f,I,q]);(0,s.useEffect)(()=>{D()},[D]);let z=e=>{E(a=>({...a,...e})),y(1)},P=async e=>{if(window.confirm("Tem certeza que deseja excluir esta movimentação?"))try{await u.movimentoEstoqueService.delete(e),l.toast.success("Movimentação excluída com sucesso"),D()}catch(e){l.toast.error("Erro ao excluir movimentação")}},M=async e=>{try{C?(await u.movimentoEstoqueService.update(C.id,e),l.toast.success("Movimentação atualizada com sucesso")):(await u.movimentoEstoqueService.create(e),l.toast.success("Movimentação criada com sucesso")),N(!1),S(null),D()}catch(e){l.toast.error("Erro ao salvar movimentação")}},U=[{value:"ENTRADA",label:"Entrada"},{value:"SAIDA",label:"Saída"}],$=[{value:"data_desc",label:"Data - Mais recente"},{value:"data_asc",label:"Data - Mais antiga"},{value:"quantidade_desc",label:"Quantidade - Maior"},{value:"quantidade_asc",label:"Quantidade - Menor"}];return(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Movimentações de Estoque"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Gerencie todas as entradas e saídas de produtos no estoque"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(o.default,{variant:"primary",onClick:()=>{S(null),N(!0)},children:"Nova Movimentação"})})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,t.jsx)(n.default,{type:"text",placeholder:"Buscar movimentações...",value:f,onChange:e=>{b(e.target.value),y(1)},className:"w-full"})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)(c.default,{placeholder:"Tipo",options:U,value:U.find(e=>e.value===I.tipo),onChange:e=>z({tipo:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40"}),(0,t.jsx)(c.default,{placeholder:"Ordenar por",options:$,value:$.find(e=>e.value===I.orderBy),onChange:e=>z({orderBy:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(h.default,{className:"flex items-center mb-0 h-full",children:"Quantidade por página"}),(0,t.jsx)(n.default,{className:"max-w-24",defaultValue:q,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||9;A(a),y(1)}})]}),(0,t.jsx)(x.default,{currentPage:v,totalPages:j,onPageChange:y})]}),r?(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,t.jsx)(m.default,{movimentacao:e,onEdit:()=>{S(e),N(!0)},onDelete:()=>P(e.id)},e.id)):(0,t.jsx)("div",{className:"col-span-full text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma movimentação encontrada"})})}),j>1&&(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,t.jsx)(x.default,{currentPage:v,totalPages:j,onPageChange:y})})}),(0,t.jsx)(d.Modal,{isOpen:k,onClose:()=>{N(!1),S(null)},className:"max-w-[800px] m-4",children:(0,t.jsxs)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:[(0,t.jsxs)("div",{className:"px-2 pr-14",children:[(0,t.jsx)("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:C?"Editar Movimentação":"Novo Movimentação"}),(0,t.jsx)("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7",children:C?"Atualize as informações do movimentação.":"Preencha os dados para criar um novo movimentação."})]}),(0,t.jsx)(g.default,{movimentacao:C,onSubmit:M,onCancel:()=>{N(!1),S(null)}})]})})]})}[u,g]=p.then?(await p)():p,e.s(["default",()=>f]),r()}catch(e){r(e)}},!1),97813,e=>{e.v(a=>Promise.all(["static/chunks/67855d6bfd34a5bb.js"].map(a=>e.l(a))).then(()=>a(11229)))},72952,e=>{e.v(a=>Promise.all(["static/chunks/373ba0eb9f1d9e61.js"].map(a=>e.l(a))).then(()=>a(56703)))},47793,e=>{e.v(a=>Promise.all(["static/chunks/0f1833b87bc4e435.js"].map(a=>e.l(a))).then(()=>a(43625)))}]);