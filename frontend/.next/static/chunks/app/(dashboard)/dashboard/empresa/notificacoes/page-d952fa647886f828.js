(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2313],{11933:(a,e,s)=>{Promise.resolve().then(s.bind(s,12359))},12359:(a,e,s)=>{"use strict";s.a(a,async(a,l)=>{try{s.r(e),s.d(e,{default:()=>b});var t=s(95155),i=s(12115),r=s(13568),o=s(66695),c=s(37354),n=s(30353),d=s(60852),m=s(30174),u=s(12241),x=s(86061),g=s(40376),f=s(50597),p=s(63417),h=s(66681),v=s(53780),N=a([x,g,f,p,h]);function b(){let{user:a}=(0,h.A)(),{marcarComoLida:e,marcarTodasComoLidas:s,deleteNotificacao:l}=(0,p.E)(),[N,b]=(0,i.useState)([]),[j,w]=(0,i.useState)(!0),[A,y]=(0,i.useState)(""),[C,E]=(0,i.useState)(1),[P,S]=(0,i.useState)(0),[k,R]=(0,i.useState)({}),[_,M]=(0,i.useState)(20),[L,T]=(0,i.useState)(!1),[G,O]=(0,i.useState)(null),F=(0,i.useCallback)(async()=>{try{var a;w(!0);let e={page:C,perPage:_};void 0!==k.lida&&(e.lida=k.lida),k.tipo&&(e.tipo=k.tipo);let s=await x.$p.notificacao.list(e);b(s.data||[]),S((null===(a=s.pagination)||void 0===a?void 0:a.totalPages)||1)}catch(a){console.error("Erro ao carregar notifica\xe7\xf5es:",a),r.oR.error("Erro ao carregar notifica\xe7\xf5es")}finally{w(!1)}},[C,A,k,_]);(0,i.useEffect)(()=>{F()},[F]);let V=N.filter(a=>{if(!A)return!0;let e=A.toLowerCase();return a.titulo.toLowerCase().includes(e)||a.mensagem.toLowerCase().includes(e)}),B=a=>{R(e=>({...e,...a})),E(1)},D=async a=>{try{await e(a),await F(),r.oR.success("Notifica\xe7\xe3o marcada como lida")}catch(a){r.oR.error("Erro ao marcar notifica\xe7\xe3o como lida")}},I=async()=>{try{await s(),await F(),r.oR.success("Todas as notifica\xe7\xf5es foram marcadas como lidas")}catch(a){r.oR.error("Erro ao marcar todas como lidas")}},U=async a=>{if(window.confirm("Tem certeza que deseja excluir esta notifica\xe7\xe3o?"))try{await l(a),await F(),r.oR.success("Notifica\xe7\xe3o exclu\xedda com sucesso")}catch(a){r.oR.error("Erro ao excluir notifica\xe7\xe3o")}},q=a=>{let e=N.find(e=>e.id===a);e&&(O(e),T(!0))},z=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobran\xe7a Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"},{value:"TICKET_MENSAGEM",label:"Ticket Mensagem"}],K=[{value:"true",label:"Lidas"},{value:"false",label:"N\xe3o lidas"}],Q=N.filter(a=>!a.lida).length;return(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Notifica\xe7\xf5es"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie todas as suas notifica\xe7\xf5es"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:Q>0&&(0,t.jsx)(d.A,{variant:"outline",onClick:I,"aria-label":"Marcar todas como lidas",children:"Marcar todas como lidas"})})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,t.jsx)(c.A,{type:"text",placeholder:"Buscar notifica\xe7\xf5es...",value:A,onChange:a=>{y(a.target.value),E(1)},className:"w-full","aria-label":"Buscar notifica\xe7\xf5es"})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)(n.A,{placeholder:"Status",options:K,value:void 0!==k.lida?K.find(a=>a.value===String(k.lida)):void 0,onChange:a=>B({lida:a?"true"===a.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,t.jsx)(n.A,{placeholder:"Tipo",options:z,value:k.tipo?z.find(a=>a.value===k.tipo):void 0,onChange:a=>B({tipo:a?a.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50","aria-label":"Filtrar por tipo"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,t.jsx)(c.A,{className:"max-w-24",type:"number",defaultValue:_,max:100,min:1,onChange:a=>{let e=Number(a.target.value)||20;M(e),E(1)},"aria-label":"Itens por p\xe1gina"})]}),(0,t.jsx)(m.A,{currentPage:C,totalPages:P,onPageChange:E})]}),j?(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},a))}):0===V.length?(0,t.jsxs)(o.Z,{className:"p-12 text-center",children:[(0,t.jsx)(v.XF,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma notifica\xe7\xe3o encontrada"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:A||void 0!==k.lida||k.tipo?"Tente ajustar os filtros de busca":"Voc\xea n\xe3o possui notifica\xe7\xf5es no momento"})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:V.map(a=>(0,t.jsx)(g.A,{notificacao:a,onMarcarComoLida:D,onDelete:U,onView:q},a.id))}),!j&&V.length>0&&(0,t.jsx)("div",{className:"mt-6 flex justify-center",children:(0,t.jsx)(m.A,{currentPage:C,totalPages:P,onPageChange:E})}),(0,t.jsx)(f.A,{isOpen:L,onClose:()=>{T(!1),O(null),F()},notificacao:G,onMarcarComoLida:D,onDelete:U})]})}[x,g,f,p,h]=N.then?(await N)():N,l()}catch(a){l(a)}})}},a=>{var e=e=>a(a.s=e);a.O(0,[8122,3568,9688,6980,8572,4691,4349,5813,1086,8441,1684,7358],()=>e(11933)),_N_E=a.O()}]);