(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4912],{35695:(e,a,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},37064:(e,a,r)=>{Promise.resolve().then(r.bind(r,84850))},37354:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(95155);r(12115);let s=e=>{let{type:a="text",id:r,name:s,placeholder:l,defaultValue:o,onChange:n,min:c,max:i,step:d,disabled:u=!1,success:m=!1,error:g=!1,hint:h,value:x,required:y,className:b="",...f}=e,p="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ".concat(b);if("date"!==a&&(p+=" appearance-none"),u)p+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(g){if(p+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof g)return(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...f,type:a,id:r,name:s,placeholder:l,defaultValue:o,onChange:n,className:p,min:c,max:i,step:d,disabled:u,value:x,required:y}),(0,t.jsx)("p",{className:"mt-1 text-xs text-error-500",children:g})]})}else m?p+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":p+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{...f,type:a,id:r,name:s,placeholder:l,value:x,defaultValue:o,onChange:n,min:c,max:i,required:y,step:d,disabled:u,className:p}),h&&(0,t.jsx)("p",{className:"mt-1.5 text-xs ".concat(g?"text-error-500":m?"text-success-500":"text-gray-500"),children:h})]})}},60852:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(95155);r(12115);let s=e=>{let{children:a,size:r="md",variant:s="primary",startIcon:l,endIcon:o,onClick:n,className:c="",disabled:i=!1,type:d="button"}=e;return(0,t.jsxs)("button",{className:"inline-flex items-center justify-center font-medium gap-2 rounded-lg transition ".concat(c," ").concat({sm:"px-4 py-3 text-sm",md:"px-5 py-3.5 text-sm"}[r]," ").concat({primary:"bg-brand-500 text-white shadow-theme-xs hover:bg-brand-600 disabled:bg-brand-300",outline:"bg-white text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03] dark:hover:text-gray-300"}[s]," ").concat(i?"cursor-not-allowed opacity-50":""),onClick:n,disabled:i,type:d,children:[l&&(0,t.jsx)("span",{className:"flex items-center",children:l}),a,o&&(0,t.jsx)("span",{className:"flex items-center",children:o})]})}},66681:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{A:()=>i});var s=r(12115),l=r(35695),o=r(86061),n=r(2034),c=e([o]);function i(){let e=(0,l.useRouter)(),[a,r]=(0,s.useState)(null),[t,c]=(0,s.useState)(!0),i=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(i.current)return;let e=localStorage.getItem("user");if(e&&!a)try{r(JSON.parse(e))}catch(e){console.error("Erro ao parsear usu\xe1rio do cache:",e),localStorage.removeItem("user")}i.current=!0},[a]),(0,s.useEffect)(()=>{let a=localStorage.getItem("ultimoCheck"),t=localStorage.getItem("loadingCheck"),s=Date.now()-parseInt(a||"0");(localStorage.getItem("user")||a||t)&&(!a||!(s>6e4))||(localStorage.removeItem("loadingCheck"),localStorage.removeItem("ultimoCheck"));let l=async()=>{localStorage.setItem("loadingCheck","true");try{let e=await o.$p.auth.getMe();console.log("Authenticated user:",e.data),r(e.data),localStorage.setItem("user",JSON.stringify(e.data)),localStorage.removeItem("loadingCheck"),localStorage.setItem("ultimoCheck",Date.now().toString()),await new Promise(e=>setTimeout(e,1e4))}catch(a){n.cookies.token.remove(),e.push("/auth/login")}finally{c(!1)}};if(t||s<1e4){c(!1);return}l()},[e]);let d=!!a;return{user:a,loading:t,isAuthenticated:d,logout:function(){let a=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n.cookies.auth.clear(),r(null),localStorage.removeItem("user"),localStorage.removeItem("ultimoCheck"),localStorage.removeItem("loadingCheck"),a&&e.push("/auth/login")},updateUser:e=>{a&&r({...a,...e})}}}o=(c.then?(await c)():c)[0],t()}catch(e){t(e)}})},84850:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>m});var s=r(95155),l=r(12115),o=r(66681),n=r(86061),c=r(13568),i=r(37354),d=r(60852),u=e([o,n]);function m(){let{user:e,updateUser:a}=(0,o.A)(),[r,t]=(0,l.useState)(!1),[u,m]=(0,l.useState)({nome:"",email:"",celular:"",senha:"",confirmarSenha:""});(0,l.useEffect)(()=>{e&&m({nome:e.nome||"",email:e.email||"",celular:e.celular||"",senha:"",confirmarSenha:""})},[e]);let g=e=>{let{name:a,value:r}=e.target;m(e=>({...e,[a]:r}))},h=async r=>{if(r.preventDefault(),u.senha&&u.senha!==u.confirmarSenha){c.oR.error("As senhas n\xe3o coincidem");return}try{t(!0);let r={nome:u.nome,email:u.email,celular:u.celular};u.senha&&(r.senha=u.senha),await n.$p.users.update(e.id,r),a({nome:u.nome,email:u.email}),c.oR.success("Perfil atualizado com sucesso!"),m(e=>({...e,senha:"",confirmarSenha:""}))}catch(e){var s,l;c.oR.error((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Erro ao atualizar perfil")}finally{t(!1)}};return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,s.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome"}),(0,s.jsx)(i.A,{type:"text",name:"nome",value:u.nome,onChange:g,placeholder:"Digite seu nome",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,s.jsx)(i.A,{type:"email",name:"email",value:u.email,onChange:g,placeholder:"Digite seu email",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Celular"}),(0,s.jsx)(i.A,{type:"tel",name:"celular",value:u.celular,onChange:g,placeholder:"Digite seu celular"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fun\xe7\xe3o"}),(0,s.jsx)(i.A,{type:"text",value:(null==e?void 0:e.role)||"",disabled:!0,className:"bg-gray-100 dark:bg-gray-700"})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Alterar Senha"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nova Senha"}),(0,s.jsx)(i.A,{type:"password",name:"senha",value:u.senha,onChange:g,placeholder:"Digite a nova senha"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirmar Nova Senha"}),(0,s.jsx)(i.A,{type:"password",name:"confirmarSenha",value:u.confirmarSenha,onChange:g,placeholder:"Confirme a nova senha"})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(d.A,{type:"submit",disabled:r,className:"px-6 py-2",children:r?"Salvando...":"Salvar Altera\xe7\xf5es"})})]})})})}[o,n]=u.then?(await u)():u,t()}catch(e){t(e)}})}},e=>{var a=a=>e(e.s=a);e.O(0,[8122,3568,4349,8441,1684,7358],()=>a(37064)),_N_E=e.O()}]);