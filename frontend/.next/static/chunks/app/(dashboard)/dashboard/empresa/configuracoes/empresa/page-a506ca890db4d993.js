(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2872],{12241:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(95155);r(12115);var l=r(39688);let o=e=>{let{htmlFor:a,children:r,className:o}=e;return(0,t.jsx)("label",{htmlFor:a,className:(0,l.QP)("mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",o),children:r})}},13218:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>c});var l=r(95155),o=r(12115),s=r(13568),d=r(19627),n=r(63783),i=r(66681),u=e([d,n,i]);function c(){let{user:e}=(0,i.A)(),[a,r]=(0,o.useState)(null),[t,u]=(0,o.useState)(!0),[c,m]=(0,o.useState)(!1),g=(0,o.useCallback)(async()=>{try{var a;u(!0);let t=(null==e?void 0:e.empresaId)||(null==e?void 0:null===(a=e.empresa)||void 0===a?void 0:a.id);if(!t){r(null);return}let l=await d.j.getById(t);r(l.data)}catch(e){s.oR.error("Erro ao carregar dados da empresa")}finally{u(!1)}},[e]);(0,o.useEffect)(()=>{g()},[g]);let v=async r=>{if(a)try{m(!0);let t={...r};(null==e?void 0:e.role)!=="SUPERADMIN"&&delete t.vencimento,await d.j.update(a.id,t),s.oR.success("Configura\xe7\xf5es atualizadas"),await g()}catch(e){s.oR.error("Erro ao salvar")}finally{m(!1)}};return(0,l.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:"Configura\xe7\xf5es da Empresa"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Atualize os dados cadastrais e prefer\xeancias da sua empresa"})]})})}),t?(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,l.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):a?(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:(0,l.jsx)(n.A,{empresa:a,onSubmit:v,isSubmitting:c})}):(0,l.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Nenhuma empresa encontrada."})]})}[d,n,i]=u.then?(await u)():u,t()}catch(e){t(e)}})},13741:(e,a,r)=>{"use strict";r.d(a,{A:()=>l});var t=r(95155);r(12115);let l=e=>{let{variant:a="primary",size:r="md",loading:l=!1,fullWidth:o=!1,className:s="",children:d,disabled:n,...i}=e,u=["inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2",{success:"bg-green-500 text-white hover:bg-green-600 focus:ring-green-500",primary:"bg-brand-500 text-white hover:bg-brand-600 focus:ring-brand-500 disabled:bg-brand-300",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",danger:"bg-error-500 text-white hover:bg-error-600 focus:ring-error-500"}[a],{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"}[r],o?"w-full":"",n||l?"opacity-50 cursor-not-allowed":"",s].join(" ");return(0,t.jsxs)("button",{className:u,disabled:n||l,...i,children:[l&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})}},19824:(e,a,r)=>{"use strict";let t,l,o;r.d(a,{A:()=>u});var s=r(95155),d=r(12115);r(65371);var n=r(12241),i=r(53780);function u(e){let{id:a,mode:u,onChange:c,label:m,defaultDate:g,dateFormat:v="d/m/Y",placeholder:h,onClickHj:f,onClickMes:x,onClickAno:b,onClickClean:p}=e,[y,j]=(0,d.useState)(!1);return(f||(f=e=>{e&&e.setDate(new Date),e.close()}),p||(p=e=>{e&&e.clear(),e.close()}),(0,d.useEffect)(()=>{j(!0)},[]),(0,d.useEffect)(()=>{y&&(async()=>{try{var e;t=(await r.e(2125).then(r.bind(r,52125))).default,l=(await r.e(9955).then(r.t.bind(r,39955,23))).Portuguese;try{o=(await r.e(1873).then(r.t.bind(r,91873,23))).default}catch(e){o=void 0}let s=t("#".concat(a),{mode:u||"single",static:!1,dateFormat:v,defaultDate:g,onChange:c,locale:l,plugins:o?[o({button:[{label:"Hoje"},...x?[{label:"Este M\xeas"}]:[],...b?[{label:"Este Ano"}]:[],{label:"Limpar"}],onClick:[(e,a)=>{0===e&&f(a)},...x?[(e,a)=>{1===e&&x(a)}]:[],...b?[(e,a)=>{e===(x?2:1)&&b(a)}]:[],(e,a)=>{e===1+ +!!x+ +!!b&&p(a)}]})]:[]});return(null===(e=t.l10ns)||void 0===e?void 0:e.default)&&(t.l10ns.default.firstDayOfWeek=1),()=>{Array.isArray(s)||s.destroy()}}catch(e){console.error("Erro ao carregar flatpickr:",e)}})()},[y,u,c,a,g,v,b,x,f,p]),y)?(0,s.jsxs)("div",{children:[m&&(0,s.jsx)(n.A,{htmlFor:a,children:m}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:a,placeholder:h,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3  dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30  bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700  dark:focus:border-brand-800"}),(0,s.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,s.jsx)(i.e$,{className:"size-6"})})]})]}):(0,s.jsxs)("div",{children:[m&&(0,s.jsx)(n.A,{htmlFor:a,children:m}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:a,placeholder:h,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:focus:border-brand-800",disabled:!0}),(0,s.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,s.jsx)(i.e$,{className:"size-6"})})]})]})}},30353:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(95155);r(12115);var l=r(86980),o=r(37049);function s(e){let{error:a,className:r="",...s}=e,{isDark:d}=(0,o.D)();return(0,t.jsxs)("div",{className:r,children:[(0,t.jsx)(l.Ay,{...s,styles:{control:(e,r)=>({...e,backgroundColor:d?"#1F2937":"#fff",borderColor:a?"#EF4444":r.isFocused?"#3B82F6":d?"#374151":"#D1D5DB",borderRadius:"0.375rem",boxShadow:r.isFocused?"0 0 0 2px rgba(59, 130, 246, 0.5)":"none","&:hover":{borderColor:r.isFocused?"#3B82F6":d?"#4B5563":"#9CA3AF"},minHeight:"2.5rem"}),menu:e=>({...e,backgroundColor:d?"#1F2937":"#fff",borderColor:d?"#374151":"#D1D5DB",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}),option:(e,a)=>({...e,backgroundColor:a.isSelected?d?"#3B82F6":"#2563EB":a.isFocused?d?"#374151":"#F3F4F6":"transparent",color:a.isSelected?"#fff":d?"#D1D5DB":"#111827",cursor:"pointer","&:active":{backgroundColor:d?"#2563EB":"#3B82F6"}}),singleValue:e=>({...e,color:d?"#D1D5DB":"#111827"}),input:e=>({...e,color:d?"#D1D5DB":"#111827"}),placeholder:e=>({...e,color:d?"#6B7280":"#9CA3AF"}),indicatorSeparator:e=>({...e,backgroundColor:d?"#374151":"#D1D5DB"}),dropdownIndicator:e=>({...e,color:d?"#6B7280":"#9CA3AF","&:hover":{color:d?"#D1D5DB":"#4B5563"}}),clearIndicator:e=>({...e,color:d?"#6B7280":"#9CA3AF","&:hover":{color:d?"#D1D5DB":"#4B5563"}})},classNamePrefix:"react-select",className:a?"react-select-error":""}),a&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:a})]})}},35695:(e,a,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},37049:(e,a,r)=>{"use strict";r.d(a,{D:()=>d,ThemeProvider:()=>s});var t=r(95155),l=r(12115);let o=(0,l.createContext)(void 0),s=e=>{let{children:a}=e,[r,s]=(0,l.useState)("light"),[d,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{s(localStorage.getItem("theme")||"light"),n(!0)},[]),(0,l.useEffect)(()=>{d&&(localStorage.setItem("theme",r),"dark"===r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},[r,d]),(0,t.jsx)(o.Provider,{value:{theme:r,isDark:"dark"===r,toggleTheme:()=>{s(e=>"light"===e?"dark":"light")}},children:a})},d=()=>{let e=(0,l.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},37354:(e,a,r)=>{"use strict";r.d(a,{A:()=>l});var t=r(95155);r(12115);let l=e=>{let{type:a="text",id:r,name:l,placeholder:o,defaultValue:s,onChange:d,min:n,max:i,step:u,disabled:c=!1,success:m=!1,error:g=!1,hint:v,value:h,required:f,className:x="",...b}=e,p="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ".concat(x);if("date"!==a&&(p+=" appearance-none"),c)p+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(g){if(p+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof g)return(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...b,type:a,id:r,name:l,placeholder:o,defaultValue:s,onChange:d,className:p,min:n,max:i,step:u,disabled:c,value:h,required:f}),(0,t.jsx)("p",{className:"mt-1 text-xs text-error-500",children:g})]})}else m?p+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":p+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{...b,type:a,id:r,name:l,placeholder:o,value:h,defaultValue:s,onChange:d,min:n,max:i,required:f,step:u,disabled:c,className:p}),v&&(0,t.jsx)("p",{className:"mt-1.5 text-xs ".concat(g?"text-error-500":m?"text-success-500":"text-gray-500"),children:v})]})}},50817:(e,a,r)=>{Promise.resolve().then(r.bind(r,13218))},53780:(e,a,r)=>{"use strict";r.d(a,{C1:()=>o.default,CE:()=>f.default,D3:()=>x.default,Es:()=>G.default,Fn:()=>l.default,IJ:()=>n.default,Jc:()=>E.default,Mt:()=>b.default,R2:()=>h.default,Tb:()=>J.default,Td:()=>w.default,XA:()=>p.default,XF:()=>F.default,YJ:()=>S.default,Ze:()=>R.default,_0:()=>s.default,ag:()=>i.default,b1:()=>A.default,b4:()=>v.default,bM:()=>C.default,c1:()=>t.default,cr:()=>g.default,db:()=>k.default,e$:()=>j.default,fl:()=>u.default,j1:()=>B.default,jf:()=>I.default,mo:()=>d.default,nF:()=>c.default,pC:()=>m.default,qU:()=>P.default,r4:()=>D.default,rM:()=>N.default,sy:()=>T.default,u6:()=>y.default,wF:()=>M.default});var t=r(60792);r(59814);var l=r(51065),o=r(36689),s=r(62376),d=r(94456),n=r(48403);r(20969),r(98827),r(27468),r(56872),r(43224),r(53680);var i=r(87928);r(47642),r(25144);var u=r(31052),c=r(66923),m=r(36462);r(19526);var g=r(95035),v=r(98304);r(99437),r(52778);var h=r(33507),f=r(28243);r(83311);var x=r(84582),b=r(8193);r(99597);var p=r(32513),y=r(304);r(86242);var j=r(57299),C=r(93873),k=r(25766),A=r(71544),w=r(1467),S=r(3801),N=r(89856);r(75021),r(76572),r(20578),r(45357),r(92283),r(61807),r(36970),r(2001);var D=r(22950),E=r(63951);r(57786),r(83777);var F=r(61123),P=r(99840),B=r(15949),R=r(72959),I=r(38491),M=r(60444),T=r(64886),G=r(16222),J=r(13671)},63783:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{A:()=>h});var l=r(95155),o=r(12115),s=r(37354),d=r(12241),n=r(13741),i=r(30353),u=r(19824),c=r(13568),m=r(23464),g=r(66681),v=e([g]);g=(v.then?(await v)():v)[0];let f=[{value:"AC",label:"Acre"},{value:"AL",label:"Alagoas"},{value:"AP",label:"Amap\xe1"},{value:"AM",label:"Amazonas"},{value:"BA",label:"Bahia"},{value:"CE",label:"Cear\xe1"},{value:"DF",label:"Distrito Federal"},{value:"ES",label:"Esp\xedrito Santo"},{value:"GO",label:"Goi\xe1s"},{value:"MA",label:"Maranh\xe3o"},{value:"MT",label:"Mato Grosso"},{value:"MS",label:"Mato Grosso do Sul"},{value:"MG",label:"Minas Gerais"},{value:"PA",label:"Par\xe1"},{value:"PB",label:"Para\xedba"},{value:"PR",label:"Paran\xe1"},{value:"PE",label:"Pernambuco"},{value:"PI",label:"Piau\xed"},{value:"RJ",label:"Rio de Janeiro"},{value:"RN",label:"Rio Grande do Norte"},{value:"RS",label:"Rio Grande do Sul"},{value:"RO",label:"Rond\xf4nia"},{value:"RR",label:"Roraima"},{value:"SC",label:"Santa Catarina"},{value:"SP",label:"S\xe3o Paulo"},{value:"SE",label:"Sergipe"},{value:"TO",label:"Tocantins"}];function h(e){var a,r,t,v,h,x,b,p,y;let{empresa:j,onSubmit:C,isSubmitting:k}=e,{user:A}=(0,g.A)(),[w,S]=(0,o.useState)({nome:null!==(a=null==j?void 0:j.nome)&&void 0!==a?a:"",cpfCnpj:null!==(r=null==j?void 0:j.cpfCnpj)&&void 0!==r?r:"",celular:null!==(t=null==j?void 0:j.celular)&&void 0!==t?t:"",cep:null!==(v=null==j?void 0:j.cep)&&void 0!==v?v:"",cidade:null!==(h=null==j?void 0:j.cidade)&&void 0!==h?h:"",estado:null!==(x=null==j?void 0:j.estado)&&void 0!==x?x:"",bairro:null!==(b=null==j?void 0:j.bairro)&&void 0!==b?b:"",rua:null!==(p=null==j?void 0:j.rua)&&void 0!==p?p:"",numero:null!==(y=null==j?void 0:j.numero)&&void 0!==y?y:""});(0,o.useEffect)(()=>{var e,a,r,t,l,o,s,d,n;S({nome:null!==(e=null==j?void 0:j.nome)&&void 0!==e?e:"",cpfCnpj:null!==(a=null==j?void 0:j.cpfCnpj)&&void 0!==a?a:"",celular:null!==(r=null==j?void 0:j.celular)&&void 0!==r?r:"",cep:null!==(t=null==j?void 0:j.cep)&&void 0!==t?t:"",cidade:null!==(l=null==j?void 0:j.cidade)&&void 0!==l?l:"",estado:null!==(o=null==j?void 0:j.estado)&&void 0!==o?o:"",bairro:null!==(s=null==j?void 0:j.bairro)&&void 0!==s?s:"",rua:null!==(d=null==j?void 0:j.rua)&&void 0!==d?d:"",numero:null!==(n=null==j?void 0:j.numero)&&void 0!==n?n:""})},[j]);let[N,D]=(0,o.useState)(0),E=(0,o.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://viacep.com.br/ws/{cep}/json/",r=(e||"").replace(/\D/g,"");if(8===r.length){console.log("cep.length",r.length,"cep",r);try{let{data:e}=await m.A.get(a.replace("{cep}",r));if(null==e?void 0:e.erro){console.error("CEP n\xe3o encontrado, erro:",e.erro),D(e=>e+1);return}S(a=>({...a,rua:e.street||e.logradouro||a.rua,bairro:e.neighborhood||e.bairro||a.bairro,cidade:e.city||e.localidade||a.cidade,estado:e.state||e.uf||a.estado})),D(0)}catch(e){console.error("Erro ao buscar CEP:",e),D(e=>e+1)}}},[]);(0,o.useEffect)(()=>{if(0===N)return;if(N>1){console.log("Muitos erros ao buscar CEP, n\xe3o tentando mais"),D(0);return}let e=setTimeout(()=>{E(w.cep||"","https://brasilapi.com.br/api/cep/v1/{cep}")},3e3);return()=>clearTimeout(e)},[N,w.cep,E]);let F=async e=>{if(e.preventDefault(),!w.nome){c.oR.error("Nome \xe9 obrigat\xf3rio");return}await C(w)},P=(null==A?void 0:A.role)==="SUPERADMIN";return(0,l.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"nome",children:"Nome"}),(0,l.jsx)(s.A,{id:"nome",value:w.nome||"",onChange:e=>S({...w,nome:e.target.value}),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"cpfCnpj",children:"CPF/CNPJ"}),(0,l.jsx)(s.A,{id:"cpfCnpj",value:w.cpfCnpj||"",onChange:e=>S({...w,cpfCnpj:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"celular",children:"Celular"}),(0,l.jsx)(s.A,{id:"celular",value:w.celular||"",onChange:e=>S({...w,celular:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"cep",children:"CEP"}),(0,l.jsx)(s.A,{id:"cep",value:w.cep||"",onChange:e=>{S({...w,cep:e.target.value}),E(e.target.value)}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"rua",children:"Rua"}),(0,l.jsx)(s.A,{id:"rua",value:w.rua||"",onChange:e=>S({...w,rua:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"numero",children:"N\xfamero"}),(0,l.jsx)(s.A,{id:"numero",value:w.numero||"",onChange:e=>S({...w,numero:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"bairro",children:"Bairro"}),(0,l.jsx)(s.A,{id:"bairro",value:w.bairro||"",onChange:e=>S({...w,bairro:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"cidade",children:"Cidade"}),(0,l.jsx)(s.A,{id:"cidade",value:w.cidade||"",onChange:e=>S({...w,cidade:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{htmlFor:"estado",children:"Estado"}),(0,l.jsx)(i.A,{id:"estado",options:f,value:f.find(e=>e.value===w.estado),onChange:e=>S({...w,estado:null==e?void 0:e.value}),isClearable:!0})]}),(0,l.jsxs)("div",{className:P?"":"opacity-50 pointer-events-none",children:[(0,l.jsx)(d.A,{htmlFor:"vencimento",children:"Vencimento "}),(0,l.jsx)(u.A,{id:"vencimento",defaultDate:(null==j?void 0:j.vencimento)?new Date(j.vencimento):void 0,onChange:e=>{let a=null==e?void 0:e[0];S(e=>({...e,vencimento:a}))}})]})]}),(0,l.jsx)("div",{className:"flex gap-3 pt-6",children:(0,l.jsx)(n.A,{type:"submit",variant:"primary",disabled:!!k,className:"min-w-40",children:"Salvar altera\xe7\xf5es"})})]})}t()}catch(e){t(e)}})},65371:()=>{},66681:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(a,{A:()=>i});var l=r(12115),o=r(35695),s=r(86061),d=r(2034),n=e([s]);function i(){let e=(0,o.useRouter)(),[a,r]=(0,l.useState)(null),[t,n]=(0,l.useState)(!0),i=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if(i.current)return;let e=localStorage.getItem("user");if(e&&!a)try{r(JSON.parse(e))}catch(e){console.error("Erro ao parsear usu\xe1rio do cache:",e),localStorage.removeItem("user")}i.current=!0},[a]),(0,l.useEffect)(()=>{let a=localStorage.getItem("ultimoCheck"),t=localStorage.getItem("loadingCheck"),l=Date.now()-parseInt(a||"0");(localStorage.getItem("user")||a||t)&&(!a||!(l>6e4))||(localStorage.removeItem("loadingCheck"),localStorage.removeItem("ultimoCheck"));let o=async()=>{localStorage.setItem("loadingCheck","true");try{let e=await s.$p.auth.getMe();console.log("Authenticated user:",e.data),r(e.data),localStorage.setItem("user",JSON.stringify(e.data)),localStorage.removeItem("loadingCheck"),localStorage.setItem("ultimoCheck",Date.now().toString()),await new Promise(e=>setTimeout(e,1e4))}catch(a){d.cookies.token.remove(),e.push("/auth/login")}finally{n(!1)}};if(t||l<1e4){n(!1);return}o()},[e]);let u=!!a;return{user:a,loading:t,isAuthenticated:u,logout:function(){let a=!(arguments.length>0)||void 0===arguments[0]||arguments[0];d.cookies.auth.clear(),r(null),localStorage.removeItem("user"),localStorage.removeItem("ultimoCheck"),localStorage.removeItem("loadingCheck"),a&&e.push("/auth/login")},updateUser:e=>{a&&r({...a,...e})}}}s=(n.then?(await n)():n)[0],t()}catch(e){t(e)}})}},e=>{var a=a=>e(e.s=a);e.O(0,[6474,8122,3568,9688,6980,4691,4349,8441,1684,7358],()=>a(50817)),_N_E=e.O()}]);