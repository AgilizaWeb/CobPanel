(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3887],{12241:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var t=a(95155);a(12115);var s=a(39688);let l=e=>{let{htmlFor:r,children:a,className:l}=e;return(0,t.jsx)("label",{htmlFor:r,className:(0,s.QP)("mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",l),children:a})}},13741:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(95155);a(12115);let s=e=>{let{variant:r="primary",size:a="md",loading:s=!1,fullWidth:l=!1,className:o="",children:n,disabled:c,...i}=e,d=["inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2",{success:"bg-green-500 text-white hover:bg-green-600 focus:ring-green-500",primary:"bg-brand-500 text-white hover:bg-brand-600 focus:ring-brand-500 disabled:bg-brand-300",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",danger:"bg-error-500 text-white hover:bg-error-600 focus:ring-error-500"}[r],{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"}[a],l?"w-full":"",c||s?"opacity-50 cursor-not-allowed":"",o].join(" ");return(0,t.jsxs)("button",{className:d,disabled:c||s,...i,children:[s&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}},35695:(e,r,a)=>{"use strict";var t=a(18999);a.o(t,"useParams")&&a.d(r,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},37354:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(95155);a(12115);let s=e=>{let{type:r="text",id:a,name:s,placeholder:l,defaultValue:o,onChange:n,min:c,max:i,step:d,disabled:u=!1,success:m=!1,error:g=!1,hint:h,value:x,required:f,className:y="",...p}=e,v="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ".concat(y);if("date"!==r&&(v+=" appearance-none"),u)v+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(g){if(v+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof g)return(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...p,type:r,id:a,name:s,placeholder:l,defaultValue:o,onChange:n,className:v,min:c,max:i,step:d,disabled:u,value:x,required:f}),(0,t.jsx)("p",{className:"mt-1 text-xs text-error-500",children:g})]})}else m?v+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":v+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{...p,type:r,id:a,name:s,placeholder:l,value:x,defaultValue:o,onChange:n,min:c,max:i,required:f,step:d,disabled:u,className:v}),h&&(0,t.jsx)("p",{className:"mt-1.5 text-xs ".concat(g?"text-error-500":m?"text-success-500":"text-gray-500"),children:h})]})}},62437:(e,r,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.r(r),a.d(r,{default:()=>h});var s=a(95155),l=a(12115),o=a(66681),n=a(8496),c=a(86061),i=a(37354),d=a(12241),u=a(13741),m=a(13568),g=e([o,n,c]);function h(){let{user:e,loading:r}=(0,o.A)(),[a,t]=(0,l.useState)({nome:"",email:"",celular:""}),[g,h]=(0,l.useState)(!1),[x,f]=(0,l.useState)(""),[y,p]=(0,l.useState)(""),[v,b]=(0,l.useState)(""),[j,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&t({nome:e.nome||"",email:e.email||"",celular:e.celular||""})},[e]);let w=async r=>{if(r.preventDefault(),e)try{h(!0),await n.c.update(e.id,{nome:a.nome,email:a.email,celular:a.celular}),m.oR.success("Dados atualizados")}catch(e){m.oR.error("Erro ao atualizar dados")}finally{h(!1)}},S=async e=>{if(e.preventDefault(),!x||!y){m.oR.error("Preencha a senha atual e a nova senha");return}if(y!==v){m.oR.error("As senhas n\xe3o conferem");return}try{k(!0),await c.$p.auth.changePassword({senhaAtual:x,novaSenha:y}),f(""),p(""),b(""),m.oR.success("Senha alterada com sucesso")}catch(e){m.oR.error("Erro ao alterar senha")}finally{k(!1)}};return(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-1",children:"Minha Conta"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Atualize seus dados pessoais e senha de acesso"})]})})}),r?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Dados do usu\xe1rio"}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{htmlFor:"nome",children:"Nome"}),(0,s.jsx)(i.A,{id:"nome",value:a.nome,onChange:e=>t({...a,nome:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{htmlFor:"email",children:"Email"}),(0,s.jsx)(i.A,{id:"email",type:"email",value:a.email,onChange:e=>t({...a,email:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{htmlFor:"celular",children:"Celular"}),(0,s.jsx)(i.A,{id:"celular",value:a.celular||"",onChange:e=>t({...a,celular:e.target.value})})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(u.A,{type:"submit",variant:"primary",disabled:g,className:"min-w-40",children:"Salvar"})})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Alterar senha"}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{htmlFor:"senhaAtual",children:"Senha atual"}),(0,s.jsx)(i.A,{id:"senhaAtual",type:"password",value:x,onChange:e=>f(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{htmlFor:"novaSenha",children:"Nova senha"}),(0,s.jsx)(i.A,{id:"novaSenha",type:"password",value:y,onChange:e=>p(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{htmlFor:"confirmSenha",children:"Confirmar nova senha"}),(0,s.jsx)(i.A,{id:"confirmSenha",type:"password",value:v,onChange:e=>b(e.target.value),required:!0})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(u.A,{type:"submit",variant:"secondary",disabled:j,className:"min-w-40",children:"Alterar senha"})})]})]})]})]})}[o,n,c]=g.then?(await g)():g,t()}catch(e){t(e)}})},66681:(e,r,a)=>{"use strict";a.a(e,async(e,t)=>{try{a.d(r,{A:()=>i});var s=a(12115),l=a(35695),o=a(86061),n=a(2034),c=e([o]);function i(){let e=(0,l.useRouter)(),[r,a]=(0,s.useState)(null),[t,c]=(0,s.useState)(!0),i=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(i.current)return;let e=localStorage.getItem("user");if(e&&!r)try{a(JSON.parse(e))}catch(e){console.error("Erro ao parsear usu\xe1rio do cache:",e),localStorage.removeItem("user")}i.current=!0},[r]),(0,s.useEffect)(()=>{let r=localStorage.getItem("ultimoCheck"),t=localStorage.getItem("loadingCheck"),s=Date.now()-parseInt(r||"0");(localStorage.getItem("user")||r||t)&&(!r||!(s>6e4))||(localStorage.removeItem("loadingCheck"),localStorage.removeItem("ultimoCheck"));let l=async()=>{localStorage.setItem("loadingCheck","true");try{let e=await o.$p.auth.getMe();console.log("Authenticated user:",e.data),a(e.data),localStorage.setItem("user",JSON.stringify(e.data)),localStorage.removeItem("loadingCheck"),localStorage.setItem("ultimoCheck",Date.now().toString()),await new Promise(e=>setTimeout(e,1e4))}catch(r){n.cookies.token.remove(),e.push("/auth/login")}finally{c(!1)}};if(t||s<1e4){c(!1);return}l()},[e]);let d=!!r;return{user:r,loading:t,isAuthenticated:d,logout:function(){let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n.cookies.auth.clear(),a(null),localStorage.removeItem("user"),localStorage.removeItem("ultimoCheck"),localStorage.removeItem("loadingCheck"),r&&e.push("/auth/login")},updateUser:e=>{r&&a({...r,...e})}}}o=(c.then?(await c)():c)[0],t()}catch(e){t(e)}})},67561:(e,r,a)=>{Promise.resolve().then(a.bind(a,62437))}},e=>{var r=r=>e(e.s=r);e.O(0,[8122,3568,9688,4349,8441,1684,7358],()=>r(67561)),_N_E=e.O()}]);