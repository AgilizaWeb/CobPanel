(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7109],{8108:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>v});var s=t(95155),l=t(12115),n=t(22663),o=t(31166),c=t(50412),i=t(40989),d=t(43698),x=t(56355),m=t(48428),g=t(73424),u=t(11492),h=t(30304),p=e([x,u]);function v(){let[e,a]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[p,v]=(0,l.useState)(""),[b,y]=(0,l.useState)(1),[f,w]=(0,l.useState)(0),[j,N]=(0,l.useState)(!1),[k,E]=(0,l.useState)(null),[C,A]=(0,l.useState)({}),[P,S]=(0,l.useState)(9),F=(0,l.useCallback)(async()=>{try{r(!0);let e=await x.p.list({page:b,perPage:P,search:p,status:C.status?[C.status]:void 0,fornecedorId:C.fornecedorId,orderBy:C.orderBy});a(e.data),w(e.pagination.pages)}catch(e){n.oR.error("Erro ao carregar contas a pagar")}finally{r(!1)}},[b,p,C,P]);(0,l.useEffect)(()=>{F()},[F]);let D=e=>{A(a=>({...a,...e})),y(1)},I=async e=>{if(window.confirm("Tem certeza que deseja excluir esta conta?"))try{await x.p.delete(e),n.oR.success("Conta exclu\xedda com sucesso"),F()}catch(e){n.oR.error("Erro ao excluir conta")}},O=async e=>{try{await x.p.update(e.id,{...e,status:"PENDENTE"===e.status?"PAGO":"PENDENTE"}),n.oR.success("Conta cancelada com sucesso"),F()}catch(e){console.error("Erro ao cancelar conta",e),n.oR.error("Erro ao cancelar conta")}},R=async e=>{try{k?(await x.p.update(k.id,e),n.oR.success("Conta atualizada com sucesso")):(await x.p.create(e),n.oR.success("Conta criada com sucesso")),N(!1),E(null),F()}catch(e){n.oR.error("Erro ao salvar conta")}},_=[{value:"PENDENTE",label:"Pendente"},{value:"PAGO",label:"Pago"}],z=[{value:"vencimento_desc",label:"Vencimento - Mais pr\xf3ximo"},{value:"vencimento_asc",label:"Vencimento - Mais distante"},{value:"valor_desc",label:"Valor - Maior"},{value:"valor_asc",label:"Valor - Menor"}];return(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Contas a Pagar"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Gerencie todas as contas a pagar da empresa"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(o.A,{variant:"primary",onClick:()=>{E(null),N(!0)},children:"Nova Conta"})})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,s.jsx)(i.A,{type:"text",placeholder:"Buscar contas...",value:p,onChange:e=>{v(e.target.value),y(1)},className:"w-full"})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(d.A,{placeholder:"Status",options:_,value:_.find(e=>e.value===C.status),onChange:e=>D({status:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40"}),(0,s.jsx)(d.A,{placeholder:"Ordenar por",options:z,value:z.find(e=>e.value===C.orderBy),onChange:e=>D({orderBy:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)(h.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,s.jsx)(i.A,{className:"max-w-24",defaultValue:P,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||9;S(a),y(1)}})]}),(0,s.jsx)(g.A,{currentPage:b,totalPages:f,onPageChange:y})]}),t?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,s.jsx)(m.A,{conta:e,onEdit:()=>{E(e),N(!0)},onDelete:()=>I(e.id),onHandleStatus:()=>O(e)},e.id)):(0,s.jsx)("div",{className:"col-span-full text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma conta encontrada"})})}),f>1&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,s.jsx)(g.A,{currentPage:b,totalPages:f,onPageChange:y})})}),(0,s.jsx)(c.a,{isOpen:j,onClose:()=>{N(!1),E(null)},className:"max-w-[800px] m-4",children:(0,s.jsxs)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:[(0,s.jsxs)("div",{className:"px-2 pr-14",children:[(0,s.jsx)("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:k?"Editar Conta":"Novo Conta"}),(0,s.jsx)("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7",children:k?"Atualize as informa\xe7\xf5es do conta.":"Preencha os dados para criar um novo conta."})]}),(0,s.jsx)(u.A,{contaPagar:k,onSubmit:R,onCancel:()=>{N(!1),E(null)}})]})})]})}[x,u]=p.then?(await p)():p,r()}catch(e){r(e)}})},8723:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(95155);t(12115);let s=e=>{let{variant:a="light",color:t="primary",size:s="md",startIcon:l,className:n,endIcon:o,children:c}=e,i={light:{primary:"bg-brand-50 text-brand-500 dark:bg-brand-500/15 dark:text-brand-400",success:"bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500",error:"bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500",warning:"bg-warning-50 text-warning-600 dark:bg-warning-500/15 dark:text-orange-400",info:"bg-blue-light-50 text-blue-light-500 dark:bg-blue-light-500/15 dark:text-blue-light-500",light:"bg-gray-100 text-gray-700 dark:bg-white/5 dark:text-white/80",dark:"bg-gray-500 text-white dark:bg-white/5 dark:text-white"},solid:{primary:"bg-brand-500 text-white dark:text-white",success:"bg-success-500 text-white dark:text-white",error:"bg-error-500 text-white dark:text-white",warning:"bg-warning-500 text-white dark:text-white",info:"bg-blue-light-500 text-white dark:text-white",light:"bg-gray-400 dark:bg-white/5 text-white dark:text-white/80",dark:"bg-gray-700 text-white dark:text-white"}}[a][t];return(0,r.jsxs)("span",{className:"".concat("inline-flex items-center px-2.5 py-0.5 justify-center gap-1 rounded-full font-medium"," ").concat({sm:"text-theme-xs",md:"text-sm"}[s]," ").concat(i," ").concat(n),children:[l&&(0,r.jsx)("span",{className:"mr-1",children:l}),c,o&&(0,r.jsx)("span",{className:"ml-1",children:o})]})}},11492:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{A:()=>u});var s=t(95155),l=t(12115),n=t(22663),o=t(56350),c=t(40989),i=t(43698),d=t(31166),x=t(30781),m=t(94325),g=e([o]);o=(g.then?(await g)():g)[0];let u=e=>{let{contaPagar:a,onSubmit:t,onCancel:r}=e,[g,u]=(0,l.useState)({nome:(null==a?void 0:a.nome)||"",observacao:(null==a?void 0:a.observacao)||"",valor:(null==a?void 0:a.valor)||0,vencimento:(null==a?void 0:a.vencimento)||new Date,fornecedorId:(null==a?void 0:a.fornecedorId)||0,status:(null==a?void 0:a.status)||"PENDENTE"}),[h,p]=(0,l.useState)((null==a?void 0:a.valor)?(0,m.vv)(a.valor).replace("R$","").trim():""),[v,b]=(0,l.useState)([]),[y,f]=(0,l.useState)(!0),[w,j]=(0,l.useState)({}),[N,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{E()},[]);let E=async()=>{try{f(!0);let e=await o.P.list({page:1,perPage:100});b(e.data)}catch(e){n.oR.error("Erro ao carregar fornecedores")}finally{f(!1)}},C=async e=>{if(e.preventDefault(),(()=>{let e={};return["valor","vencimento"].forEach(a=>{g[a]||(e[a]="".concat(a.charAt(0).toUpperCase()+a.slice(1)," \xe9 obrigat\xf3rio"))}),g.valor<=0&&(e.valor="Valor deve ser maior que zero"),j(e),0===Object.keys(e).length})()){k(!0);try{await t(g)}catch(e){n.oR.error("Erro ao salvar conta a pagar")}finally{k(!1)}}};return(0,s.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"observacao",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome"}),(0,s.jsx)(c.A,{id:"nome",name:"nome",value:g.nome,onChange:e=>u({...g,nome:e.target.value}),error:w.nome})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fornecedorId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fornecedor"}),(0,s.jsx)(i.A,{id:"fornecedorId",name:"fornecedorId",isLoading:y,value:v.filter(e=>e.id===g.fornecedorId).map(e=>({value:String(e.id),label:e.nome}))[0],options:v.map(e=>({value:String(e.id),label:e.nome})),onChange:e=>{e&&u({...g,fornecedorId:parseInt(e.value,10)})},placeholder:"Selecione o fornecedor",error:w.fornecedorId,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"valor",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute z-1 left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-300",children:"R$"}),(0,s.jsx)(c.A,{id:"valor",name:"valor",type:"text",value:h,className:"pl-9",onChange:e=>{let a=e.target.value.replace(/\D/g,"");if(""===a){p(""),u({...g,valor:0});return}let t=(0,m.F5)(a);p(t),u({...g,valor:(0,m.h4)(a)})},error:w.valor})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"vencimento",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data de Vencimento"}),(0,s.jsx)(x.A,{id:"vencimento",onChange:e=>{e[0]&&u({...g,vencimento:e[0]})},defaultDate:new Date(g.vencimento)}),w.vencimento&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.vencimento})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"observacoes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observa\xe7\xf5es"}),(0,s.jsx)("textarea",{id:"observacao",name:"observacao",rows:3,value:g.observacao,onChange:e=>u({...g,observacao:e.target.value}),className:"w-full rounded-lg border border-stroke bg-transparent px-4 py-3 outline-none focus:border-primary focus-visible:shadow-none dark:border-gray-600 dark:bg-gray-900 dark:focus:border-primary dark:text-white"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,s.jsx)(d.A,{variant:"secondary",onClick:r,disabled:N,children:"Cancelar"}),(0,s.jsx)(d.A,{variant:"primary",type:"submit",disabled:N,children:N?"Salvando...":a?"Atualizar":"Criar"})]})]})};r()}catch(e){r(e)}})},24985:()=>{},30781:(e,a,t)=>{"use strict";let r,s,l;t.d(a,{A:()=>d});var n=t(95155),o=t(12115);t(24985);var c=t(30304),i=t(99145);function d(e){let{id:a,mode:d,onChange:x,label:m,defaultDate:g,dateFormat:u="d/m/Y",placeholder:h,onClickHj:p,onClickMes:v,onClickAno:b,onClickClean:y}=e,[f,w]=(0,o.useState)(!1);return(p||(p=e=>{e&&e.setDate(new Date),e.close()}),y||(y=e=>{e&&e.clear(),e.close()}),(0,o.useEffect)(()=>{w(!0)},[]),(0,o.useEffect)(()=>{f&&(async()=>{try{var e;r=(await t.e(8822).then(t.bind(t,28822))).default,s=(await t.e(844).then(t.t.bind(t,80844,23))).Portuguese;try{l=(await t.e(2530).then(t.t.bind(t,12530,23))).default}catch(e){l=void 0}let n=r("#".concat(a),{mode:d||"single",static:!1,dateFormat:u,defaultDate:g,onChange:x,locale:s,plugins:l?[l({button:[{label:"Hoje"},...v?[{label:"Este M\xeas"}]:[],...b?[{label:"Este Ano"}]:[],{label:"Limpar"}],onClick:[(e,a)=>{0===e&&p(a)},...v?[(e,a)=>{1===e&&v(a)}]:[],...b?[(e,a)=>{e===(v?2:1)&&b(a)}]:[],(e,a)=>{e===1+ +!!v+ +!!b&&y(a)}]})]:[]});return(null==(e=r.l10ns)?void 0:e.default)&&(r.l10ns.default.firstDayOfWeek=1),()=>{Array.isArray(n)||n.destroy()}}catch(e){console.error("Erro ao carregar flatpickr:",e)}})()},[f,d,x,a,g,u,b,v,p,y]),f)?(0,n.jsxs)("div",{children:[m&&(0,n.jsx)(c.A,{htmlFor:a,children:m}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{id:a,placeholder:h,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3  dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30  bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700  dark:focus:border-brand-800"}),(0,n.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,n.jsx)(i.e$,{className:"size-6"})})]})]}):(0,n.jsxs)("div",{children:[m&&(0,n.jsx)(c.A,{htmlFor:a,children:m}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{id:a,placeholder:h,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:focus:border-brand-800",disabled:!0}),(0,n.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,n.jsx)(i.e$,{className:"size-6"})})]})]})}},48428:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(95155);t(12115);var s=t(94325),l=t(8723),n=t(22851);let o={PENDENTE:"warning",PAGO:"success"},c=e=>{let{conta:a,onEdit:t,onDelete:c,onHandleStatus:i}=e;return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md shadow-gray-200 dark:shadow-gray-700 border border-gray-200 dark:border-gray-700 p-4",children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap overflow-x-hidden",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:a.nome}),(0,r.jsx)(l.A,{color:o[a.status],className:"capitalize",children:a.status.toLowerCase().replace("_"," ")})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Valor: ",(0,s.vv)(a.valor)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Vencimento: ",(0,s.Yq)(a.vencimento)]}),a.dataPagamento&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Data Pagamento: ",(0,s.Yq)(a.dataPagamento)]}),a.fornecedor&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Fornecedor: ",a.fornecedor.nome]})]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,r.jsx)(n.A,{variant:"secondary",size:"xs",onClick:t,title:"Editar",icon:"edit"}),(0,r.jsx)(n.A,{variant:"secondary",size:"xs",onClick:c,title:"Excluir",icon:"delete"})]})]})})})}},56355:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{p:()=>n});var s=t(9678),l=e([s]);s=(l.then?(await l)():l)[0];let n={create:async e=>(await s.FH.post("/contas-pagar",e)).data,async list(){let{page:e=1,perPage:a=10,search:t="",status:r,fornecedorId:l,categoriaId:n,dataInicio:o,dataFim:c,orderBy:i="vencimento_asc"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.FH.get("/contas-pagar",{params:{page:e,limit:a,search:t,status:null==r?void 0:r.join(","),fornecedorId:l,categoriaId:n,dataInicio:null==o?void 0:o.toISOString(),dataFim:null==c?void 0:c.toISOString(),orderBy:i}})).data},getById:async e=>(await s.FH.get("/contas-pagar/".concat(e))).data,update:async(e,a)=>(await s.FH.put("/contas-pagar/".concat(e),a)).data,delete:async e=>(await s.FH.delete("/contas-pagar/".concat(e))).data,registrarPagamento:async(e,a)=>(await s.FH.post("/contas-pagar/".concat(e,"/pagar"),{dataPagamento:a})).data,cancelarPagamento:async e=>(await s.FH.post("/contas-pagar/".concat(e,"/cancelar"))).data};r()}catch(e){r(e)}})},77146:(e,a,t)=>{Promise.resolve().then(t.bind(t,8108))}},e=>{e.O(0,[4674,3598,2663,5889,7750,4691,5938,8441,1255,7358],()=>e(e.s=77146)),_N_E=e.O()}]);