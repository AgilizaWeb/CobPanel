(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6601],{2357:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{q:()=>l});var s=t(71541),o=e([s]);s=(o.then?(await o)():o)[0];let l={create:async e=>(await s.FH.post("/movimentos-estoque",e)).data,async list(){let{page:e=1,perPage:a=10,search:t="",tipo:r,produtoIds:o,orderBy:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.FH.get("/movimentos-estoque",{params:{page:e,limit:a,search:t,tipo:r,produtoIds:null==o?void 0:o.toString(),orderBy:l}})).data},getById:async e=>(await s.FH.get("/movimentos-estoque/".concat(e))).data,update:async(e,a)=>(await s.FH.put("/movimentos-estoque/".concat(e),a)).data,delete:async e=>(await s.FH.delete("/movimentos-estoque/".concat(e))).data,getTotal:async()=>(await s.FH.get("/movimentos-estoque/count/total")).data};r()}catch(e){r(e)}})},14990:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(95155);t(12115);let s=e=>{let{variant:a="light",color:t="primary",size:s="md",startIcon:o,className:l,endIcon:d,children:i}=e,n={light:{primary:"bg-brand-50 text-brand-500 dark:bg-brand-500/15 dark:text-brand-400",success:"bg-success-50 text-success-600 dark:bg-success-500/15 dark:text-success-500",error:"bg-error-50 text-error-600 dark:bg-error-500/15 dark:text-error-500",warning:"bg-warning-50 text-warning-600 dark:bg-warning-500/15 dark:text-orange-400",info:"bg-blue-light-50 text-blue-light-500 dark:bg-blue-light-500/15 dark:text-blue-light-500",light:"bg-gray-100 text-gray-700 dark:bg-white/5 dark:text-white/80",dark:"bg-gray-500 text-white dark:bg-white/5 dark:text-white"},solid:{primary:"bg-brand-500 text-white dark:text-white",success:"bg-success-500 text-white dark:text-white",error:"bg-error-500 text-white dark:text-white",warning:"bg-warning-500 text-white dark:text-white",info:"bg-blue-light-500 text-white dark:text-white",light:"bg-gray-400 dark:bg-white/5 text-white dark:text-white/80",dark:"bg-gray-700 text-white dark:text-white"}}[a][t];return(0,r.jsxs)("span",{className:"".concat("inline-flex items-center px-2.5 py-0.5 justify-center gap-1 rounded-full font-medium"," ").concat({sm:"text-theme-xs",md:"text-sm"}[s]," ").concat(n," ").concat(l),children:[o&&(0,r.jsx)("span",{className:"mr-1",children:o}),i,d&&(0,r.jsx)("span",{className:"ml-1",children:d})]})}},16646:(e,a,t)=>{Promise.resolve().then(t.bind(t,55599))},19824:(e,a,t)=>{"use strict";let r,s,o;t.d(a,{A:()=>c});var l=t(95155),d=t(12115);t(65371);var i=t(12241),n=t(53780);function c(e){let{id:a,mode:c,onChange:u,label:m,defaultDate:x,dateFormat:g="d/m/Y",placeholder:h,onClickHj:p,onClickMes:v,onClickAno:b,onClickClean:y}=e,[f,w]=(0,d.useState)(!1);return(p||(p=e=>{e&&e.setDate(new Date),e.close()}),y||(y=e=>{e&&e.clear(),e.close()}),(0,d.useEffect)(()=>{w(!0)},[]),(0,d.useEffect)(()=>{f&&(async()=>{try{var e;r=(await t.e(2125).then(t.bind(t,52125))).default,s=(await t.e(9955).then(t.t.bind(t,39955,23))).Portuguese;try{o=(await t.e(1873).then(t.t.bind(t,91873,23))).default}catch(e){o=void 0}let l=r("#".concat(a),{mode:c||"single",static:!1,dateFormat:g,defaultDate:x,onChange:u,locale:s,plugins:o?[o({button:[{label:"Hoje"},...v?[{label:"Este M\xeas"}]:[],...b?[{label:"Este Ano"}]:[],{label:"Limpar"}],onClick:[(e,a)=>{0===e&&p(a)},...v?[(e,a)=>{1===e&&v(a)}]:[],...b?[(e,a)=>{e===(v?2:1)&&b(a)}]:[],(e,a)=>{e===1+ +!!v+ +!!b&&y(a)}]})]:[]});return(null===(e=r.l10ns)||void 0===e?void 0:e.default)&&(r.l10ns.default.firstDayOfWeek=1),()=>{Array.isArray(l)||l.destroy()}}catch(e){console.error("Erro ao carregar flatpickr:",e)}})()},[f,c,u,a,x,g,b,v,p,y]),f)?(0,l.jsxs)("div",{children:[m&&(0,l.jsx)(i.A,{htmlFor:a,children:m}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{id:a,placeholder:h,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3  dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30  bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700  dark:focus:border-brand-800"}),(0,l.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,l.jsx)(n.e$,{className:"size-6"})})]})]}):(0,l.jsxs)("div",{children:[m&&(0,l.jsx)(i.A,{htmlFor:a,children:m}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{id:a,placeholder:h,className:"h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:focus:border-brand-800",disabled:!0}),(0,l.jsx)("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:(0,l.jsx)(n.e$,{className:"size-6"})})]})]})}},20295:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(95155);t(12115);var s=t(61884),o=t(14990),l=t(82782);let d={ENTRADA:"success",SAIDA:"error"},i=e=>{var a;let{movimentacao:t,onEdit:i,onDelete:n}=e;return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md shadow-gray-200 dark:shadow-gray-700 border border-gray-200 dark:border-gray-700 p-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap overflow-x-hidden",children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-900 dark:text-white",children:[(null===(a=t.produto)||void 0===a?void 0:a.nome)||"Produto n\xe3o encontrado"," - ",(0,s.vv)(t.valorUnitario)]}),(0,r.jsx)(o.A,{color:d[t.tipo],className:"capitalize",children:t.tipo.toLowerCase()})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Quantidade: ",t.quantidade]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Data: ",(0,s.Yq)(t.data)]}),t.fornecedor&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Fornecedor: ",t.fornecedor.nome]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.A,{variant:"secondary",size:"xs",onClick:i,title:"Editar",icon:"edit"}),(0,r.jsx)(l.A,{variant:"secondary",size:"xs",onClick:n,title:"Excluir",icon:"delete"})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:t.observacoes&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:t.observacoes})})]})})}},31425:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{z:()=>l});var s=t(71541),o=e([s]);s=(o.then?(await o)():o)[0];let l={create:async e=>(await s.FH.post("/produtos",e)).data,async list(e){let{page:a=1,limit:t=10,search:r=""}=e;return(await s.FH.get("/produtos",{params:{page:a,limit:t,search:r}})).data},getById:async e=>(await s.FH.get("/produtos/".concat(e))).data,update:async(e,a)=>(await s.FH.put("/produtos/".concat(e),a)).data,delete:async e=>(await s.FH.delete("/produtos/".concat(e))).data,getTotal:async()=>(await s.FH.get("/produtos/count/total")).data};r()}catch(e){r(e)}})},35695:(e,a,t)=>{"use strict";var r=t(18999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},55599:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>b});var s=t(95155),o=t(12115),l=t(35695),d=t(13568),i=t(13741),n=t(58277),c=t(37354),u=t(30353),m=t(2357),x=t(20295),g=t(21913),h=t(77311),p=t(12241),v=e([m,h]);function b(){(0,l.useRouter)();let[e,a]=(0,o.useState)([]),[t,r]=(0,o.useState)(!0),[v,b]=(0,o.useState)(""),[y,f]=(0,o.useState)(1),[w,j]=(0,o.useState)(0),[k,N]=(0,o.useState)(!1),[A,S]=(0,o.useState)(null),[q,C]=(0,o.useState)({}),[I,E]=(0,o.useState)(9),F=(0,o.useCallback)(async()=>{try{r(!0);let e=await m.q.list({page:y,perPage:I,search:v,tipo:q.tipo,produtoIds:q.produtoIds,orderBy:q.orderBy});a(e.data),j(e.pagination.pages)}catch(e){d.oR.error("Erro ao carregar movimenta\xe7\xf5es")}finally{r(!1)}},[y,v,q,I]);(0,o.useEffect)(()=>{F()},[F]);let P=e=>{C(a=>({...a,...e})),f(1)},D=e=>{S(e),N(!0)},R=async e=>{if(window.confirm("Tem certeza que deseja excluir esta movimenta\xe7\xe3o?"))try{await m.q.delete(e),d.oR.success("Movimenta\xe7\xe3o exclu\xedda com sucesso"),F()}catch(e){d.oR.error("Erro ao excluir movimenta\xe7\xe3o")}},U=async e=>{try{A?(await m.q.update(A.id,e),d.oR.success("Movimenta\xe7\xe3o atualizada com sucesso")):(await m.q.create(e),d.oR.success("Movimenta\xe7\xe3o criada com sucesso")),N(!1),S(null),F()}catch(e){d.oR.error("Erro ao salvar movimenta\xe7\xe3o")}},z=[{value:"ENTRADA",label:"Entrada"},{value:"SAIDA",label:"Sa\xedda"}],H=[{value:"data_desc",label:"Data - Mais recente"},{value:"data_asc",label:"Data - Mais antiga"},{value:"quantidade_desc",label:"Quantidade - Maior"},{value:"quantidade_asc",label:"Quantidade - Menor"}];return(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Movimenta\xe7\xf5es de Estoque"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Gerencie todas as entradas e sa\xeddas de produtos no estoque"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(i.A,{variant:"primary",onClick:()=>{S(null),N(!0)},children:"Nova Movimenta\xe7\xe3o"})})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,s.jsx)(c.A,{type:"text",placeholder:"Buscar movimenta\xe7\xf5es...",value:v,onChange:e=>{b(e.target.value),f(1)},className:"w-full"})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(u.A,{placeholder:"Tipo",options:z,value:z.find(e=>e.value===q.tipo),onChange:e=>P({tipo:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40"}),(0,s.jsx)(u.A,{placeholder:"Ordenar por",options:H,value:H.find(e=>e.value===q.orderBy),onChange:e=>P({orderBy:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)(p.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,s.jsx)(c.A,{className:"max-w-24",defaultValue:I,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||9;E(a),f(1)}})]}),(0,s.jsx)(g.A,{currentPage:y,totalPages:w,onPageChange:f})]}),t?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,s.jsx)(x.A,{movimentacao:e,onEdit:()=>D(e),onDelete:()=>R(e.id)},e.id)):(0,s.jsx)("div",{className:"col-span-full text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma movimenta\xe7\xe3o encontrada"})})}),w>1&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,s.jsx)(g.A,{currentPage:y,totalPages:w,onPageChange:f})})}),(0,s.jsx)(n.a,{isOpen:k,onClose:()=>{N(!1),S(null)},className:"max-w-[800px] m-4",children:(0,s.jsxs)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:[(0,s.jsxs)("div",{className:"px-2 pr-14",children:[(0,s.jsx)("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:A?"Editar Movimenta\xe7\xe3o":"Novo Movimenta\xe7\xe3o"}),(0,s.jsx)("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7",children:A?"Atualize as informa\xe7\xf5es do movimenta\xe7\xe3o.":"Preencha os dados para criar um novo movimenta\xe7\xe3o."})]}),(0,s.jsx)(h.A,{movimentacao:A,onSubmit:U,onCancel:()=>{N(!1),S(null)}})]})})]})}[m,h]=v.then?(await v)():v,r()}catch(e){r(e)}})},65371:()=>{},77311:(e,a,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(a,{A:()=>p});var s=t(95155),o=t(12115),l=t(13568),d=t(31425),i=t(67281),n=t(37354),c=t(30353),u=t(13741),m=t(19824),x=t(61884),g=e([d,i]);[d,i]=g.then?(await g)():g;let h=[{value:"ENTRADA",label:"Entrada"},{value:"SAIDA",label:"Sa\xedda"}],p=e=>{let{movimentacao:a,onSubmit:t,onCancel:r}=e,[g,p]=(0,o.useState)({tipo:(null==a?void 0:a.tipo)||"ENTRADA",quantidade:(null==a?void 0:a.quantidade)||1,data:(null==a?void 0:a.data)||new Date,produtoId:(null==a?void 0:a.produtoId)||0,valorUnitario:(null==a?void 0:a.valorUnitario)||0,fornecedorId:(null==a?void 0:a.fornecedorId)||0,observacoes:(null==a?void 0:a.observacoes)||""}),[v,b]=(0,o.useState)((null==a?void 0:a.valorUnitario)?(0,x.vv)(a.valorUnitario).replace("R$","").trim():""),[y,f]=(0,o.useState)([]),[w,j]=(0,o.useState)([]),[k,N]=(0,o.useState)(!0),[A,S]=(0,o.useState)(!0),[q,C]=(0,o.useState)({}),[I,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{F(),P()},[]);let F=async()=>{try{N(!0);let e=await d.z.list({page:1,limit:100});f(e.data)}catch(e){l.oR.error("Erro ao carregar produtos")}finally{N(!1)}},P=async()=>{try{S(!0);let e=await i.P.list({page:1,perPage:100});j(e.data)}catch(e){l.oR.error("Erro ao carregar fornecedores")}finally{S(!1)}},D=()=>{let e={};return["produtoId","fornecedorId","tipo","quantidade","valorUnitario","data"].forEach(a=>{g[a]||(e[a]="".concat(a.charAt(0).toUpperCase()+a.slice(1)," \xe9 obrigat\xf3rio"))}),g.quantidade<1&&(e.quantidade="Quantidade deve ser maior que zero"),g.valorUnitario<0&&(e.valorUnitario="Valor unit\xe1rio n\xe3o pode ser negativo"),C(e),0===Object.keys(e).length},R=async e=>{if(e.preventDefault(),D()){E(!0);try{await t(g)}catch(e){l.oR.error("Erro ao salvar movimenta\xe7\xe3o")}finally{E(!1)}}};return(0,s.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Movimenta\xe7\xe3o"}),(0,s.jsx)(c.A,{id:"tipo",name:"tipo",value:h.find(e=>e.value===g.tipo),options:h,onChange:e=>p({...g,tipo:e.value}),placeholder:"Selecione o tipo",error:q.tipo,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"produtoId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Produto"}),(0,s.jsx)(c.A,{id:"produtoId",name:"produtoId",isLoading:k,value:y.filter(e=>e.id===g.produtoId).map(e=>({value:String(e.id),label:e.nome}))[0],options:y.map(e=>({value:String(e.id),label:e.nome+" (".concat(e.estoque," em estoque)")})),onChange:e=>{e&&p({...g,produtoId:parseInt(e.value,10)})},placeholder:"Selecione o produto",error:q.produtoId,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"quantidade",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantidade"}),(0,s.jsx)(n.A,{id:"quantidade",name:"quantidade",type:"number",min:"1",value:g.quantidade,onChange:e=>p({...g,quantidade:parseInt(e.target.value)||0}),error:q.quantidade})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"fornecedorId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fornecedor"}),(0,s.jsx)(c.A,{id:"fornecedorId",name:"fornecedorId",isLoading:A,value:w.filter(e=>e.id===g.fornecedorId).map(e=>({value:String(e.id),label:e.nome}))[0],options:w.map(e=>({value:String(e.id),label:e.nome})),onChange:e=>{e&&p({...g,fornecedorId:parseInt(e.value,10)})},placeholder:"Selecione o fornecedor",error:q.fornecedorId,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"valorUnitario",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor Unit\xe1rio"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute z-1 left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-300",children:"R$"}),(0,s.jsx)(n.A,{id:"valorUnitario",name:"valorUnitario",type:"text",value:v,className:"pl-9",onChange:e=>{let a=e.target.value.replace(/\D/g,"");if(""===a){b(""),p({...g,valorUnitario:0});return}let t=(0,x.F5)(a);b(t),p({...g,valorUnitario:(0,x.h4)(a)})},error:q.valorUnitario})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"data",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data"}),(0,s.jsx)(m.A,{id:"data",onChange:e=>{e[0]&&p({...g,data:e[0]})},defaultDate:new Date(g.data)}),q.data&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:q.data})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"observacoes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observa\xe7\xf5es"}),(0,s.jsx)("textarea",{id:"observacoes",name:"observacoes",rows:3,value:g.observacoes,onChange:e=>p({...g,observacoes:e.target.value}),className:"w-full rounded-lg border border-stroke bg-transparent px-4 py-3 outline-none focus:border-primary focus-visible:shadow-none dark:border-gray-600 dark:bg-gray-900 dark:focus:border-primary"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,s.jsx)(u.A,{variant:"secondary",onClick:r,disabled:I,children:"Cancelar"}),(0,s.jsx)(u.A,{variant:"primary",type:"submit",disabled:I,children:I?"Salvando...":a?"Atualizar":"Criar"})]})]})};r()}catch(e){r(e)}})}},e=>{var a=a=>e(e.s=a);e.O(0,[6474,8122,3568,9688,6980,4691,5460,8441,1684,7358],()=>a(16646)),_N_E=e.O()}]);