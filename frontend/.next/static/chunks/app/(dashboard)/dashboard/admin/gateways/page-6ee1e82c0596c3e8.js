(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9617],{24527:(e,a,s)=>{"use strict";s.a(e,async(e,l)=>{try{s.r(a),s.d(a,{default:()=>p});var t=s(95155),r=s(12115),c=s(13568),i=s(13741),n=s(58277),d=s(37354),o=s(40334),m=s(26349),g=s(21913),u=s(83377),x=s(12241),h=e([o,m]);function p(){let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[h,p]=(0,r.useState)(""),[w,y]=(0,r.useState)(1),[f,j]=(0,r.useState)(0),[v,N]=(0,r.useState)(!1),[b,k]=(0,r.useState)(null),[C,S]=(0,r.useState)({}),[E,A]=(0,r.useState)(9),P=(0,r.useCallback)(async()=>{try{l(!0);let e=await o.k.list({page:w,limit:E,search:h,empresaId:null});a(e.data),j(e.pagination.pages)}catch(e){console.error("Erro ao carregar gateways:",e),c.oR.error("Erro ao carregar gateways")}finally{l(!1)}},[w,h,E]);(0,r.useEffect)(()=>{P()},[P]);let R=e=>{k(e),N(!0)},_=async e=>{if(window.confirm("Tem certeza que deseja excluir este gateway?"))try{await o.k.delete(e),c.oR.success("Gateway exclu\xeddo com sucesso"),P()}catch(e){c.oR.error("Erro ao excluir gateway")}},G=async e=>{try{e.empresaId=null,console.log("data-handleSave-gateway-admin:",e),b?(await o.k.update(b.id,e),c.oR.success("Gateway atualizado com sucesso")):(await o.k.create(e),c.oR.success("Gateway criado com sucesso")),N(!1),k(null),P()}catch(e){c.oR.error("Erro ao salvar gateway")}};return(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Gateways de Pagamento"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Configure os gateways globais para cobran\xe7as de planos"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(i.A,{variant:"primary",onClick:()=>{k(null),N(!0)},children:"Novo Gateway"})})]}),(0,t.jsx)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:(0,t.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,t.jsx)(d.A,{type:"text",placeholder:"Buscar gateways...",value:h,onChange:e=>{p(e.target.value),y(1)},className:"w-full","aria-label":"Buscar gateways"})})})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(x.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,t.jsx)(d.A,{className:"max-w-24",defaultValue:E,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||9;A(a),y(1)},"aria-label":"Quantidade por p\xe1gina"})]}),(0,t.jsx)(g.A,{currentPage:w,totalPages:f,onPageChange:y})]}),s?(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,t.jsx)(m.A,{gateway:e,onEdit:()=>R(e),onDelete:()=>_(e.id)},e.id)):(0,t.jsx)("div",{className:"col-span-full text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum gateway encontrado"})})}),f>1&&(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,t.jsx)(g.A,{currentPage:w,totalPages:f,onPageChange:y})})}),(0,t.jsx)(n.a,{isOpen:v,onClose:()=>{N(!1),k(null)},className:"max-w-[800px] m-4",children:(0,t.jsx)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:(0,t.jsx)(u.A,{gateway:b,onSubmit:G,onCancel:()=>{N(!1),k(null)}})})})]})}[o,m]=h.then?(await h)():h,l()}catch(e){l(e)}})},77369:(e,a,s)=>{Promise.resolve().then(s.bind(s,24527))}},e=>{var a=a=>e(e.s=a);e.O(0,[8122,3568,9688,6980,4691,4349,1801,8441,1684,7358],()=>a(77369)),_N_E=e.O()}]);