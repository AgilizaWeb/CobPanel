(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5941],{7179:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>g});var o=r(95155),s=r(12115),i=r(35695),l=r(66695),n=r(37354),d=r(60852),c=r(30353),u=r(86061),m=r(13568),x=e([u]);function g(){let e=(0,i.useRouter)(),[a,r]=(0,s.useState)(!1),[t,x]=(0,s.useState)(!0),[g,p]=(0,s.useState)(!0),[b,h]=(0,s.useState)([]),[f,v]=(0,s.useState)([]),[y,k]=(0,s.useState)({titulo:"",mensagem:"",tipo:"MANUAL",empresaId:void 0,userId:void 0,actionLink:"",actionLabel:""});(0,s.useEffect)(()=>{(async()=>{try{x(!0);let e=await u.$p.empresa.list({perPage:1e3});h(e.data||[])}catch(e){console.error("Erro ao carregar empresas:",e),m.Ay.error("Erro ao carregar empresas")}finally{x(!1)}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{p(!0);let e=await u.$p.users.list({limit:1e3});v(e.data||[])}catch(e){console.error("Erro ao carregar usu\xe1rios:",e),m.Ay.error("Erro ao carregar usu\xe1rios")}finally{p(!1)}})()},[]);let j=(0,s.useMemo)(()=>b.map(e=>({value:String(e.id),label:e.nome})),[b]),N=(0,s.useMemo)(()=>{let e=f;return y.empresaId&&(e=f.filter(e=>e.empresaId===y.empresaId)),e.map(e=>({value:String(e.id),label:"".concat(e.nome," (").concat(e.email,") - ").concat(e.role)}))},[f,y.empresaId]),A=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobran\xe7a Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"}],C=e=>{let{name:a,value:r}=e.target;k(e=>({...e,[a]:r}))},S=e=>a=>{k(r=>{let t={...r};return"empresaId"===e?(t.empresaId=a?Number(a.value):void 0,r.empresaId!==t.empresaId&&(t.userId=void 0)):"userId"===e?t.userId=a?Number(a.value):void 0:"tipo"===e&&(t.tipo=null==a?void 0:a.value),t})},I=async a=>{var t,o,s,i;if(a.preventDefault(),!y.titulo.trim()){m.Ay.error("T\xedtulo \xe9 obrigat\xf3rio");return}if(!y.mensagem.trim()){m.Ay.error("Mensagem \xe9 obrigat\xf3ria");return}if(!y.empresaId&&!y.userId){m.Ay.error("Selecione uma empresa ou um usu\xe1rio");return}try{r(!0);let a={titulo:y.titulo.trim(),mensagem:y.mensagem.trim(),tipo:y.tipo,empresaId:y.empresaId||void 0,userId:y.userId||void 0,actionLink:(null===(t=y.actionLink)||void 0===t?void 0:t.trim())||void 0,actionLabel:(null===(o=y.actionLabel)||void 0===o?void 0:o.trim())||void 0};await u.$p.notificacao.create(a),m.Ay.success("Notifica\xe7\xe3o criada com sucesso!"),e.push("/dashboard/admin")}catch(e){console.error("Erro ao criar notifica\xe7\xe3o:",e),m.Ay.error((null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.error)||"Erro ao criar notifica\xe7\xe3o")}finally{r(!1)}};return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Criar Notifica\xe7\xe3o"})}),(0,o.jsx)(l.Z,{className:"p-6",children:(0,o.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["T\xedtulo ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)(n.A,{id:"titulo",name:"titulo",type:"text",value:y.titulo,onChange:C,placeholder:"Digite o t\xedtulo da notifica\xe7\xe3o",required:!0,"aria-label":"T\xedtulo da notifica\xe7\xe3o"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{htmlFor:"mensagem",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mensagem ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("textarea",{id:"mensagem",name:"mensagem",value:y.mensagem,onChange:C,placeholder:"Digite a mensagem da notifica\xe7\xe3o",required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white","aria-label":"Mensagem da notifica\xe7\xe3o"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Tipo de Notifica\xe7\xe3o ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)(c.A,{id:"tipo",options:A,value:A.find(e=>e.value===y.tipo)||null,onChange:S("tipo"),placeholder:"Selecione o tipo",isClearable:!1,"aria-label":"Tipo de notifica\xe7\xe3o"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{htmlFor:"empresaId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Empresa",(0,o.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Se selecionada, notificar\xe1 todos os usu\xe1rios ADMIN, GESTOR e VENDEDOR da empresa)"})]}),(0,o.jsx)(c.A,{id:"empresaId",options:j,value:y.empresaId&&j.find(e=>e.value===String(y.empresaId))||null,onChange:S("empresaId"),placeholder:t?"Carregando empresas...":"Selecione uma empresa (opcional)",isClearable:!0,isSearchable:!0,isLoading:t,"aria-label":"Selecionar empresa"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Usu\xe1rio Espec\xedfico",(0,o.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Se selecionado, notificar\xe1 apenas este usu\xe1rio. Se empresa tamb\xe9m selecionada, filtra usu\xe1rios da empresa)"})]}),(0,o.jsx)(c.A,{id:"userId",options:N,value:y.userId&&N.find(e=>e.value===String(y.userId))||null,onChange:S("userId"),placeholder:g?"Carregando usu\xe1rios...":"Selecione um usu\xe1rio (opcional)",isClearable:!0,isSearchable:!0,isLoading:g,"aria-label":"Selecionar usu\xe1rio"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"actionLink",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Link de A\xe7\xe3o (opcional)"}),(0,o.jsx)(n.A,{id:"actionLink",name:"actionLink",type:"url",value:y.actionLink||"",onChange:C,placeholder:"Ex: /dashboard/empresa/planos/atual","aria-label":"Link de a\xe7\xe3o da notifica\xe7\xe3o"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"URL para onde o usu\xe1rio ser\xe1 redirecionado ao clicar na notifica\xe7\xe3o"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"actionLabel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"R\xf3tulo do Bot\xe3o de A\xe7\xe3o (opcional)"}),(0,o.jsx)(n.A,{id:"actionLabel",name:"actionLabel",type:"text",value:y.actionLabel||"",onChange:C,placeholder:"Ex: Ver Plano Atual","aria-label":"R\xf3tulo do bot\xe3o de a\xe7\xe3o"}),(0,o.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Texto que aparecer\xe1 no bot\xe3o de a\xe7\xe3o da notifica\xe7\xe3o"})]}),(0,o.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,o.jsx)(d.A,{type:"submit",variant:"primary",disabled:a,children:a?"Criando...":"Criar Notifica\xe7\xe3o"}),(0,o.jsx)(d.A,{type:"button",variant:"outline",onClick:()=>e.back(),disabled:a,children:"Cancelar"})]})]})})]})}u=(x.then?(await x)():x)[0],t()}catch(e){t(e)}})},30353:(e,a,r)=>{"use strict";r.d(a,{A:()=>i});var t=r(95155);r(12115);var o=r(86980),s=r(37049);function i(e){let{error:a,className:r="",...i}=e,{isDark:l}=(0,s.D)();return(0,t.jsxs)("div",{className:r,children:[(0,t.jsx)(o.Ay,{...i,styles:{control:(e,r)=>({...e,backgroundColor:l?"#1F2937":"#fff",borderColor:a?"#EF4444":r.isFocused?"#3B82F6":l?"#374151":"#D1D5DB",borderRadius:"0.375rem",boxShadow:r.isFocused?"0 0 0 2px rgba(59, 130, 246, 0.5)":"none","&:hover":{borderColor:r.isFocused?"#3B82F6":l?"#4B5563":"#9CA3AF"},minHeight:"2.5rem"}),menu:e=>({...e,backgroundColor:l?"#1F2937":"#fff",borderColor:l?"#374151":"#D1D5DB",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}),option:(e,a)=>({...e,backgroundColor:a.isSelected?l?"#3B82F6":"#2563EB":a.isFocused?l?"#374151":"#F3F4F6":"transparent",color:a.isSelected?"#fff":l?"#D1D5DB":"#111827",cursor:"pointer","&:active":{backgroundColor:l?"#2563EB":"#3B82F6"}}),singleValue:e=>({...e,color:l?"#D1D5DB":"#111827"}),input:e=>({...e,color:l?"#D1D5DB":"#111827"}),placeholder:e=>({...e,color:l?"#6B7280":"#9CA3AF"}),indicatorSeparator:e=>({...e,backgroundColor:l?"#374151":"#D1D5DB"}),dropdownIndicator:e=>({...e,color:l?"#6B7280":"#9CA3AF","&:hover":{color:l?"#D1D5DB":"#4B5563"}}),clearIndicator:e=>({...e,color:l?"#6B7280":"#9CA3AF","&:hover":{color:l?"#D1D5DB":"#4B5563"}})},classNamePrefix:"react-select",className:a?"react-select-error":""}),a&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:a})]})}},35695:(e,a,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},37049:(e,a,r)=>{"use strict";r.d(a,{D:()=>l,ThemeProvider:()=>i});var t=r(95155),o=r(12115);let s=(0,o.createContext)(void 0),i=e=>{let{children:a}=e,[r,i]=(0,o.useState)("light"),[l,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{i(localStorage.getItem("theme")||"light"),n(!0)},[]),(0,o.useEffect)(()=>{l&&(localStorage.setItem("theme",r),"dark"===r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},[r,l]),(0,t.jsx)(s.Provider,{value:{theme:r,isDark:"dark"===r,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}},children:a})},l=()=>{let e=(0,o.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},37354:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(95155);r(12115);let o=e=>{let{type:a="text",id:r,name:o,placeholder:s,defaultValue:i,onChange:l,min:n,max:d,step:c,disabled:u=!1,success:m=!1,error:x=!1,hint:g,value:p,required:b,className:h="",...f}=e,v="h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ".concat(h);if("date"!==a&&(v+=" appearance-none"),u)v+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(x){if(v+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof x)return(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...f,type:a,id:r,name:o,placeholder:s,defaultValue:i,onChange:l,className:v,min:n,max:d,step:c,disabled:u,value:p,required:b}),(0,t.jsx)("p",{className:"mt-1 text-xs text-error-500",children:x})]})}else m?v+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":v+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{...f,type:a,id:r,name:o,placeholder:s,value:p,defaultValue:i,onChange:l,min:n,max:d,required:b,step:c,disabled:u,className:v}),g&&(0,t.jsx)("p",{className:"mt-1.5 text-xs ".concat(x?"text-error-500":m?"text-success-500":"text-gray-500"),children:g})]})}},60852:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(95155);r(12115);let o=e=>{let{children:a,size:r="md",variant:o="primary",startIcon:s,endIcon:i,onClick:l,className:n="",disabled:d=!1,type:c="button"}=e;return(0,t.jsxs)("button",{className:"inline-flex items-center justify-center font-medium gap-2 rounded-lg transition ".concat(n," ").concat({sm:"px-4 py-3 text-sm",md:"px-5 py-3.5 text-sm"}[r]," ").concat({primary:"bg-brand-500 text-white shadow-theme-xs hover:bg-brand-600 disabled:bg-brand-300",outline:"bg-white text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03] dark:hover:text-gray-300"}[o]," ").concat(d?"cursor-not-allowed opacity-50":""),onClick:l,disabled:d,type:c,children:[s&&(0,t.jsx)("span",{className:"flex items-center",children:s}),a,i&&(0,t.jsx)("span",{className:"flex items-center",children:i})]})}},66695:(e,a,r)=>{"use strict";r.d(a,{Z:()=>o});var t=r(95155);r(12115);let o=e=>{let{children:a,className:r=""}=e;return(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 ".concat(r),children:a})}},96004:(e,a,r)=>{Promise.resolve().then(r.bind(r,7179))}},e=>{var a=a=>e(e.s=a);e.O(0,[8122,3568,6980,4349,8441,1684,7358],()=>a(96004)),_N_E=e.O()}]);