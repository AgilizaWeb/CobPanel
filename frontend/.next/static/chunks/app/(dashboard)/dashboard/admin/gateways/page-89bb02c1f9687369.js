(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9617],{51254:(e,a,s)=>{"use strict";s.a(e,async(e,l)=>{try{s.r(a),s.d(a,{default:()=>p});var t=s(95155),r=s(12115),c=s(22663),i=s(31166),n=s(50412),o=s(40989),d=s(55355),m=s(63988),g=s(73424),u=s(70796),x=s(30304),h=e([d,m]);function p(){let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[h,p]=(0,r.useState)(""),[w,y]=(0,r.useState)(1),[f,j]=(0,r.useState)(0),[N,v]=(0,r.useState)(!1),[b,k]=(0,r.useState)(null),[C,S]=(0,r.useState)({}),[E,A]=(0,r.useState)(9),P=(0,r.useCallback)(async()=>{try{l(!0);let e=await d.k.list({page:w,limit:E,search:h,empresaId:null});a(e.data),j(e.pagination.pages)}catch(e){console.error("Erro ao carregar gateways:",e),c.oR.error("Erro ao carregar gateways")}finally{l(!1)}},[w,h,E]);(0,r.useEffect)(()=>{P()},[P]);let R=async e=>{if(window.confirm("Tem certeza que deseja excluir este gateway?"))try{await d.k.delete(e),c.oR.success("Gateway exclu\xeddo com sucesso"),P()}catch(e){c.oR.error("Erro ao excluir gateway")}},_=async e=>{try{e.empresaId=null,console.log("data-handleSave-gateway-admin:",e),b?(await d.k.update(b.id,e),c.oR.success("Gateway atualizado com sucesso")):(await d.k.create(e),c.oR.success("Gateway criado com sucesso")),v(!1),k(null),P()}catch(e){c.oR.error("Erro ao salvar gateway")}};return(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Gateways de Pagamento"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Configure os gateways globais para cobran\xe7as de planos"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(i.A,{variant:"primary",onClick:()=>{k(null),v(!0)},children:"Novo Gateway"})})]}),(0,t.jsx)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:(0,t.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,t.jsx)(o.A,{type:"text",placeholder:"Buscar gateways...",value:h,onChange:e=>{p(e.target.value),y(1)},className:"w-full","aria-label":"Buscar gateways"})})})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(x.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,t.jsx)(o.A,{className:"max-w-24",defaultValue:E,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||9;A(a),y(1)},"aria-label":"Quantidade por p\xe1gina"})]}),(0,t.jsx)(g.A,{currentPage:w,totalPages:f,onPageChange:y})]}),s?(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,t.jsx)(m.A,{gateway:e,onEdit:()=>{k(e),v(!0)},onDelete:()=>R(e.id)},e.id)):(0,t.jsx)("div",{className:"col-span-full text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum gateway encontrado"})})}),f>1&&(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,t.jsx)(g.A,{currentPage:w,totalPages:f,onPageChange:y})})}),(0,t.jsx)(n.a,{isOpen:N,onClose:()=>{v(!1),k(null)},className:"max-w-[800px] m-4",children:(0,t.jsx)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:(0,t.jsx)(u.A,{gateway:b,onSubmit:_,onCancel:()=>{v(!1),k(null)}})})})]})}[d,m]=h.then?(await h)():h,l()}catch(e){l(e)}})},77369:(e,a,s)=>{Promise.resolve().then(s.bind(s,51254))}},e=>{e.O(0,[3598,2663,5889,7750,4691,1899,9465,8441,1255,7358],()=>e(e.s=77369)),_N_E=e.O()}]);