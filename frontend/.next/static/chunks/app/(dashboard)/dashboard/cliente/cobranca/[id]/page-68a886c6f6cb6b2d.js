(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7742],{4101:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(95155);t(12115);var r=t(94325),d=t(99145);let l=e=>{let{vendasFinais:a,valorTotal:t}=e,l=a.length,c=a.filter(e=>"APPROVED"===e.status).length,i=a.filter(e=>"PENDING"===e.status).length,x=a.filter(e=>"CANCELLED"===e.status).length,n=a.filter(e=>"APPROVED"===e.status).reduce((e,a)=>e+parseFloat(a.valor.toString()),0),o=a.filter(e=>"PENDING"===e.status).reduce((e,a)=>e+parseFloat(a.valor.toString()),0),g=a.filter(e=>"CANCELLED"===e.status).reduce((e,a)=>e+parseFloat(a.valor.toString()),0);return(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resumo das Faturas"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Parcelas"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor por Parcela"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,r.vv)(l>0?t/l:0)})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.C1,{className:"w-6 h-6 text-green-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Parcelas Pagas"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-green-800 dark:text-green-300",children:c}),(0,s.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:(0,r.vv)(n)})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.b1,{className:"w-6 h-6 text-yellow-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"Parcelas Pendentes"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-yellow-800 dark:text-yellow-300",children:i}),(0,s.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:(0,r.vv)(o)})]})]}),x>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d._0,{className:"w-6 h-6 text-red-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Parcelas Canceladas"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-lg font-bold text-red-800 dark:text-red-300",children:x}),(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:(0,r.vv)(g)})]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Total"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(0,r.vv)(t)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progresso"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:l>0?"".concat(Math.round(c/l*100),"%"):"0%"}})}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[l>0?Math.round(c/l*100):0,"% conclu\xeddo"]})]})]})]})})]})]})}},48291:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>j});var r=t(95155),d=t(12115),l=t(90854),c=t(20063),i=t(99145),x=t(94325),n=t(7735),o=t(10579),g=t(4101),m=t(19445),h=t(2264),y=t(22663),N=e([l,n,o]);function j(){var e,a,t,s;let N,{user:j}=(0,l.A)(),b=(0,c.useRouter)(),u=(0,c.useParams)(),[p,v]=(0,d.useState)(null),[k,f]=(0,d.useState)([]),[w,E]=(0,d.useState)(!0),[P,C]=(0,d.useState)(!1),[A,D]=(0,d.useState)(""),[S,V]=(0,d.useState)(""),R=(0,d.useCallback)(async()=>{if(u.id)try{E(!0);let e=parseInt(u.id),a=await n.K.getById(e);v(a.data);let t=(await n.O.list({vendaId:e,limit:100})).data;f(t),console.log("Vendas finais:",t)}catch(e){console.error("Erro ao carregar venda:",e),y.Ay.error("Erro ao carregar dados da venda")}finally{E(!1)}},[u.id]);(0,d.useEffect)(()=>{R()},[R]);let I=(e,a)=>{D(e),V(a||""),C(!0)},L=async()=>{await R()},O=e=>new Date(e).toLocaleDateString("pt-BR");return w?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):p?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>b.back(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Voltar",children:(0,r.jsx)(i.YJ,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Cobran\xe7a #",p.id]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Detalhes da cobran\xe7a"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.M,{}),(e=>{switch(e){case"PAGO":case"APPROVED":return(0,r.jsx)(i.C1,{className:"w-5 h-5 text-green-500"});case"PENDENTE":case"PENDING":return(0,r.jsx)(i.b1,{className:"w-5 h-5 text-yellow-500"});case"CANCELLED":return(0,r.jsx)(i._0,{className:"w-5 h-5 text-red-500"});default:return(0,r.jsx)(i.b1,{className:"w-5 h-5 text-gray-500"})}})(p.status),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"PAGO":case"APPROVED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"PENDENTE":case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"CANCELLED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}})(p.status)),children:p.status})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informa\xe7\xf5es da Cobran\xe7a"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor:"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,x.vv)(p.valor)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Total:"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,x.vv)(p.valorTotal)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data de In\xedcio:"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:O(p.inicio)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data de Fim:"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:O(p.fim)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recorr\xeancia:"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:p.quantidadeRecorrencia>0?"".concat(p.quantidadeRecorrencia+1," parcelas"):"\xc0 vista"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Criada em:"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(N=p.createdAt,new Date(N).toLocaleString("pt-BR"))})]})]})]}),p.produtos&&p.produtos.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Produtos"}),(0,r.jsx)("div",{className:"space-y-3",children:p.produtos.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.produto.nome}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Quantidade: ",e.quantidade]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(0,x.vv)(e.valorTotal)}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,x.vv)(e.valorUnitario)," cada"]})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Faturas (",k.length,")"]}),0===k.length?(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4",children:"Nenhuma fatura encontrada para esta cobran\xe7a."}):(0,r.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,r.jsx)(o.A,{vendaFinal:e,onShowQRCode:I,onGenerateSuccess:L},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(g.A,{vendasFinais:k,valorTotal:p.valorTotal}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Vendedor"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(null==(e=p.vendedor)?void 0:e.nome)||"N/A"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",(null==(a=p.vendedor)?void 0:a.id)||"N/A"]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Empresa"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(null==(t=p.empresa)?void 0:t.nome)||"N/A"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",(null==(s=p.empresa)?void 0:s.id)||"N/A"]})]})]})]})]}),(0,r.jsx)(m.A,{isOpen:P,onClose:()=>C(!1),pixCode:A,qrCode:S||""})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(i._0,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Venda n\xe3o encontrada"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"A venda solicitada n\xe3o foi encontrada ou voc\xea n\xe3o tem permiss\xe3o para visualiz\xe1-la."}),(0,r.jsx)("button",{onClick:()=>b.push("/dashboard/cliente/cobrancas"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Voltar para Cobran\xe7as"})]})}[l,n,o]=N.then?(await N)():N,s()}catch(e){s(e)}})},92273:(e,a,t)=>{Promise.resolve().then(t.bind(t,48291))}},e=>{e.O(0,[3598,2663,1356,4691,1899,5487,8441,1255,7358],()=>e(e.s=92273)),_N_E=e.O()}]);