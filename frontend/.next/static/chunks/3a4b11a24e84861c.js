(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89504,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({type:e="text",id:r,name:t,placeholder:s,defaultValue:i,onChange:o,min:l,max:d,step:n,disabled:c=!1,success:u=!1,error:m=!1,hint:x,value:p,required:b,className:g="",...f})=>{let h=`h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ${g}`;if("date"!==e&&(h+=" appearance-none"),c)h+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(m){if(h+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof m)return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{...f,type:e,id:r,name:t,placeholder:s,defaultValue:i,onChange:o,className:h,min:l,max:d,step:n,disabled:c,value:p,required:b}),(0,a.jsx)("p",{className:"mt-1 text-xs text-error-500",children:m})]})}else u?h+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":h+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...f,type:e,id:r,name:t,placeholder:s,value:p,defaultValue:i,onChange:o,min:l,max:d,required:b,step:n,disabled:c,className:h}),x&&(0,a.jsx)("p",{className:`mt-1.5 text-xs ${m?"text-error-500":u?"text-success-500":"text-gray-500"}`,children:x})]})}])},15288,e=>{"use strict";var a=e.i(43476);let r=({children:e,className:r=""})=>(0,a.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 ${r}`,children:e});e.s(["Card",()=>r])},80376,e=>e.a(async(a,r)=>{try{var t=e.i(43476),s=e.i(71645),i=e.i(18566),o=e.i(15288),l=e.i(89504),d=e.i(90873),n=e.i(67073),c=e.i(76318),u=e.i(5766),m=a([c]);function x(){let e=(0,i.useRouter)(),[a,r]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!0),[g,f]=(0,s.useState)([]),[h,y]=(0,s.useState)([]),[v,j]=(0,s.useState)({titulo:"",mensagem:"",tipo:"MANUAL",empresaId:void 0,userId:void 0,actionLink:"",actionLabel:""});(0,s.useEffect)(()=>{(async()=>{try{x(!0);let e=await c.services.empresa.list({perPage:1e3});f(e.data||[])}catch(e){console.error("Erro ao carregar empresas:",e),u.default.error("Erro ao carregar empresas")}finally{x(!1)}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{b(!0);let e=await c.services.users.list({limit:1e3});y(e.data||[])}catch(e){console.error("Erro ao carregar usuários:",e),u.default.error("Erro ao carregar usuários")}finally{b(!1)}})()},[]);let k=(0,s.useMemo)(()=>g.map(e=>({value:String(e.id),label:e.nome})),[g]),N=(0,s.useMemo)(()=>{let e=h;return v.empresaId&&(e=h.filter(e=>e.empresaId===v.empresaId)),e.map(e=>({value:String(e.id),label:`${e.nome} (${e.email}) - ${e.role}`}))},[h,v.empresaId]),I=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobrança Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"}],C=e=>{let{name:a,value:r}=e.target;j(e=>({...e,[a]:r}))},A=e=>a=>{j(r=>{let t={...r};return"empresaId"===e?(t.empresaId=a?Number(a.value):void 0,r.empresaId!==t.empresaId&&(t.userId=void 0)):"userId"===e?t.userId=a?Number(a.value):void 0:"tipo"===e&&(t.tipo=a?.value),t})},S=async a=>{if(a.preventDefault(),!v.titulo.trim())return void u.default.error("Título é obrigatório");if(!v.mensagem.trim())return void u.default.error("Mensagem é obrigatória");if(!v.empresaId&&!v.userId)return void u.default.error("Selecione uma empresa ou um usuário");try{r(!0);let a={titulo:v.titulo.trim(),mensagem:v.mensagem.trim(),tipo:v.tipo,empresaId:v.empresaId||void 0,userId:v.userId||void 0,actionLink:v.actionLink?.trim()||void 0,actionLabel:v.actionLabel?.trim()||void 0};await c.services.notificacao.create(a),u.default.success("Notificação criada com sucesso!"),e.push("/dashboard/admin")}catch(e){console.error("Erro ao criar notificação:",e),u.default.error(e?.response?.data?.error||"Erro ao criar notificação")}finally{r(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Criar Notificação"})}),(0,t.jsx)(o.Card,{className:"p-6",children:(0,t.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Título ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(l.default,{id:"titulo",name:"titulo",type:"text",value:v.titulo,onChange:C,placeholder:"Digite o título da notificação",required:!0,"aria-label":"Título da notificação"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"mensagem",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mensagem ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{id:"mensagem",name:"mensagem",value:v.mensagem,onChange:C,placeholder:"Digite a mensagem da notificação",required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white","aria-label":"Mensagem da notificação"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Tipo de Notificação ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(n.default,{id:"tipo",options:I,value:I.find(e=>e.value===v.tipo)||null,onChange:A("tipo"),placeholder:"Selecione o tipo",isClearable:!1,"aria-label":"Tipo de notificação"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"empresaId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Empresa",(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Se selecionada, notificará todos os usuários ADMIN, GESTOR e VENDEDOR da empresa)"})]}),(0,t.jsx)(n.default,{id:"empresaId",options:k,value:v.empresaId&&k.find(e=>e.value===String(v.empresaId))||null,onChange:A("empresaId"),placeholder:m?"Carregando empresas...":"Selecione uma empresa (opcional)",isClearable:!0,isSearchable:!0,isLoading:m,"aria-label":"Selecionar empresa"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Usuário Específico",(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Se selecionado, notificará apenas este usuário. Se empresa também selecionada, filtra usuários da empresa)"})]}),(0,t.jsx)(n.default,{id:"userId",options:N,value:v.userId&&N.find(e=>e.value===String(v.userId))||null,onChange:A("userId"),placeholder:p?"Carregando usuários...":"Selecione um usuário (opcional)",isClearable:!0,isSearchable:!0,isLoading:p,"aria-label":"Selecionar usuário"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"actionLink",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Link de Ação (opcional)"}),(0,t.jsx)(l.default,{id:"actionLink",name:"actionLink",type:"url",value:v.actionLink||"",onChange:C,placeholder:"Ex: /dashboard/empresa/planos/atual","aria-label":"Link de ação da notificação"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"URL para onde o usuário será redirecionado ao clicar na notificação"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"actionLabel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rótulo do Botão de Ação (opcional)"}),(0,t.jsx)(l.default,{id:"actionLabel",name:"actionLabel",type:"text",value:v.actionLabel||"",onChange:C,placeholder:"Ex: Ver Plano Atual","aria-label":"Rótulo do botão de ação"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Texto que aparecerá no botão de ação da notificação"})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,t.jsx)(d.default,{type:"submit",variant:"primary",disabled:a,children:a?"Criando...":"Criar Notificação"}),(0,t.jsx)(d.default,{type:"button",variant:"outline",onClick:()=>e.back(),disabled:a,children:"Cancelar"})]})]})})]})}[c]=m.then?(await m)():m,e.s(["default",()=>x]),r()}catch(e){r(e)}},!1)]);