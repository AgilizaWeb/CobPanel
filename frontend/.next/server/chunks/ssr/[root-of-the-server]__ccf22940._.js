module.exports=[50322,a=>a.a(async(b,c)=>{try{var d=a.i(79029),e=b([d]);[d]=e.then?(await e)():e,a.s(["authService",0,{login:async a=>(await d.api.post("/auth/login",a)).data,loginByToken:async a=>(await d.api.post(`/auth/login/${a}`)).data,register:async a=>(await d.api.post("/auth/register",a)).data,getMe:async()=>(await d.api.get("/auth/me")).data,changePassword:async a=>(await d.api.post("/auth/change-password",a)).data,resetPassword:async a=>(await d.api.post("/auth/reset-password",a)).data,validateToken:async a=>(await d.api.post("/auth/validate-token",{token:a})).data}]),c()}catch(a){c(a)}},!1),56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},56697,a=>{"use strict";var b=a.i(72131);let c=null,d=null,e=0,f={appName:"CobPanel",usarLandingPage:!1,apiEnv:"production",backendUrl:"http://localhost:5555"};async function g(a=!1){let b=Date.now();return c&&!a&&b-e<3e5?c:d&&!a?d:d=fetch("/api/config",{cache:a?"no-cache":"default",headers:{"Content-Type":"application/json"}}).then(async a=>{if(!a.ok)throw Error(`HTTP ${a.status}: ${a.statusText}`);return a.json()}).then(a=>{let d={appName:a.appName||f.appName,usarLandingPage:!!a.usarLandingPage,apiEnv:a.apiEnv||f.apiEnv,backendUrl:a.backendUrl||f.backendUrl};return c=d,e=b,d}).catch(d=>c&&!a?c:(c=f,e=b,f)).finally(()=>{d=null})}function h(){return c}async function i(a=!1){return g(a)}function j(){let{config:a}=function(){let[a,d]=(0,b.useState)(c),[e,f]=(0,b.useState)(!c),[h,i]=(0,b.useState)(null),j=(0,b.useCallback)(async()=>{try{f(!0),i(null);let a=await g(!0);d(a)}catch(a){i(a instanceof Error?a.message:"Erro desconhecido")}finally{f(!1)}},[]);return(0,b.useEffect)(()=>{(!c||!c.backendUrl||c.backendUrl.includes("localhost"))&&g().then(d).catch(a=>{i(a instanceof Error?a.message:"Erro ao carregar configuração")}).finally(()=>f(!1))},[]),{config:a,loading:e,error:h,refreshConfig:j,isConfigured:!!c}}();return a?.backendUrl||f.backendUrl}a.s(["getAppConfig",()=>h,"loadAppConfig",()=>i,"useBackendUrl",()=>j])},1818,a=>{"use strict";function b(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}var c=function a(c,d){function e(a,e,f){if("u">typeof document){"number"==typeof(f=b({},d,f)).expires&&(f.expires=new Date(Date.now()+864e5*f.expires)),f.expires&&(f.expires=f.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var g="";for(var h in f)f[h]&&(g+="; "+h,!0!==f[h]&&(g+="="+f[h].split(";")[0]));return document.cookie=a+"="+c.write(e,a)+g}}return Object.create({set:e,get:function(a){if("u">typeof document&&(!arguments.length||a)){for(var b=document.cookie?document.cookie.split("; "):[],d={},e=0;e<b.length;e++){var f=b[e].split("="),g=f.slice(1).join("=");try{var h=decodeURIComponent(f[0]);if(d[h]=c.read(g,h),a===h)break}catch(a){}}return a?d[a]:d}},remove:function(a,c){e(a,"",b({},c,{expires:-1}))},withAttributes:function(c){return a(this.converter,b({},this.attributes,c))},withConverter:function(c){return a(b({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(d)},converter:{value:Object.freeze(c)}})}({read:function(a){return'"'===a[0]&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),d=a.i(56697);let e=(a,b,e={})=>{let f=(0,d.getAppConfig)(),g=!!f&&"production"===f.apiEnv;c.set(a,b,{...e,secure:g,sameSite:"lax"})},f=a=>c.get(a),g=a=>{c.remove(a)},h={get:()=>f("token"),set:(a,b={})=>e("token",a,b),remove:()=>g("token")},i={get:()=>f("user"),set:(a,b={})=>e("user",a,b),remove:()=>g("user")};a.s(["cookies",0,{user:i,token:h,auth:{clear:()=>{i.remove(),h.remove()}}},"getCookie",0,f,"removeCookie",0,g,"setCookie",0,e],1818)},41997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},67518,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(50944),g=a.i(50322),h=a.i(1818),i=a.i(6704),j=b([g]);function k(){let{token:a}=(0,f.useParams)(),b=(0,f.useRouter)(),[c,j]=(0,e.useState)(!0),[k,l]=(0,e.useState)(null);return((0,e.useEffect)(()=>{(async()=>{if(!a){l("Token não fornecido"),j(!1);return}try{j(!0),l(null);let b=await g.authService.loginByToken(a);if(b.message&&b.data){let{user:a,token:c}=b.data;i.default.success("Login realizado com sucesso!"),h.cookies.token.set(c),h.cookies.user.set(JSON.stringify(a)),await new Promise(a=>setTimeout(a,1e3)),a.role,setTimeout(()=>{},1500)}else throw Error("Resposta inválida do servidor")}catch(c){console.error("Erro no login por token:",c);let a=c.response?.data?.error||c.message||"Erro ao fazer login com o token";l(a),i.default.error(a),setTimeout(()=>{b.push("/auth/login")},3e3)}finally{j(!1)}})()},[a,b]),c)?(0,d.jsx)("div",{className:"flex flex-col flex-1 lg:w-1/2 w-full",children:(0,d.jsx)("div",{className:"w-full max-w-md sm:pt-10 mx-auto mb-5",children:(0,d.jsx)("div",{className:"flex flex-col justify-center flex-1 w-full max-w-md mx-auto",children:(0,d.jsxs)("div",{className:"mb-5 sm:mb-8",children:[(0,d.jsx)("h1",{className:"mb-2 font-semibold text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md",children:"Fazendo login..."}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aguarde enquanto verificamos seu token de acesso."})]})})})}):k?(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,d.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"mx-auto h-12 w-12 text-red-500",children:(0,d.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white",children:"Erro no Login"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:k}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)("button",{onClick:()=>b.push("/auth/login"),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ir para Login"})}),(0,d.jsx)("p",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:"Você será redirecionado automaticamente em alguns segundos..."})]})})}):null}[g]=j.then?(await j)():j,a.s(["default",()=>k]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__ccf22940._.js.map