module.exports=[43617,a=>{"use strict";var b=a.i(87924),c=a.i(52647);a.i(54828);var d=a.i(86262),e=a.i(84632),f=a.i(22958);a.s(["default",0,({vendasFinais:a,valorTotal:g})=>{let h=a.length,i=a.filter(a=>"APPROVED"===a.status).length,j=a.filter(a=>"PENDING"===a.status).length,k=a.filter(a=>"CANCELLED"===a.status).length,l=a.filter(a=>"APPROVED"===a.status).reduce((a,b)=>a+parseFloat(b.valor.toString()),0),m=a.filter(a=>"PENDING"===a.status).reduce((a,b)=>a+parseFloat(b.valor.toString()),0),n=a.filter(a=>"CANCELLED"===a.status).reduce((a,b)=>a+parseFloat(b.valor.toString()),0);return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resumo das Faturas"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Parcelas"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor por Parcela"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,c.formatCurrency)(h>0?g/h:0)})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(d.CheckCircleIcon,{className:"w-6 h-6 text-green-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Parcelas Pagas"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-green-800 dark:text-green-300",children:i}),(0,b.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:(0,c.formatCurrency)(l)})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(e.TimeIcon,{className:"w-6 h-6 text-yellow-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"Parcelas Pendentes"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-yellow-800 dark:text-yellow-300",children:j}),(0,b.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:(0,c.formatCurrency)(m)})]})]}),k>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(f.AlertIcon,{className:"w-6 h-6 text-red-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Parcelas Canceladas"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-red-800 dark:text-red-300",children:k}),(0,b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:(0,c.formatCurrency)(n)})]})]})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Total"}),(0,b.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(0,c.formatCurrency)(g)})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progresso"}),(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:h>0?`${Math.round(i/h*100)}%`:"0%"}})}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[h>0?Math.round(i/h*100):0,"% concluído"]})]})]})]})})]})]})}])},15764,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(32636),g=a.i(50944);a.i(54828);var h=a.i(42043),i=a.i(84632),j=a.i(86262),k=a.i(22958),l=a.i(52647),m=a.i(93601),n=a.i(25699),o=a.i(43617),p=a.i(56042),q=a.i(17303),r=a.i(6704),s=b([f,m,n]);function t(){let a,{user:b}=(0,f.useAuth)(),c=(0,g.useRouter)(),s=(0,g.useParams)(),[t,u]=(0,e.useState)(null),[v,w]=(0,e.useState)([]),[x,y]=(0,e.useState)(!0),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)(""),F=(0,e.useCallback)(async()=>{if(s.id)try{y(!0);let a=parseInt(s.id),b=await m.vendaService.getById(a);u(b.data);let c=(await m.vendaFinalService.list({vendaId:a,limit:100})).data;w(c),console.log("Vendas finais:",c)}catch(a){console.error("Erro ao carregar venda:",a),r.default.error("Erro ao carregar dados da venda")}finally{y(!1)}},[s.id]);(0,e.useEffect)(()=>{F()},[F]);let G=(a,b)=>{C(a),E(b||""),A(!0)},H=async()=>{await F()},I=a=>new Date(a).toLocaleDateString("pt-BR");return x?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):t?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("button",{onClick:()=>c.back(),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Voltar",children:(0,d.jsx)(h.ChevronLeftIcon,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Cobrança #",t.id]}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Detalhes da cobrança"})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(q.ThemeToggleButton,{}),(a=>{switch(a){case"PAGO":case"APPROVED":return(0,d.jsx)(j.CheckCircleIcon,{className:"w-5 h-5 text-green-500"});case"PENDENTE":case"PENDING":return(0,d.jsx)(i.TimeIcon,{className:"w-5 h-5 text-yellow-500"});case"CANCELLED":return(0,d.jsx)(k.AlertIcon,{className:"w-5 h-5 text-red-500"});default:return(0,d.jsx)(i.TimeIcon,{className:"w-5 h-5 text-gray-500"})}})(t.status),(0,d.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${(a=>{switch(a){case"PAGO":case"APPROVED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"PENDENTE":case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"CANCELLED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}})(t.status)}`,children:t.status})]})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informações da Cobrança"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor:"}),(0,d.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,l.formatCurrency)(t.valor)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor Total:"}),(0,d.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,l.formatCurrency)(t.valorTotal)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data de Início:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:I(t.inicio)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data de Fim:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:I(t.fim)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recorrência:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:t.quantidadeRecorrencia>0?`${t.quantidadeRecorrencia+1} parcelas`:"À vista"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Criada em:"}),(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(a=t.createdAt,new Date(a).toLocaleString("pt-BR"))})]})]})]}),t.produtos&&t.produtos.length>0&&(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Produtos"}),(0,d.jsx)("div",{className:"space-y-3",children:t.produtos.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a.produto.nome}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Quantidade: ",a.quantidade]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:(0,l.formatCurrency)(a.valorTotal)}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,l.formatCurrency)(a.valorUnitario)," cada"]})]})]},a.id))})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Faturas (",v.length,")"]}),0===v.length?(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4",children:"Nenhuma fatura encontrada para esta cobrança."}):(0,d.jsx)("div",{className:"space-y-4",children:v.map(a=>(0,d.jsx)(n.default,{vendaFinal:a,onShowQRCode:G,onGenerateSuccess:H},a.id))})]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(o.default,{vendasFinais:v,valorTotal:t.valorTotal}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Vendedor"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:t.vendedor?.nome||"N/A"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.vendedor?.id||"N/A"]})]})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Empresa"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:t.empresa?.nome||"N/A"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.empresa?.id||"N/A"]})]})]})]})]}),(0,d.jsx)(p.default,{isOpen:z,onClose:()=>A(!1),pixCode:B,qrCode:D||""})]}):(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(k.AlertIcon,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Venda não encontrada"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"A venda solicitada não foi encontrada ou você não tem permissão para visualizá-la."}),(0,d.jsx)("button",{onClick:()=>c.push("/dashboard/cliente/cobrancas"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Voltar para Cobranças"})]})}[f,m,n]=s.then?(await s)():s,a.s(["default",()=>t]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_8642f69b._.js.map