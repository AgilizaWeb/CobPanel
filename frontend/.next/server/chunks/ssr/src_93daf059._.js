module.exports=[39323,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({type:a="text",id:c,name:d,placeholder:e,defaultValue:f,onChange:g,min:h,max:i,step:j,disabled:k=!1,success:l=!1,error:m=!1,hint:n,value:o,required:p,className:q="",...r})=>{let s=`h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ${q}`;if("date"!==a&&(s+=" appearance-none"),k)s+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(m){if(s+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof m)return(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{...r,type:a,id:c,name:d,placeholder:e,defaultValue:f,onChange:g,className:s,min:h,max:i,step:j,disabled:k,value:o,required:p}),(0,b.jsx)("p",{className:"mt-1 text-xs text-error-500",children:m})]})}else l?s+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":s+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{...r,type:a,id:c,name:d,placeholder:e,value:o,defaultValue:f,onChange:g,min:h,max:i,required:p,step:j,disabled:k,className:s}),n&&(0,b.jsx)("p",{className:`mt-1.5 text-xs ${m?"text-error-500":l?"text-success-500":"text-gray-500"}`,children:n})]})}])},91119,a=>{"use strict";var b=a.i(87924);let c=({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 ${c}`,children:a});a.s(["Card",()=>c])},94394,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(50944),g=a.i(91119),h=a.i(39323),i=a.i(96369),j=a.i(622),k=a.i(90365),l=a.i(6704),m=b([k]);function n(){let a=(0,f.useRouter)(),[b,c]=(0,e.useState)(!1),[m,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(!0),[q,r]=(0,e.useState)([]),[s,t]=(0,e.useState)([]),[u,v]=(0,e.useState)({titulo:"",mensagem:"",tipo:"MANUAL",empresaId:void 0,userId:void 0,actionLink:"",actionLabel:""});(0,e.useEffect)(()=>{(async()=>{try{n(!0);let a=await k.services.empresa.list({perPage:1e3});r(a.data||[])}catch(a){console.error("Erro ao carregar empresas:",a),l.default.error("Erro ao carregar empresas")}finally{n(!1)}})()},[]),(0,e.useEffect)(()=>{(async()=>{try{p(!0);let a=await k.services.users.list({limit:1e3});t(a.data||[])}catch(a){console.error("Erro ao carregar usuários:",a),l.default.error("Erro ao carregar usuários")}finally{p(!1)}})()},[]);let w=(0,e.useMemo)(()=>q.map(a=>({value:String(a.id),label:a.nome})),[q]),x=(0,e.useMemo)(()=>{let a=s;return u.empresaId&&(a=s.filter(a=>a.empresaId===u.empresaId)),a.map(a=>({value:String(a.id),label:`${a.nome} (${a.email}) - ${a.role}`}))},[s,u.empresaId]),y=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobrança Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"}],z=a=>{let{name:b,value:c}=a.target;v(a=>({...a,[b]:c}))},A=a=>b=>{v(c=>{let d={...c};return"empresaId"===a?(d.empresaId=b?Number(b.value):void 0,c.empresaId!==d.empresaId&&(d.userId=void 0)):"userId"===a?d.userId=b?Number(b.value):void 0:"tipo"===a&&(d.tipo=b?.value),d})},B=async b=>{if(b.preventDefault(),!u.titulo.trim())return void l.default.error("Título é obrigatório");if(!u.mensagem.trim())return void l.default.error("Mensagem é obrigatória");if(!u.empresaId&&!u.userId)return void l.default.error("Selecione uma empresa ou um usuário");try{c(!0);let b={titulo:u.titulo.trim(),mensagem:u.mensagem.trim(),tipo:u.tipo,empresaId:u.empresaId||void 0,userId:u.userId||void 0,actionLink:u.actionLink?.trim()||void 0,actionLabel:u.actionLabel?.trim()||void 0};await k.services.notificacao.create(b),l.default.success("Notificação criada com sucesso!"),a.push("/dashboard/admin")}catch(a){console.error("Erro ao criar notificação:",a),l.default.error(a?.response?.data?.error||"Erro ao criar notificação")}finally{c(!1)}};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex justify-between items-center",children:(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Criar Notificação"})}),(0,d.jsx)(g.Card,{className:"p-6",children:(0,d.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"titulo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Título ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)(h.default,{id:"titulo",name:"titulo",type:"text",value:u.titulo,onChange:z,placeholder:"Digite o título da notificação",required:!0,"aria-label":"Título da notificação"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"mensagem",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mensagem ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("textarea",{id:"mensagem",name:"mensagem",value:u.mensagem,onChange:z,placeholder:"Digite a mensagem da notificação",required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white","aria-label":"Mensagem da notificação"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Tipo de Notificação ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)(j.default,{id:"tipo",options:y,value:y.find(a=>a.value===u.tipo)||null,onChange:A("tipo"),placeholder:"Selecione o tipo",isClearable:!1,"aria-label":"Tipo de notificação"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"empresaId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Empresa",(0,d.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Se selecionada, notificará todos os usuários ADMIN, GESTOR e VENDEDOR da empresa)"})]}),(0,d.jsx)(j.default,{id:"empresaId",options:w,value:u.empresaId&&w.find(a=>a.value===String(u.empresaId))||null,onChange:A("empresaId"),placeholder:m?"Carregando empresas...":"Selecione uma empresa (opcional)",isClearable:!0,isSearchable:!0,isLoading:m,"aria-label":"Selecionar empresa"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Usuário Específico",(0,d.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Se selecionado, notificará apenas este usuário. Se empresa também selecionada, filtra usuários da empresa)"})]}),(0,d.jsx)(j.default,{id:"userId",options:x,value:u.userId&&x.find(a=>a.value===String(u.userId))||null,onChange:A("userId"),placeholder:o?"Carregando usuários...":"Selecione um usuário (opcional)",isClearable:!0,isSearchable:!0,isLoading:o,"aria-label":"Selecionar usuário"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"actionLink",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Link de Ação (opcional)"}),(0,d.jsx)(h.default,{id:"actionLink",name:"actionLink",type:"url",value:u.actionLink||"",onChange:z,placeholder:"Ex: /dashboard/empresa/planos/atual","aria-label":"Link de ação da notificação"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"URL para onde o usuário será redirecionado ao clicar na notificação"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"actionLabel",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rótulo do Botão de Ação (opcional)"}),(0,d.jsx)(h.default,{id:"actionLabel",name:"actionLabel",type:"text",value:u.actionLabel||"",onChange:z,placeholder:"Ex: Ver Plano Atual","aria-label":"Rótulo do botão de ação"}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Texto que aparecerá no botão de ação da notificação"})]}),(0,d.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,d.jsx)(i.default,{type:"submit",variant:"primary",disabled:b,children:b?"Criando...":"Criar Notificação"}),(0,d.jsx)(i.default,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:b,children:"Cancelar"})]})]})})]})}[k]=m.then?(await m)():m,a.s(["default",()=>n]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_93daf059._.js.map