module.exports=[39323,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({type:a="text",id:c,name:d,placeholder:e,defaultValue:f,onChange:g,min:h,max:i,step:j,disabled:k=!1,success:l=!1,error:m=!1,hint:n,value:o,required:p,className:q="",...r})=>{let s=`h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ${q}`;if("date"!==a&&(s+=" appearance-none"),k)s+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(m){if(s+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof m)return(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{...r,type:a,id:c,name:d,placeholder:e,defaultValue:f,onChange:g,className:s,min:h,max:i,step:j,disabled:k,value:o,required:p}),(0,b.jsx)("p",{className:"mt-1 text-xs text-error-500",children:m})]})}else l?s+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":s+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{...r,type:a,id:c,name:d,placeholder:e,value:o,defaultValue:f,onChange:g,min:h,max:i,required:p,step:j,disabled:k,className:s}),n&&(0,b.jsx)("p",{className:`mt-1.5 text-xs ${m?"text-error-500":l?"text-success-500":"text-gray-500"}`,children:n})]})}])},83894,a=>{"use strict";var b=a.i(84692);a.s(["EyeIcon",()=>b.default])},91119,a=>{"use strict";var b=a.i(87924);let c=({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 ${c}`,children:a});a.s(["Card",()=>c])},17027,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({currentPage:a,totalPages:c,onPageChange:d})=>{let e=Array.from({length:Math.min(3,c)},(b,c)=>c+Math.max(a-1,1));return(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("button",{onClick:()=>d(a-1),disabled:1===a,className:"mr-2.5 flex items-center h-10 justify-center rounded-lg border border-gray-300 bg-white px-3.5 py-2.5 text-gray-700 shadow-theme-xs hover:bg-gray-50 disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] text-sm","aria-label":"P√°gina anterior",children:"Anterior"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a>3&&(0,b.jsx)("span",{className:"px-2 text-gray-500 dark:text-gray-400",children:"..."}),e.map(c=>(0,b.jsx)("button",{onClick:()=>d(c),className:`px-4 py-2 rounded ${a===c?"bg-brand-500 text-white":"text-gray-700 dark:text-gray-400"} flex w-10 items-center justify-center h-10 rounded-lg text-sm font-medium hover:bg-blue-500/[0.08] hover:text-brand-500 dark:hover:text-brand-500`,"aria-label":`Ir para p\xe1gina ${c}`,children:c},c)),a<c-2&&(0,b.jsx)("span",{className:"px-2 text-gray-500 dark:text-gray-400",children:"..."})]}),(0,b.jsx)("button",{onClick:()=>d(a+1),disabled:a===c,className:"ml-2.5 flex items-center justify-center rounded-lg border border-gray-300 bg-white px-3.5 py-2.5 text-gray-700 shadow-theme-xs text-sm hover:bg-gray-50 h-10 disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]","aria-label":"Pr√≥xima p√°gina",children:"Pr√≥ximo"})]})}])},183,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(91119),f=a.i(96369),g=a.i(52647);a.i(54828);var h=a.i(44091),i=a.i(83894),j=a.i(86262),k=a.i(32636),l=b([k]);function m({notificacao:a,onMarcarComoLida:b,onDelete:c,onView:l}){let{user:m}=(0,k.useAuth)(),n=m?.role==="SUPERADMIN";return(0,d.jsx)(e.Card,{className:`p-4 transition-all hover:shadow-md ${!a.lida?"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10":""}`,children:(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-2xl",children:function(a){switch(a){case"VENCIMENTO_EMPRESA":return"‚ö†Ô∏è";case"PLANO_PAGO":return"‚úÖ";case"COBRANCA_GERADA":return"üí≥";case"FATURA_PAGA":return"üí∞";case"PARCELA_PAGA":return"üíµ";case"MANUAL":return"üì¢";case"TICKET_MENSAGEM":return"üé´";default:return"üîî"}}(a.tipo)})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"flex items-start justify-between gap-2 mb-2",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:`text-base font-semibold text-gray-900 dark:text-white mb-1 ${!a.lida?"font-bold":""}`,children:a.titulo}),(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,d.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:function(a){switch(a){case"VENCIMENTO_EMPRESA":return"Vencimento de Empresa";case"PLANO_PAGO":return"Plano Pago";case"COBRANCA_GERADA":return"Cobran√ßa Gerada";case"FATURA_PAGA":return"Fatura Paga";case"PARCELA_PAGA":return"Parcela Paga";case"MANUAL":return"Manual";case"TICKET_MENSAGEM":return"Ticket";default:return a}}(a.tipo)}),!a.lida&&(0,d.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:"N√£o lida"})]})]})}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:a.mensagem}),n&&(a.empresa||a.user)&&(0,d.jsx)("div",{className:"mb-3 p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600 dark:text-gray-400",children:[a.empresa&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{children:"üì¶"}),(0,d.jsx)("span",{className:"font-medium",children:"Empresa:"}),(0,d.jsx)("span",{children:a.empresa.nome})]}),a.user&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{children:"üë§"}),(0,d.jsx)("span",{className:"font-medium",children:"Usu√°rio:"}),(0,d.jsx)("span",{children:a.user.nome})]})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3",children:[(0,d.jsx)("span",{children:function(a){try{let b=new Date(a),c=new Date,d=Math.floor((c.getTime()-b.getTime())/1e3);if(d<60)return"agora";if(d<3600)return`${Math.floor(d/60)} min atr\xe1s`;if(d<86400)return`${Math.floor(d/3600)} hr atr\xe1s`;if(d<604800)return`${Math.floor(d/86400)} dias atr\xe1s`;return(0,g.formatDate)(a)}catch{return a}}(a.createdAt)}),a.actionLink&&a.actionLabel&&(0,d.jsxs)("a",{href:a.actionLink,className:"text-brand-500 hover:text-brand-600 dark:text-brand-400 font-medium",children:[a.actionLabel," ‚Üí"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[!a.lida&&(0,d.jsx)(f.default,{variant:"outline",size:"sm",onClick:()=>b(a.id),startIcon:(0,d.jsx)(j.CheckCircleIcon,{className:"w-5 h-5"}),"aria-label":"Marcar como lida",children:"Marcar como lida"}),l&&(0,d.jsx)(f.default,{variant:"outline",size:"sm",onClick:()=>l(a.id),startIcon:(0,d.jsx)(i.EyeIcon,{className:"w-5 h-5"}),"aria-label":"Ver detalhes",children:"Ver"}),(0,d.jsx)(f.default,{variant:"outline",size:"sm",onClick:()=>c(a.id),startIcon:(0,d.jsx)(h.TrashBinIcon,{className:"w-5 h-5"}),"aria-label":"Excluir notifica√ß√£o",className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Excluir"})]})]})]})})}[k]=l.then?(await l)():l,a.s(["default",()=>m]),c()}catch(a){c(a)}},!1),80610,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(6704),g=a.i(91119),h=a.i(39323),i=a.i(622),j=a.i(96369),k=a.i(17027),l=a.i(39906),m=a.i(90365),n=a.i(183),o=a.i(49673),p=a.i(11667),q=a.i(32636);a.i(54828);var r=a.i(13872),s=b([m,n,o,p,q]);function t(){let{user:a}=(0,q.useAuth)(),{marcarComoLida:b,marcarTodasComoLidas:c,deleteNotificacao:s}=(0,p.useNotifications)(),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)(!0),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)(1),[B,C]=(0,e.useState)(0),[D,E]=(0,e.useState)({}),[F,G]=(0,e.useState)(20),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(null),L=(0,e.useCallback)(async()=>{try{w(!0);let a={page:z,perPage:F};void 0!==D.lida&&(a.lida=D.lida),D.tipo&&(a.tipo=D.tipo);let b=await m.services.notificacao.list(a);u(b.data||[]),C(b.pagination?.totalPages||1)}catch(a){console.error("Erro ao carregar notifica√ß√µes:",a),f.toast.error("Erro ao carregar notifica√ß√µes")}finally{w(!1)}},[z,x,D,F]);(0,e.useEffect)(()=>{L()},[L]);let M=t.filter(a=>{if(!x)return!0;let b=x.toLowerCase();return a.titulo.toLowerCase().includes(b)||a.mensagem.toLowerCase().includes(b)}),N=a=>{E(b=>({...b,...a})),A(1)},O=async a=>{try{await b(a),await L(),f.toast.success("Notifica√ß√£o marcada como lida")}catch(a){f.toast.error("Erro ao marcar notifica√ß√£o como lida")}},P=async()=>{try{await c(),await L(),f.toast.success("Todas as notifica√ß√µes foram marcadas como lidas")}catch(a){f.toast.error("Erro ao marcar todas como lidas")}},Q=async a=>{if(window.confirm("Tem certeza que deseja excluir esta notifica√ß√£o?"))try{await s(a),await L(),f.toast.success("Notifica√ß√£o exclu√≠da com sucesso")}catch(a){f.toast.error("Erro ao excluir notifica√ß√£o")}},R=a=>{let b=t.find(b=>b.id===a);b&&(K(b),I(!0))},S=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobran√ßa Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"},{value:"TICKET_MENSAGEM",label:"Ticket Mensagem"}],T=[{value:"true",label:"Lidas"},{value:"false",label:"N√£o lidas"}],U=t.filter(a=>!a.lida).length;return(0,d.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Notifica√ß√µes"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie todas as suas notifica√ß√µes"})]}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:U>0&&(0,d.jsx)(j.default,{variant:"outline",onClick:P,"aria-label":"Marcar todas como lidas",children:"Marcar todas como lidas"})})]}),(0,d.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,d.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,d.jsx)(h.default,{type:"text",placeholder:"Buscar notifica√ß√µes...",value:x,onChange:a=>{y(a.target.value),A(1)},className:"w-full","aria-label":"Buscar notifica√ß√µes"})}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,d.jsx)(i.default,{placeholder:"Status",options:T,value:void 0!==D.lida?T.find(a=>a.value===String(D.lida)):void 0,onChange:a=>N({lida:a?"true"===a.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,d.jsx)(i.default,{placeholder:"Tipo",options:S,value:D.tipo?S.find(a=>a.value===D.tipo):void 0,onChange:a=>N({tipo:a?a.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50","aria-label":"Filtrar por tipo"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(l.default,{className:"flex items-center mb-0 h-full",children:"Quantidade por p√°gina"}),(0,d.jsx)(h.default,{className:"max-w-24",type:"number",defaultValue:F,max:100,min:1,onChange:a=>{let b=Number(a.target.value)||20;G(b),A(1)},"aria-label":"Itens por p√°gina"})]}),(0,d.jsx)(k.default,{currentPage:z,totalPages:B,onPageChange:A})]}),v?(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,d.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},a))}):0===M.length?(0,d.jsxs)(g.Card,{className:"p-12 text-center",children:[(0,d.jsx)(r.BellIcon,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma notifica√ß√£o encontrada"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x||void 0!==D.lida||D.tipo?"Tente ajustar os filtros de busca":"Voc√™ n√£o possui notifica√ß√µes no momento"})]}):(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:M.map(a=>(0,d.jsx)(n.default,{notificacao:a,onMarcarComoLida:O,onDelete:Q,onView:R},a.id))}),!v&&M.length>0&&(0,d.jsx)("div",{className:"mt-6 flex justify-center",children:(0,d.jsx)(k.default,{currentPage:z,totalPages:B,onPageChange:A})}),(0,d.jsx)(o.default,{isOpen:H,onClose:()=>{I(!1),K(null),L()},notificacao:J,onMarcarComoLida:O,onDelete:Q})]})}[m,n,o,p,q]=s.then?(await s)():s,a.s(["default",()=>t]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_2150de43._.js.map