module.exports=[16890,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(52647),e=a.i(96438);a.s(["default",0,({vendaFinal:a,onEdit:f,onDelete:g,onSend:h,showActions:i=!0})=>{let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),n=(a,b)=>{navigator.clipboard.writeText(a),m(b),setTimeout(()=>m(null),2e3)},o=(a,b=4)=>a.length<=b?a:a.slice(0,b)+"*".repeat(a.length-b);return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow duration-200",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Fatura #",a.id]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(a=>{switch(a){case"APPROVED":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"CANCELLED":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}})(a.status)}`,children:(a=>{switch(a){case"APPROVED":return"Aprovado";case"PENDING":return"Pendente";case"CANCELLED":return"Cancelado";default:return a}})(a.status)}),(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:(a=>{switch(a){case"PIX":return"PIX";case"BOLETO":return"Boleto";default:return a}})(a.type)})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["UUID: ",a.uuid.slice(0,8),"..."]})]}),(0,b.jsxs)("div",{className:"flex gap-2 ml-4",children:[i&&h&&(0,b.jsx)(e.default,{variant:"primary",size:"sm",onClick:h,className:"p-2",title:"Enviar fatura para o cliente",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})}),i&&(0,b.jsx)(e.default,{variant:"secondary",size:"sm",onClick:f,className:"p-2",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),i&&(0,b.jsx)(e.default,{variant:"danger",size:"sm",onClick:g,className:"p-2",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Valor"}),(0,b.jsx)("dd",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(0,d.formatCurrency)(a.valor)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Vencimento"}),(0,b.jsx)("dd",{className:`text-sm text-gray-900 dark:text-white border-b border-b-${(0,d.getDueDateColor)(a.vencimento)}-500`,children:(0,d.formatDate)(a.vencimento)})]}),a.dataPagamento&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Data de Pagamento"}),(0,b.jsx)("dd",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:(0,d.formatDate)(a.dataPagamento)})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dados de Pagamento"}),(0,b.jsx)(e.default,{variant:"secondary",size:"sm",onClick:()=>k(!j),className:"text-xs",children:j?"Ocultar":"Mostrar"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ID do Pagamento:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:j?a.id_payment||"N/A":o(a.id_payment||"N/A")}),a.id_payment&&(0,b.jsx)(e.default,{variant:"secondary",size:"sm",onClick:()=>n(a.id_payment,"id_payment"),className:"p-1",children:"id_payment"===l?(0,b.jsx)("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,b.jsxs)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,b.jsx)("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),(0,b.jsx)("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})})]})]}),a.copiacola&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Copia e Cola:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-mono text-gray-900 dark:text-white break-all",children:j?a.copiacola:o(a.copiacola,20)}),(0,b.jsx)(e.default,{variant:"secondary",size:"sm",onClick:()=>n(a.copiacola,"copiacola"),className:"p-1 min-w-fit",children:"copiacola"===l?(0,b.jsx)("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,b.jsxs)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,b.jsx)("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),(0,b.jsx)("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})})]})]}),a.codigobarra&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Código de Barra:"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:j?a.codigobarra:o(a.codigobarra,10)}),(0,b.jsx)(e.default,{variant:"secondary",size:"sm",onClick:()=>n(a.codigobarra,"codigobarra"),className:"p-1",children:"codigobarra"===l?(0,b.jsx)("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(0,b.jsxs)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,b.jsx)("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),(0,b.jsx)("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})})]})]})]})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Venda ID: #",a.vendaId]})})]})}])},32875,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(43742),g=a.i(91262),h=a.i(96438),i=a.i(39323),j=a.i(39906),k=a.i(622),l=a.i(52647),m=a.i(6704),n=a.i(34165),o=b([f,g]);[f,g]=o.then?(await o)():o;let p=[{value:"PIX",label:"PIX"},{value:"BOLETO",label:"Boleto"}],q=[{value:"PENDING",label:"Pendente"},{value:"APPROVED",label:"Aprovado"},{value:"CANCELLED",label:"Cancelado"}];a.s(["default",0,({vendaFinal:a,vendaId:b,onSubmit:c,onCancel:o})=>{let[r,s]=(0,e.useState)({valor:Number(a?.valor)||0,status:a?.status||"PENDING",type:a?.type||"PIX",vencimento:a?.vencimento?new Date(a.vencimento):new Date,dataPagamento:a?.dataPagamento?new Date(a.dataPagamento):void 0,vendaId:b,id_payment:a?.id_payment||"",copiacola:a?.copiacola||"",qrcode:a?.qrcode||"",codigobarra:a?.codigobarra||"",gatewayId:a?.gatewayId||void 0,conexaoId:a?.conexaoId||void 0}),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)([]),[x,y]=(0,e.useState)(!0),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(a?.valor?(0,l.formatCurrency)(a.valor).replace("R$","").trim():"");(0,e.useEffect)(()=>{(async()=>{try{y(!0);let[a,b]=await Promise.all([f.gatewayService.list({limit:100}),g.conexaoService.list({limit:100})]);u(a.data||[]),w(b.data||[])}catch(a){console.error("Erro ao carregar dados:",a),m.toast.error("Erro ao carregar dados")}finally{y(!1)}})()},[]);let D=async a=>{if(a.preventDefault(),!r.valor||r.valor<=0)return void m.toast.error("Valor deve ser maior que zero");if(!r.vencimento)return void m.toast.error("Data de vencimento é obrigatória");try{A(!0),await c(r)}catch(a){console.error("Erro ao salvar venda final:",a)}finally{A(!1)}};return(0,d.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"valor",children:"Valor *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("span",{className:"absolute z-1 left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-300",children:"R$"}),(0,d.jsx)(i.default,{id:"valor",type:"text",className:"pl-9",value:B,onChange:a=>{let b=a.target.value.replace(/\D/g,"");if(""===b){C(""),s({...r,valor:0});return}let c=(0,l.formatCurrencyInput)(b);C(c);let d=(0,l.parseCurrencyInput)(b);console.log("Parsed Value:",d),s({...r,valor:d})},placeholder:"0,00",required:!0})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"status",children:"Status *"}),(0,d.jsx)(k.default,{id:"status",value:q.find(a=>a.value===r.status),onChange:a=>s({...r,status:a.value}),options:q,placeholder:"Selecione o status",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"type",children:"Tipo de Pagamento *"}),(0,d.jsx)(k.default,{id:"type",value:p.find(a=>a.value===r.type),onChange:a=>s({...r,type:a.value}),options:p,placeholder:"Selecione o tipo",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"vencimento",children:"Data de Vencimento *"}),(0,d.jsx)(n.default,{id:"data",onChange:a=>{a[0]&&s({...r,vencimento:a[0]})},defaultDate:new Date(r.vencimento||new Date)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"dataPagamento",children:"Data do Pagamento"}),(0,d.jsx)(n.default,{id:"dataPagamento",onChange:a=>{a[0]?s({...r,dataPagamento:a[0]}):s({...r,dataPagamento:void 0})},defaultDate:r.dataPagamento?new Date(r.dataPagamento):void 0}),(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Data em que o pagamento foi efetivado (para status aprovado manualmente)"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"id_payment",children:"ID do Pagamento"}),(0,d.jsx)(i.default,{id:"id_payment",type:"text",value:r.id_payment||"",onChange:a=>s({...r,id_payment:a.target.value}),placeholder:"ID do pagamento (opcional)"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"gatewayId",children:"Gateway de Pagamento"}),(0,d.jsx)(k.default,{value:t.find(a=>a.id===r.gatewayId)?{value:r.gatewayId.toString(),label:t.find(a=>a.id===r.gatewayId).nome}:void 0,onChange:a=>{s({...r,gatewayId:a?parseInt(a.value):void 0})},options:t.map(a=>({value:a.id.toString(),label:`${a.nome} (${a.gateway}) ${a.isDefault?"(Padrão)":""}`})),placeholder:"Selecione um gateway (opcional)",isClearable:!0,isLoading:x})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"conexaoId",children:"Conexão WhatsApp"}),(0,d.jsx)(k.default,{value:v.find(a=>a.id===r.conexaoId)?{value:r.conexaoId.toString(),label:v.find(a=>a.id===r.conexaoId).nome}:void 0,onChange:a=>{s({...r,conexaoId:a?parseInt(a.value):void 0})},options:v.map(a=>({value:a.id.toString(),label:`${a.nome} ${a.isDefault?"(Padrão)":""}`})),placeholder:"Selecione uma conexão (opcional)",isClearable:!0,isLoading:x})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Dados de Pagamento (Opcionais)"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"copiacola",children:"Copia e Cola"}),(0,d.jsx)(i.default,{id:"copiacola",type:"text",value:r.copiacola||"",onChange:a=>s({...r,copiacola:a.target.value}),placeholder:"Código copia e cola (opcional)"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"qrcode",children:"QR Code"}),(0,d.jsx)(i.default,{id:"qrcode",type:"text",value:r.qrcode||"",onChange:a=>s({...r,qrcode:a.target.value}),placeholder:"QR Code (opcional)"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(j.default,{htmlFor:"codigobarra",children:"Código de Barra"}),(0,d.jsx)(i.default,{id:"codigobarra",type:"text",value:r.codigobarra||"",onChange:a=>s({...r,codigobarra:a.target.value}),placeholder:"Código de barra (opcional)"})]})]})]}),(0,d.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-medium text-blue-900 dark:text-blue-200 mb-2",children:"Informações Importantes"}),(0,d.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[(0,d.jsx)("li",{children:"• Campos obrigatórios: valor, status, type, vencimento e vendaId"}),(0,d.jsx)("li",{children:"• Os dados de pagamento são opcionais e podem ser preenchidos posteriormente"}),(0,d.jsx)("li",{children:"• O status controla o estado atual da fatura"}),(0,d.jsx)("li",{children:"• O gateway é opcional e pode ser usado para integração com sistemas de pagamento"})]})]}),(0,d.jsxs)("div",{className:"flex gap-3 pt-6",children:[(0,d.jsxs)(h.default,{type:"submit",variant:"primary",disabled:z,className:"flex-1",children:[z?"Salvando...":a?"Atualizar":"Criar"," Fatura"]}),o&&(0,d.jsx)(h.default,{type:"button",variant:"secondary",onClick:o,disabled:z,children:"Cancelar"})]})]})}]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_components_vendas_8777ac26._.js.map