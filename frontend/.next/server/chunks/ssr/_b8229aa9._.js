module.exports=[90722,a=>{"use strict";var b=a.i(72131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))});a.s(["ChartBarIcon",0,c],90722)},13772,a=>{"use strict";var b=a.i(72131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))});a.s(["BuildingOfficeIcon",0,c],13772)},83217,a=>{"use strict";var b=a.i(72131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.s(["CurrencyDollarIcon",0,c],83217)},66498,a=>{"use strict";var b=a.i(72131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});a.s(["CalendarIcon",0,c],66498)},67727,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(90365),g=a.i(52647),h=a.i(71702),i=a.i(36374),j=a.i(91119),k=a.i(6704),l=a.i(90722),m=a.i(13772),n=a.i(83217),o=a.i(66498),p=a.i(40772),q=b([f]);[f]=q.then?(await q)():q;let s={7:3,30:6,90:9,365:12};function r(){let[a,b]=(0,e.useState)(null),[c,q]=(0,e.useState)(!0),[r,t]=(0,e.useState)("90");(0,e.useEffect)(()=>{(async()=>{try{q(!0);let a=await f.services.adminStats.getStats();b(a.data)}catch(a){console.error(a),k.toast.error("Não foi possível carregar os relatórios.")}finally{q(!1)}})()},[]);let u=(0,e.useMemo)(()=>{if(!a)return[];let b=s[r]??12;return a.plans.monthlyRevenue.slice(-b)},[a,r]),v=a?.plans.recentPurchases.filter(a=>"PENDENTE"===a.status)??[];if(c||!a)return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Relatórios e Analytics"}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Consolidado financeiro das vendas de planos"})]})}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)("div",{className:"h-32 animate-pulse rounded-xl bg-gray-200 dark:bg-gray-800"},b))})]});let{companies:w,plans:x,users:y}=a;return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Relatórios e Analytics"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dados consolidados para acompanhar o desempenho do marketplace de planos."})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("label",{htmlFor:"relatorios-periodo",className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[(0,d.jsx)(o.CalendarIcon,{className:"h-4 w-4"})," Período:"]}),(0,d.jsxs)("select",{value:r,onChange:a=>t(a.target.value),id:"relatorios-periodo",className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:text-white",children:[(0,d.jsx)("option",{value:"7",children:"Últimos 7 dias"}),(0,d.jsx)("option",{value:"30",children:"Últimos 30 dias"}),(0,d.jsx)("option",{value:"90",children:"Últimos 90 dias"}),(0,d.jsx)("option",{value:"365",children:"Último ano"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Receita acumulada (planos)"}),(0,d.jsx)("p",{className:"mt-2 text-2xl font-semibold text-gray-900 dark:text-white",children:(0,g.formatCurrency)(x.totalRevenue)})]}),(0,d.jsx)(n.CurrencyDollarIcon,{className:"h-8 w-8 text-emerald-500"})]}),(0,d.jsxs)("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[x.paidPurchases," compras confirmadas desde o início."]})]}),(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pendências de faturamento"}),(0,d.jsx)("p",{className:"mt-2 text-2xl font-semibold text-amber-600",children:(0,g.formatCurrency)(x.pendingRevenue)})]}),(0,d.jsx)(p.ClockIcon,{className:"h-8 w-8 text-amber-500"})]}),(0,d.jsxs)("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[x.pendingPurchases," compras aguardando confirmação de pagamento."]})]}),(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Planos no catálogo"}),(0,d.jsx)("p",{className:"mt-2 text-2xl font-semibold text-gray-900 dark:text-white",children:x.catalog})]}),(0,d.jsx)(l.ChartBarIcon,{className:"h-8 w-8 text-indigo-500"})]}),(0,d.jsxs)("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[x.activePlans," ativos · ",x.inactivePlans," suspensos."]})]}),(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Empresas ativas"}),(0,d.jsx)("p",{className:"mt-2 text-2xl font-semibold text-gray-900 dark:text-white",children:w.active})]}),(0,d.jsx)(m.BuildingOfficeIcon,{className:"h-8 w-8 text-blue-500"})]}),(0,d.jsxs)("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[w.expiring," vencem em até 7 dias · ",w.expired," vencidas."]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[(0,d.jsxs)("div",{className:"xl:col-span-3",children:[(0,d.jsx)(h.RevenueByMonthChart,{data:u.map(a=>({label:a.label.toUpperCase(),revenue:a.revenue}))}),(0,d.jsx)("div",{className:"mt-4 overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.02]",children:(0,d.jsxs)("table",{className:"min-w-full text-sm text-gray-700 dark:text-gray-300",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-white/[0.05]",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Mês"}),(0,d.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Receita"}),(0,d.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Transações"}),(0,d.jsx)("th",{className:"px-4 py-2 text-left font-semibold",children:"Ticket médio"})]})}),(0,d.jsx)("tbody",{children:u.map(a=>(0,d.jsxs)("tr",{className:"border-t border-gray-200 dark:border-gray-800",children:[(0,d.jsx)("td",{className:"px-4 py-2",children:a.label.toUpperCase()}),(0,d.jsx)("td",{className:"px-4 py-2",children:(0,g.formatCurrency)(a.revenue)}),(0,d.jsx)("td",{className:"px-4 py-2",children:a.transactions}),(0,d.jsx)("td",{className:"px-4 py-2",children:a.transactions?(0,g.formatCurrency)(a.revenue/a.transactions):"—"})]},a.key))})]})})]}),(0,d.jsxs)("div",{className:"xl:col-span-2 space-y-6",children:[(0,d.jsx)(i.SalesByStatusChart,{items:x.statusDistribution.map(a=>({status:a.status,total:a.total}))}),(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Empresas com mais clientes"}),(0,d.jsx)("div",{className:"space-y-3",children:w.topByClients.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:a.nome}),(0,d.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[a.clientes," clientes"]})]},a.nome))})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Planos que mais faturaram"}),(0,d.jsx)("div",{className:"space-y-3",children:x.topPlans.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 dark:border-gray-800 dark:bg-white/[0.02]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a.nome}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.purchases," vendas · Ticket médio ",(0,g.formatCurrency)(a.averageTicket)]})]}),(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(0,g.formatCurrency)(a.revenue)})]},a.nome))})]}),(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Empresas que mais compram"}),(0,d.jsx)("div",{className:"space-y-3",children:x.topCompanies.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 dark:border-gray-800 dark:bg-white/[0.02]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a.nome}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.purchases," compras"]})]}),(0,d.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(0,g.formatCurrency)(a.revenue)})]},a.nome))})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Pendências recentes"}),0===v.length?(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma compra pendente no período."}):(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full text-sm text-gray-700 dark:text-gray-300",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-white/[0.05]",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Empresa"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Plano"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Valor"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-semibold",children:"Criado em"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:v.map(a=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-3 py-2",children:a.empresa}),(0,d.jsx)("td",{className:"px-3 py-2",children:a.plano}),(0,d.jsx)("td",{className:"px-3 py-2 font-medium text-amber-600",children:(0,g.formatCurrency)(a.valor)}),(0,d.jsx)("td",{className:"px-3 py-2 text-gray-500",children:(0,g.formatDate)(a.createdAt)})]},a.id))})]})})]}),(0,d.jsxs)(j.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Usuários por perfil"}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:Object.entries(y.breakdown).map(([a,b])=>(0,d.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 dark:border-gray-800 dark:bg-white/[0.02]",children:[(0,d.jsx)("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400",children:a}),(0,d.jsx)("p",{className:"mt-1 text-xl font-semibold text-gray-900 dark:text-white",children:b})]},a))})]})]})]})}a.s(["default",()=>r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_b8229aa9._.js.map