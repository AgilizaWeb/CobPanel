module.exports=[1682,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(8922),f=a.i(32636),g=b([f]);[f]=g.then?(await g)():g,a.s(["default",0,({cliente:a,onEdit:b,onDelete:c})=>{let{user:g}=(0,f.useAuth)();return(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md shadow-gray-200 dark:shadow-gray-700 border border-gray-200 dark:border-gray-700 p-4",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.nome}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.cpfCnpj}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Celular:"})," ",a.celular]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Bairro:"})," ",a.bairro]})]}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.rua,", ",a.numero,a.complemento&&` - ${a.complemento}`]})]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)(e.default,{size:"xs",variant:"secondary",onClick:b,title:`${g?.role.includes("ADMIN")?"Ver cliente":"Editar Cliente"}`,icon:g?.role.includes("ADMIN")?"edit":"eye"}),(0,d.jsx)(e.default,{size:"xs",disabled:!g?.role.includes("ADMIN"),variant:"secondary",onClick:c,title:"Excluir Cliente",icon:"delete"})]})]})})}]),c()}catch(a){c(a)}},!1),96008,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(83490),g=a.i(6704),h=a.i(39323),i=a.i(39906),j=a.i(96438),k=a.i(622),l=a.i(34165),m=a.i(32636),n=b([m]);function o({cliente:a,onSubmit:b,onCancel:c}){let{user:n}=(0,m.useAuth)(),[o,p]=(0,e.useState)({nome:a?.nome||"",cpfCnpj:a?.cpfCnpj||null,email:a?.email||null,celular:a?.celular||null,cep:a?.cep||null,rua:a?.rua||null,numero:a?.numero||null,complemento:a?.complemento||null,bairro:a?.bairro||null,cidade:a?.cidade||null,estado:a?.estado||null,extras:a?.extras||{},nascimento:a?.nascimento||new Date().toISOString()}),[q,r]=(0,e.useState)(Object.entries((a=>{if(!a)return{};if(Array.isArray(a)){let b={};for(let c of a)if("object"==typeof c&&null!==c){let a=Object.keys(c)[0];a&&(b[a]=c[a])}return b}return"object"==typeof a?a:{}})(a?.extras)).map(([a,b])=>({key:a,value:String(b)}))),[s,t]=(0,e.useState)({}),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(!1),y=[{value:"AC",label:"Acre"},{value:"AL",label:"Alagoas"},{value:"AP",label:"Amapá"},{value:"AM",label:"Amazonas"},{value:"BA",label:"Bahia"},{value:"CE",label:"Ceará"},{value:"DF",label:"Distrito Federal"},{value:"ES",label:"Espírito Santo"},{value:"GO",label:"Goiás"},{value:"MA",label:"Maranhão"},{value:"MT",label:"Mato Grosso"},{value:"MS",label:"Mato Grosso do Sul"},{value:"MG",label:"Minas Gerais"},{value:"PA",label:"Pará"},{value:"PB",label:"Paraíba"},{value:"PR",label:"Paraná"},{value:"PE",label:"Pernambuco"},{value:"PI",label:"Piauí"},{value:"RJ",label:"Rio de Janeiro"},{value:"RN",label:"Rio Grande do Norte"},{value:"RS",label:"Rio Grande do Sul"},{value:"RO",label:"Rondônia"},{value:"RR",label:"Roraima"},{value:"SC",label:"Santa Catarina"},{value:"SP",label:"São Paulo"},{value:"SE",label:"Sergipe"},{value:"TO",label:"Tocantins"}],z=async a=>{let c;if(a.preventDefault(),console.log("Form Data:",o),c={},["nome"].forEach(a=>{o[a]||(c[a]=`${a.charAt(0).toUpperCase()+a.slice(1)} \xe9 obrigat\xf3rio`)}),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(c.email="Email inválido"),t(c),0!==Object.keys(c).length)return;console.log("Extra Fields:",q);let d=Object.fromEntries(q.filter(a=>a.key&&a.value).map(a=>[a.key,a.value])),e={...o,extras:d};v(!0);try{await b(e)}catch(a){(a.response?.data?.details||[]).forEach(a=>{let b=a.field.replace("body.","");t(c=>({...c,[b]:a.message}))})}finally{v(!1)}};return(0,d.jsxs)("form",{onSubmit:z,className:`space-y-6  ${n?.role.includes("ADMIN")?"":"pointer-events-none opacity-50"}`,children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)(i.default,{htmlFor:"nome",children:"Nome"}),(0,d.jsx)(h.default,{id:"nome",name:"nome",value:o.nome,onChange:a=>p({...o,nome:a.target.value}),error:s.nome})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"cpfCnpj",children:"CPF ou CNPJ"}),(0,d.jsx)(h.default,{id:"cpfCnpj",name:"cpfCnpj",value:o.cpfCnpj||"",onChange:a=>p({...o,cpfCnpj:a.target.value||null}),error:s.cpfCnpj})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"nascimento",children:"Data de Nascimento"}),(0,d.jsx)(l.default,{id:"data",onChange:a=>{a[0]&&p({...o,nascimento:a[0].toISOString()})},defaultDate:new Date(o.nascimento||new Date().toISOString())}),s.nascimento&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s.nascimento})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"email",children:"Email"}),(0,d.jsx)(h.default,{id:"email",name:"email",type:"email",value:o.email||"",onChange:a=>p({...o,email:a.target.value||null}),error:s.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"celular",children:"celular"}),(0,d.jsx)(h.default,{id:"celular",name:"celular",value:o.celular||"",onChange:a=>p({...o,celular:a.target.value||null}),error:s.celular})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"cep",children:"CEP"}),(0,d.jsx)(h.default,{id:"cep",name:"cep",value:o.cep||"",onChange:async a=>{let b=a.target.value.replace(/\D/g,"");if(p({...o,cep:b}),8===b.length){x(!0);try{let{data:a}=await f.default.get(`https://brasilapi.com.br/api/cep/v1/${b}`);p(b=>({...b,cep:a.cep,rua:a.street||null,bairro:a.neighborhood||null,cidade:a.city||null,estado:a.state||null}))}catch(a){g.toast.error("CEP não encontrado")}finally{x(!1)}}},error:s.cep,disabled:w})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"rua",children:"Rua"}),(0,d.jsx)(h.default,{id:"rua",name:"rua",value:o.rua||"",onChange:a=>p({...o,rua:a.target.value||null}),error:s.rua})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"numero",children:"Número"}),(0,d.jsx)(h.default,{id:"numero",name:"numero",value:o.numero||"",onChange:a=>p({...o,numero:a.target.value||null}),error:s.numero})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"complemento",children:"Complemento"}),(0,d.jsx)(h.default,{id:"complemento",name:"complemento",value:o.complemento||"",onChange:a=>p({...o,complemento:a.target.value||null})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"bairro",children:"Bairro"}),(0,d.jsx)(h.default,{id:"bairro",name:"bairro",value:o.bairro||"",onChange:a=>p({...o,bairro:a.target.value||null}),error:s.bairro})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"cidade",children:"Cidade"}),(0,d.jsx)(h.default,{id:"cidade",name:"cidade",value:o.cidade||"",onChange:a=>p({...o,cidade:a.target.value||null}),error:s.cidade})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.default,{htmlFor:"estado",children:"Estado"}),(0,d.jsx)(k.default,{id:"estado",name:"estado",value:y.find(a=>a.value===o.estado),options:y,onChange:a=>p({...o,estado:a?.value||null}),isSearchable:!0,placeholder:"Selecione o estado",error:s.estado,className:"w-full"})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)(i.default,{children:"Campos Extras"}),q.map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,d.jsx)(h.default,{placeholder:"Chave",value:a.key,onChange:a=>{let c=[...q];c[b].key=a.target.value,r(c)}}),(0,d.jsx)(h.default,{placeholder:"Valor",value:a.value,onChange:a=>{let c=[...q];c[b].value=a.target.value,r(c)}}),(0,d.jsx)(j.default,{type:"button",variant:"danger",onClick:()=>{let a=q.filter((a,c)=>c!==b);r(a)},children:"Remover"})]},b)),(0,d.jsx)(j.default,{type:"button",variant:"secondary",onClick:()=>{r([...q,{key:"",value:""}])},children:"Adicionar Campo Extra"})]})]}),(0,d.jsxs)("div",{className:`flex justify-end space-x-4 pt-4 ${n?.role.includes("ADMIN")?"":"hidden"}`,children:[(0,d.jsx)(j.default,{variant:"secondary",onClick:c,type:"button",children:"Cancelar"}),(0,d.jsx)(j.default,{variant:"primary",type:"submit",loading:u,children:a?"Salvar Alterações":"Criar Cliente"})]})]})}[m]=n.then?(await n)():n,a.s(["default",()=>o]),c()}catch(a){c(a)}},!1),45432,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(90365),g=a.i(32636),h=a.i(6704),i=a.i(96438),j=a.i(85479),k=a.i(16777),l=a.i(1682),m=a.i(96008),n=b([f,g,l,m]);function o(){let{user:a}=(0,g.useAuth)(),[b,c]=(0,e.useState)([]),[n,o]=(0,e.useState)(!0),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(1),[t,u]=(0,e.useState)(0),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(),z=(0,e.useCallback)(async()=>{try{o(!0);let a=await f.services.cliente.list({page:r,limit:9,...p&&{search:p}});c(a.data),u(Math.ceil(a.pagination.total/9))}catch(a){h.default.error("Erro ao carregar clientes")}finally{o(!1)}},[r,p,9]);(0,e.useEffect)(()=>{z()},[z]);let A=async a=>{if(window.confirm("Tem certeza que deseja excluir este cliente?"))try{await f.services.cliente.delete(a),h.default.success("Cliente excluído com sucesso"),z()}catch(a){h.default.error("Erro ao excluir cliente")}},B=async a=>{try{if(x){let b=await f.services.cliente.update(x.id,{...a,complemento:a.complemento,nascimento:a.nascimento,extras:a.extras});console.log("cliente atualizado:",b),h.default.success("Cliente atualizado com sucesso")}else{let b=await f.services.cliente.create({...a,complemento:a.complemento,nascimento:a.nascimento,extras:a.extras});console.log("cliente criado:",b),h.default.success("Cliente criado com sucesso")}w(!1),y(void 0),z()}catch(a){throw console.error("Erro ao salvar cliente:",a),h.default.error("Erro ao salvar cliente"),a}};return(0,d.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Clientes"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie seus clientes"})]}),(0,d.jsx)(i.default,{variant:"primary",disabled:!a?.role.includes("ADMIN"),onClick:()=>{y(void 0),w(!0)},children:"Novo Cliente"})]}),(0,d.jsx)("div",{className:"mt-4 w-full max-w-sm",children:(0,d.jsx)(j.default,{value:p,onChange:a=>q(a.target.value),placeholder:"Buscar clientes..."})})]}),n?(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(a=>(0,d.jsx)(l.default,{cliente:a,onEdit:()=>{y(a),w(!0)},onDelete:()=>A(a.id)},a.id))}),0===b.length&&(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum cliente encontrado"})}),t>1&&(0,d.jsx)("div",{className:"mt-6 flex justify-center",children:(0,d.jsxs)("nav",{className:"flex items-center gap-2",children:[(0,d.jsx)(i.default,{variant:"secondary",onClick:()=>s(a=>Math.max(1,a-1)),disabled:1===r,children:"Anterior"}),(0,d.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Página ",r," de ",t]}),(0,d.jsx)(i.default,{variant:"secondary",onClick:()=>s(a=>Math.min(t,a+1)),disabled:r===t,children:"Próxima"})]})})]}),(0,d.jsx)(k.Modal,{isOpen:v,onClose:()=>{w(!1),y(void 0)},className:"max-w-[800px] m-4",children:(0,d.jsxs)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:[(0,d.jsxs)("div",{className:"px-2 pr-14 mb-6",children:[(0,d.jsx)("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:a?.role.includes("ADMIN")?x?"Editar Cliente":"Novo Cliente":"Visualizar Cliente"}),(0,d.jsx)("p",{className:` text-sm text-gray-500 dark:text-gray-400 lg:mb-7 ${a?.role.includes("ADMIN")?"":"hidden"}`,children:x?"Atualize as informações do cliente.":"Preencha os dados para criar um novo cliente."})]}),(0,d.jsx)(m.default,{cliente:x,onSubmit:B,onCancel:()=>{w(!1),y(void 0)}})]})})]})}[f,g,l,m]=n.then?(await n)():n,a.s(["default",()=>o]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_e20c87e0._.js.map