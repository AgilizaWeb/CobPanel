module.exports=[78730,a=>{"use strict";var b=a.i(60076);a.s(["PencilIcon",()=>b.default])},95266,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(52647);a.i(54828);var f=a.i(78730),g=a.i(44091),h=a.i(96438),i=a.i(32636),j=b([i]);[i]=j.then?(await j)():j,a.s(["default",0,({product:a,onEdit:b,onDelete:c})=>{let{user:j}=(0,i.useAuth)();return console.log("ProductCard rendered with product:",a),(0,d.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md shadow-gray-200 dark:shadow-gray-700 border border-gray-200 dark:border-gray-700 p-4",children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:a.nome}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["SKU: ",a.sku]}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Categoria: ",a.categoria?.nome||"Sem categoria"]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(h.default,{variant:"secondary",disabled:!j?.role.includes("ADMIN"),size:"xs",onClick:b,className:"flex items-center justify-center text-gray-400 hover:text-brand-500 dark:hover:text-brand-400 transition-colors",children:(0,d.jsx)(f.PencilIcon,{className:"w-5 h-5"})}),(0,d.jsx)(h.default,{variant:"secondary",disabled:!j?.role.includes("ADMIN"),size:"xs",onClick:c,className:"flex items-center justify-center text-red-500 dark:text-red-400 rounded-md transition-colors",children:(0,d.jsx)(g.TrashBinIcon,{className:"w-5 h-5"})})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:a.descricao}),(0,d.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Estoque: "}),(0,d.jsxs)("span",{className:`font-medium ${a.estoque>10?"text-success-500":a.estoque>0?"text-warning-500":"text-error-500"}`,children:[a.estoque," un"]})]}),(0,d.jsx)("div",{children:(0,d.jsx)("span",{className:"text-lg font-semibold text-brand-500 dark:text-brand-400",children:(0,e.formatCurrency)(a.valor)})})]}),a.categoria&&(0,d.jsx)("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:a.categoria.nome})})]})]})})}]),c()}catch(a){c(a)}},!1),76617,a=>{"use strict";var b=a.i(87924),c=a.i(96438);a.i(54828);var d=a.i(78730),e=a.i(44091);a.s(["default",0,({category:a,onEdit:f,onDelete:g})=>(0,b.jsx)("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow shadow-gray-200 dark:shadow-gray-700 border border-gray-200 dark:border-gray-700 p-5",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a.nome})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(c.default,{variant:"secondary",size:"xs",onClick:f,title:"Editar categoria",className:"flex items-center justify-center text-gray-400 hover:text-brand-500 dark:hover:text-brand-400 transition-colors",children:(0,b.jsx)(d.PencilIcon,{className:"h-5 w-5"})}),(0,b.jsx)(c.default,{variant:"secondary",size:"xs",onClick:g,title:"Excluir categoria",className:"flex items-center justify-center text-red-500 dark:text-red-400 rounded-md transition-colors",children:(0,b.jsx)(e.TrashBinIcon,{className:"h-5 w-5"})})]})]})})])},35266,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(6704),g=a.i(39323),h=a.i(39906),i=a.i(96438),j=a.i(90365),k=a.i(52647),l=a.i(622),m=b([j]);[j]=m.then?(await m)():m,a.s(["default",0,({product:a,onSubmit:b,onCancel:c})=>{let[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)({nome:a?.nome||"",sku:a?.sku||"",descricao:a?.descricao||"",valor:a?.valor||0,estoque:a?.estoque||0,categoriaId:a?.categoriaId||0}),[q,r]=(0,e.useState)(a?.valor?(0,k.formatCurrency)(a.valor).replace("R$","").trim():""),[s,t]=(0,e.useState)({}),[u,v]=(0,e.useState)(!1);(0,e.useEffect)(()=>{w()},[]);let w=async()=>{try{let a=await j.services.categoria.list();n(a.data.data)}catch(a){f.toast.error("Erro ao carregar categorias")}},x=async a=>{let c;if(a.preventDefault(),c={},o.nome||(c.nome="Nome é obrigatório"),o.sku||(c.sku="SKU é obrigatório"),o.descricao||(c.descricao="Descrição é obrigatória"),(!o.valor||o.valor<=0)&&(c.valor="Valor deve ser maior que zero"),o.estoque<0&&(c.estoque="Estoque não pode ser negativo"),o.categoriaId||(c.categoriaId="Categoria é obrigatória"),t(c),0===Object.keys(c).length){v(!0);try{await b(o)}catch(a){f.toast.error("Erro ao salvar produto")}finally{v(!1)}}};return(0,d.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsxs)(h.default,{htmlFor:"nome",children:["Nome",(0,d.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,d.jsx)(g.default,{id:"nome",name:"nome",value:o.nome,onChange:a=>p({...o,nome:a.target.value}),error:s.nome})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.default,{htmlFor:"sku",children:["SKU",(0,d.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,d.jsx)(g.default,{id:"sku",name:"sku",value:o.sku,onChange:a=>p({...o,sku:a.target.value}),error:s.sku})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.default,{htmlFor:"categoriaId",children:["Categoria",(0,d.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,d.jsx)(l.default,{id:"categoriaId",name:"categoriaId",value:m.map(a=>({value:a.id+"",label:a.nome})).find(a=>a.value===o.categoriaId+""),options:m.map(a=>({value:a.id+"",label:a.nome})),onChange:a=>p({...o,categoriaId:Number(a.value)}),isSearchable:!0,placeholder:"Selecione uma categoria",error:s.categoriaId,className:"w-full"})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsxs)(h.default,{htmlFor:"descricao",children:["Descrição",(0,d.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,d.jsx)("textarea",{id:"descricao",name:"descricao",value:o.descricao,onChange:a=>p({...o,descricao:a.target.value}),rows:3,className:"mt-1.5 w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm outline-none transition-all focus:border-brand-500 focus:ring-1 focus:ring-brand-500 dark:border-gray-800 dark:bg-gray-900"}),s.descricao&&(0,d.jsx)("span",{className:"text-sm text-error-500",children:s.descricao})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.default,{htmlFor:"valor",children:["Valor",(0,d.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("span",{className:"absolute z-1 left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-300",children:"R$"}),(0,d.jsx)(g.default,{id:"valor",name:"valor",type:"text",className:"pl-9",value:q,onChange:a=>{let b=a.target.value.replace(/\D/g,"");if(""===b){r(""),p({...o,valor:0});return}let c=(0,k.formatCurrencyInput)(b);r(c),p({...o,valor:(0,k.parseCurrencyInput)(b)})},error:s.valor})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(h.default,{htmlFor:"estoque",children:["Estoque",(0,d.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,d.jsx)(g.default,{id:"estoque",name:"estoque",type:"number",min:"0",value:o.estoque,onChange:a=>p({...o,estoque:Number(a.target.value)}),error:s.estoque})]})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,d.jsx)(i.default,{variant:"secondary",onClick:c,type:"button",children:"Cancelar"}),(0,d.jsx)(i.default,{variant:"primary",type:"submit",loading:u,children:a?"Atualizar":"Criar"})]})]})}]),c()}catch(a){c(a)}},!1),46267,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(6704),e=a.i(39323),f=a.i(39906),g=a.i(96438);a.s(["default",0,({category:a,onSubmit:h,onCancel:i})=>{let[j,k]=(0,c.useState)({nome:a?.nome||""}),[l,m]=(0,c.useState)({}),[n,o]=(0,c.useState)(!1),p=async a=>{let b;if(a.preventDefault(),b={},j.nome||(b.nome="Nome é obrigatório"),m(b),0===Object.keys(b).length){o(!0);try{await h(j)}catch(a){d.toast.error("Erro ao salvar categoria")}finally{o(!1)}}};return(0,b.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(f.default,{htmlFor:"nome",children:["Nome",(0,b.jsx)("span",{className:"text-error-500",children:"*"})]}),(0,b.jsx)(e.default,{id:"nome",name:"nome",value:j.nome,onChange:a=>k({...j,nome:a.target.value}),error:l.nome})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,b.jsx)(g.default,{variant:"secondary",onClick:i,type:"button",children:"Cancelar"}),(0,b.jsx)(g.default,{variant:"primary",type:"submit",loading:n,children:a?"Atualizar":"Criar"})]})]})}])},9900,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(90365),g=a.i(32636),h=a.i(6704),i=a.i(96438),j=a.i(85479),k=a.i(16777),l=a.i(95266),m=a.i(76617),n=a.i(35266),o=a.i(46267),p=a.i(23091),q=a.i(39906),r=a.i(39323),s=b([f,g,l,n]);function t(){let{user:a}=(0,g.useAuth)(),[b,c]=(0,e.useState)([]),[s,t]=(0,e.useState)([]),[u,v]=(0,e.useState)(!0),[w,x]=(0,e.useState)(!0),[y,z]=(0,e.useState)(!0),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(1),[E,F]=(0,e.useState)(0),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)(null),[K,L]=(0,e.useState)(null),[M,N]=(0,e.useState)("PRODUTOS"),[O,P]=(0,e.useState)(null),[Q,R]=(0,e.useState)(9),S=(0,e.useCallback)(async()=>{try{x(!0);let a=await f.services.categoria.list();t(a.data.data),x(!1)}catch(a){h.default.error("Erro ao carregar categorias")}finally{x(!1)}},[]),T=(0,e.useCallback)(async()=>{try{z(!0);let a=await f.services.produto.list({page:C,limit:Q,search:A});c(a.data),z(!1),a.pagination?F(a.pagination.pages):F(Math.ceil((a.data?.length||0)/Q))}catch(a){h.default.error("Erro ao carregar produtos")}finally{z(!1)}},[C,A,Q]);(0,e.useEffect)(()=>{S()},[S]),(0,e.useEffect)(()=>{T()},[T]),(0,e.useEffect)(()=>{w||y||v(!1)},[w,y]);let U=async a=>{if(window.confirm("Tem certeza que deseja excluir este produto?"))try{await f.services.produto.delete(a),h.default.success("Produto excluído com sucesso"),T()}catch(a){h.default.error("Erro ao excluir produto")}},V=async a=>{if(window.confirm("Tem certeza que deseja excluir esta categoria?"))try{await f.services.categoria.delete(a),h.default.success("Categoria excluída com sucesso"),T()}catch(a){h.default.error("Erro ao excluir categoria")}},W=async a=>{try{I?(await f.services.produto.update(I.id,a),h.default.success("Produto atualizado com sucesso")):(await f.services.produto.create(a),h.default.success("Produto criado com sucesso")),H(!1),J(null),T()}catch(a){h.default.error("Erro ao salvar produto")}},X=async a=>{try{K?(await f.services.categoria.update(K.id,a),h.default.success("Categoria atualizada com sucesso")):(await f.services.categoria.create(a),h.default.success("Categoria criada com sucesso")),H(!1),L(null),T(),S()}catch(a){h.default.error("Erro ao salvar categoria")}};return(0,d.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Produtos e Categorias"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie seus produtos e categorias"})]}),(0,d.jsx)(i.default,{variant:"primary",disabled:!a?.role.includes("ADMIN"),onClick:()=>{J(null),H(!0)},children:"PRODUTOS"===M?"Novo Produto":"Nova Categoria"})]}),(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:`flex flex-wrap gap-2 mb-6 ${a?.role.includes("ADMIN")?"":"pointer-events-none opacity-50"}`,children:["PRODUTOS","CATEGORIAS"].map(a=>(0,d.jsx)("button",{onClick:()=>{N(a),"CATEGORIAS"===a&&P(null)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors
                  ${M===a?"bg-brand-500 text-white dark:bg-brand-400 dark:text-gray-900":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:"PRODUTOS"===a?"Produtos":"Categorias"},a))}),(0,d.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between mb-6",children:(0,d.jsxs)("div",{className:"flex gap-4 w-full sm:w-auto",children:[(0,d.jsx)("div",{className:"w-full sm:w-96",children:(0,d.jsx)(j.default,{value:A,onChange:a=>{B(a.target.value),D(1)},placeholder:`Buscar ${"PRODUTOS"===M?"produtos":"categorias"}...`})}),"PRODUTOS"===M&&(0,d.jsxs)("select",{title:"Selecione uma categoria",className:"w-48 rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",onChange:a=>{let b=a.target.value?Number(a.target.value):null;P(b),D(1)},value:O||"",children:[(0,d.jsx)("option",{value:"",children:"Todas as categorias"}),s.map(a=>(0,d.jsx)("option",{value:a.id,children:a.nome},a.id))]})]})}),(0,d.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,d.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,d.jsx)(q.default,{className:"flex items-center mb-0 h-full",children:"Quantidade por página"}),(0,d.jsx)(r.default,{className:"max-w-24",defaultValue:Q,max:100,min:1,onChange:a=>{let b=Number(a.target.value)||9;R(b),D(1)}})]}),(0,d.jsx)(p.default,{currentPage:C,totalPages:E,onPageChange:D})]})]})]}),u?(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,d.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},a))}):"PRODUTOS"===M?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:b.length>0?b.filter(a=>!O||a.categoriaId===O).map(a=>(0,d.jsx)(l.default,{product:a,onEdit:()=>{J(a),H(!0)},onDelete:()=>U(a.id)},a.id)):(0,d.jsx)("div",{className:"col-span-full text-center py-12",children:(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum produto encontrado."})})})}):(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.length>0?s.map(a=>(0,d.jsx)(m.default,{category:a,onEdit:()=>{L(a),H(!0)},onDelete:()=>V(a.id)},a.id)):(0,d.jsx)("div",{className:"col-span-full text-center py-12",children:(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma categoria encontrada."})})}),E>1&&(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,d.jsx)(p.default,{currentPage:C,totalPages:E,onPageChange:D})})}),(0,d.jsx)(k.Modal,{isOpen:G,onClose:()=>{H(!1),J(null)},className:"max-w-[800px] m-4",children:(0,d.jsxs)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:[(0,d.jsxs)("div",{className:"px-2 pr-14",children:[(0,d.jsx)("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:I?"Editar Produto":"Novo Produto"}),(0,d.jsx)("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7",children:I?"Atualize as informações do produto.":"Preencha os dados para criar um novo produto."})]}),"PRODUTOS"===M?(0,d.jsx)(n.default,{product:I||void 0,onSubmit:W,onCancel:()=>{H(!1),J(null)}}):(0,d.jsx)(o.default,{category:K||void 0,onSubmit:X,onCancel:()=>{H(!1),J(null)}})]})})]})}[f,g,l,n]=s.then?(await s)():s,a.s(["default",()=>t]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_4cdb4497._.js.map