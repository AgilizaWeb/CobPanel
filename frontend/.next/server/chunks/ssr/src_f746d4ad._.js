module.exports=[39323,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({type:a="text",id:c,name:d,placeholder:e,defaultValue:f,onChange:g,min:h,max:i,step:j,disabled:k=!1,success:l=!1,error:m=!1,hint:n,value:o,required:p,className:q="",...r})=>{let s=`h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 ${q}`;if("date"!==a&&(s+=" appearance-none"),k)s+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700";else if(m){if(s+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500","string"==typeof m)return(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{...r,type:a,id:c,name:d,placeholder:e,defaultValue:f,onChange:g,className:s,min:h,max:i,step:j,disabled:k,value:o,required:p}),(0,b.jsx)("p",{className:"mt-1 text-xs text-error-500",children:m})]})}else l?s+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":s+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800";return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{...r,type:a,id:c,name:d,placeholder:e,value:o,defaultValue:f,onChange:g,min:h,max:i,required:p,step:j,disabled:k,className:s}),n&&(0,b.jsx)("p",{className:`mt-1.5 text-xs ${m?"text-error-500":l?"text-success-500":"text-gray-500"}`,children:n})]})}])},83894,a=>{"use strict";var b=a.i(84692);a.s(["EyeIcon",()=>b.default])},91119,a=>{"use strict";var b=a.i(87924);let c=({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 ${c}`,children:a});a.s(["Card",()=>c])},17027,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({currentPage:a,totalPages:c,onPageChange:d})=>{let e=Array.from({length:Math.min(3,c)},(b,c)=>c+Math.max(a-1,1));return(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("button",{onClick:()=>d(a-1),disabled:1===a,className:"mr-2.5 flex items-center h-10 justify-center rounded-lg border border-gray-300 bg-white px-3.5 py-2.5 text-gray-700 shadow-theme-xs hover:bg-gray-50 disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] text-sm","aria-label":"P√°gina anterior",children:"Anterior"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a>3&&(0,b.jsx)("span",{className:"px-2 text-gray-500 dark:text-gray-400",children:"..."}),e.map(c=>(0,b.jsx)("button",{onClick:()=>d(c),className:`px-4 py-2 rounded ${a===c?"bg-brand-500 text-white":"text-gray-700 dark:text-gray-400"} flex w-10 items-center justify-center h-10 rounded-lg text-sm font-medium hover:bg-blue-500/[0.08] hover:text-brand-500 dark:hover:text-brand-500`,"aria-label":`Ir para p\xe1gina ${c}`,children:c},c)),a<c-2&&(0,b.jsx)("span",{className:"px-2 text-gray-500 dark:text-gray-400",children:"..."})]}),(0,b.jsx)("button",{onClick:()=>d(a+1),disabled:a===c,className:"ml-2.5 flex items-center justify-center rounded-lg border border-gray-300 bg-white px-3.5 py-2.5 text-gray-700 shadow-theme-xs text-sm hover:bg-gray-50 h-10 disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]","aria-label":"Pr√≥xima p√°gina",children:"Pr√≥ximo"})]})}])},51960,a=>{"use strict";var b=a.i(98692);a.s(["PlusIcon",()=>b.default])},183,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(91119),f=a.i(96369),g=a.i(52647);a.i(54828);var h=a.i(44091),i=a.i(83894),j=a.i(86262),k=a.i(32636),l=b([k]);function m({notificacao:a,onMarcarComoLida:b,onDelete:c,onView:l}){let{user:m}=(0,k.useAuth)(),n=m?.role==="SUPERADMIN";return(0,d.jsx)(e.Card,{className:`p-4 transition-all hover:shadow-md ${!a.lida?"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10":""}`,children:(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-2xl",children:function(a){switch(a){case"VENCIMENTO_EMPRESA":return"‚ö†Ô∏è";case"PLANO_PAGO":return"‚úÖ";case"COBRANCA_GERADA":return"üí≥";case"FATURA_PAGA":return"üí∞";case"PARCELA_PAGA":return"üíµ";case"MANUAL":return"üì¢";case"TICKET_MENSAGEM":return"üé´";default:return"üîî"}}(a.tipo)})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"flex items-start justify-between gap-2 mb-2",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:`text-base font-semibold text-gray-900 dark:text-white mb-1 ${!a.lida?"font-bold":""}`,children:a.titulo}),(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,d.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:function(a){switch(a){case"VENCIMENTO_EMPRESA":return"Vencimento de Empresa";case"PLANO_PAGO":return"Plano Pago";case"COBRANCA_GERADA":return"Cobran√ßa Gerada";case"FATURA_PAGA":return"Fatura Paga";case"PARCELA_PAGA":return"Parcela Paga";case"MANUAL":return"Manual";case"TICKET_MENSAGEM":return"Ticket";default:return a}}(a.tipo)}),!a.lida&&(0,d.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:"N√£o lida"})]})]})}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:a.mensagem}),n&&(a.empresa||a.user)&&(0,d.jsx)("div",{className:"mb-3 p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600 dark:text-gray-400",children:[a.empresa&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{children:"üì¶"}),(0,d.jsx)("span",{className:"font-medium",children:"Empresa:"}),(0,d.jsx)("span",{children:a.empresa.nome})]}),a.user&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{children:"üë§"}),(0,d.jsx)("span",{className:"font-medium",children:"Usu√°rio:"}),(0,d.jsx)("span",{children:a.user.nome})]})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3",children:[(0,d.jsx)("span",{children:function(a){try{let b=new Date(a),c=new Date,d=Math.floor((c.getTime()-b.getTime())/1e3);if(d<60)return"agora";if(d<3600)return`${Math.floor(d/60)} min atr\xe1s`;if(d<86400)return`${Math.floor(d/3600)} hr atr\xe1s`;if(d<604800)return`${Math.floor(d/86400)} dias atr\xe1s`;return(0,g.formatDate)(a)}catch{return a}}(a.createdAt)}),a.actionLink&&a.actionLabel&&(0,d.jsxs)("a",{href:a.actionLink,className:"text-brand-500 hover:text-brand-600 dark:text-brand-400 font-medium",children:[a.actionLabel," ‚Üí"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[!a.lida&&(0,d.jsx)(f.default,{variant:"outline",size:"sm",onClick:()=>b(a.id),startIcon:(0,d.jsx)(j.CheckCircleIcon,{className:"w-5 h-5"}),"aria-label":"Marcar como lida",children:"Marcar como lida"}),l&&(0,d.jsx)(f.default,{variant:"outline",size:"sm",onClick:()=>l(a.id),startIcon:(0,d.jsx)(i.EyeIcon,{className:"w-5 h-5"}),"aria-label":"Ver detalhes",children:"Ver"}),(0,d.jsx)(f.default,{variant:"outline",size:"sm",onClick:()=>c(a.id),startIcon:(0,d.jsx)(h.TrashBinIcon,{className:"w-5 h-5"}),"aria-label":"Excluir notifica√ß√£o",className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Excluir"})]})]})]})})}[k]=l.then?(await l)():l,a.s(["default",()=>m]),c()}catch(a){c(a)}},!1),97843,a=>a.a(async(b,c)=>{try{var d=a.i(87924),e=a.i(72131),f=a.i(6704),g=a.i(91119),h=a.i(39323),i=a.i(622),j=a.i(96369),k=a.i(17027),l=a.i(39906),m=a.i(90365),n=a.i(183),o=a.i(49673),p=a.i(11667);a.i(54828);var q=a.i(13872),r=a.i(51960),s=a.i(50944),t=b([m,n,o,p]);function u(){let a=(0,s.useRouter)(),{marcarComoLida:b,marcarTodasComoLidas:c,deleteNotificacao:t}=(0,p.useNotifications)(),[u,v]=(0,e.useState)([]),[w,x]=(0,e.useState)(!0),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(1),[C,D]=(0,e.useState)(0),[E,F]=(0,e.useState)({}),[G,H]=(0,e.useState)(20),[I,J]=(0,e.useState)(!1),[K,L]=(0,e.useState)(null),M=(0,e.useCallback)(async()=>{try{x(!0);let a={page:A,perPage:G};void 0!==E.lida&&(a.lida=E.lida),E.tipo&&(a.tipo=E.tipo);let b=await m.services.notificacao.list(a);v(b.data||[]),D(b.pagination?.totalPages||1)}catch(a){console.error("Erro ao carregar notifica√ß√µes:",a),f.toast.error("Erro ao carregar notifica√ß√µes")}finally{x(!1)}},[A,E,G]);(0,e.useEffect)(()=>{M()},[M]);let N=u.filter(a=>{if(!y)return!0;let b=y.toLowerCase();return a.titulo.toLowerCase().includes(b)||a.mensagem.toLowerCase().includes(b)||a.empresa?.nome.toLowerCase().includes(b)||a.user?.nome.toLowerCase().includes(b)}),O=a=>{F(b=>({...b,...a})),B(1)},P=async a=>{try{await b(a),await M(),f.toast.success("Notifica√ß√£o marcada como lida")}catch(a){f.toast.error("Erro ao marcar notifica√ß√£o como lida")}},Q=async()=>{try{await c(),await M(),f.toast.success("Todas as notifica√ß√µes foram marcadas como lidas")}catch(a){f.toast.error("Erro ao marcar todas como lidas")}},R=async a=>{if(window.confirm("Tem certeza que deseja excluir esta notifica√ß√£o?"))try{await t(a),await M(),f.toast.success("Notifica√ß√£o exclu√≠da com sucesso")}catch(a){f.toast.error("Erro ao excluir notifica√ß√£o")}},S=a=>{let b=u.find(b=>b.id===a);b&&(L(b),J(!0))},T=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobran√ßa Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"}],U=[{value:"true",label:"Lidas"},{value:"false",label:"N√£o lidas"}],V=u.filter(a=>!a.lida).length;return(0,d.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Notifica√ß√µes"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie todas as notifica√ß√µes do sistema"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(j.default,{variant:"primary",onClick:()=>a.push("/dashboard/admin/notificacoes/criar"),startIcon:(0,d.jsx)(r.PlusIcon,{className:"w-4 h-4"}),"aria-label":"Criar nova notifica√ß√£o",children:"Criar Notifica√ß√£o"}),V>0&&(0,d.jsx)(j.default,{variant:"outline",onClick:Q,"aria-label":"Marcar todas como lidas",children:"Marcar todas como lidas"})]})]}),(0,d.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,d.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,d.jsx)(h.default,{type:"text",placeholder:"Buscar notifica√ß√µes...",value:y,onChange:a=>{z(a.target.value),B(1)},className:"w-full","aria-label":"Buscar notifica√ß√µes"})}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,d.jsx)(i.default,{placeholder:"Status",options:U,value:void 0!==E.lida?U.find(a=>a.value===String(E.lida)):void 0,onChange:a=>O({lida:a?"true"===a.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,d.jsx)(i.default,{placeholder:"Tipo",options:T,value:E.tipo?T.find(a=>a.value===E.tipo):void 0,onChange:a=>O({tipo:a?a.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50","aria-label":"Filtrar por tipo"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(l.default,{className:"flex items-center mb-0 h-full",children:"Quantidade por p√°gina"}),(0,d.jsx)(h.default,{className:"max-w-24",type:"number",defaultValue:G,max:100,min:1,onChange:a=>{let b=Number(a.target.value)||20;H(b),B(1)},"aria-label":"Itens por p√°gina"})]}),(0,d.jsx)(k.default,{currentPage:A,totalPages:C,onPageChange:B})]}),w?(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,d.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},a))}):0===N.length?(0,d.jsxs)(g.Card,{className:"p-12 text-center",children:[(0,d.jsx)(q.BellIcon,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma notifica√ß√£o encontrada"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:y||void 0!==E.lida||E.tipo?"Tente ajustar os filtros de busca":"N√£o h√° notifica√ß√µes no sistema"}),(0,d.jsx)(j.default,{variant:"primary",onClick:()=>a.push("/dashboard/admin/notificacoes/criar"),startIcon:(0,d.jsx)(r.PlusIcon,{className:"w-4 h-4"}),children:"Criar Primeira Notifica√ß√£o"})]}):(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:N.map(a=>(0,d.jsx)(n.default,{notificacao:a,onMarcarComoLida:P,onDelete:R,onView:S},a.id))}),!w&&N.length>0&&(0,d.jsx)("div",{className:"mt-6 flex justify-center",children:(0,d.jsx)(k.default,{currentPage:A,totalPages:C,onPageChange:B})}),(0,d.jsx)(o.default,{isOpen:I,onClose:()=>{J(!1),L(null),M()},notificacao:K,onMarcarComoLida:P,onDelete:R})]})}[m,n,o,p]=t.then?(await t)():t,a.s(["default",()=>u]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=src_f746d4ad._.js.map