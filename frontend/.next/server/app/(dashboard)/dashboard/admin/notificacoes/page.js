(()=>{var e={};e.id=4593,e.ids=[4593],e.modules={3050:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>d});var s=r(60687),o=r(76634),i=r(61414),n=r(70881),l=r(26208);r(43210);var c=e([i,n]);function d({children:e}){let{isExpanded:a,isHovered:r,isMobileOpen:t}=(0,o.c)();return(0,s.jsxs)("div",{className:"min-h-screen xl:flex",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)(l.A,{}),(0,s.jsxs)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${t?"ml-0":a||r?"lg:ml-[290px]":"lg:ml-[90px]"}`,children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("div",{className:"p-4 mx-auto max-w-(--breakpoint-2xl) md:p-6",children:e})]})]})}[i,n]=c.then?(await c)():c,t()}catch(e){t(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},15191:(e,a,r)=>{Promise.resolve().then(r.bind(r,31469))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31469:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\oKRATOS\\\\Desktop\\\\cobpanel\\\\frontend\\\\src\\\\app\\\\(dashboard)\\\\dashboard\\\\admin\\\\notificacoes\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\notificacoes\\page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},43907:(e,a,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(a),r.d(a,{default:()=>j});var s=r(60687),o=r(43210),i=r(37590),n=r(44493),l=r(55324),c=r(70695),d=r(94676),u=r(14088),p=r(41721),m=r(68957),x=r(16808),h=r(20823),f=r(28493),b=r(51872),v=r(16189),g=e([m,x,h,f]);function j(){let e=(0,v.useRouter)(),{marcarComoLida:a,marcarTodasComoLidas:r,deleteNotificacao:t}=(0,f.E)(),[g,j]=(0,o.useState)([]),[w,y]=(0,o.useState)(!0),[A,C]=(0,o.useState)(""),[P,N]=(0,o.useState)(1),[k,q]=(0,o.useState)(0),[R,S]=(0,o.useState)({}),[_,E]=(0,o.useState)(20),[T,O]=(0,o.useState)(!1),[D,G]=(0,o.useState)(null),L=(0,o.useCallback)(async()=>{try{y(!0);let e={page:P,perPage:_};void 0!==R.lida&&(e.lida=R.lida),R.tipo&&(e.tipo=R.tipo);let a=await m.$p.notificacao.list(e);j(a.data||[]),q(a.pagination?.totalPages||1)}catch(e){console.error("Erro ao carregar notifica\xe7\xf5es:",e),i.oR.error("Erro ao carregar notifica\xe7\xf5es")}finally{y(!1)}},[P,R,_]),M=g.filter(e=>{if(!A)return!0;let a=A.toLowerCase();return e.titulo.toLowerCase().includes(a)||e.mensagem.toLowerCase().includes(a)||e.empresa?.nome.toLowerCase().includes(a)||e.user?.nome.toLowerCase().includes(a)}),U=e=>{S(a=>({...a,...e})),N(1)},K=async e=>{try{await a(e),await L(),i.oR.success("Notifica\xe7\xe3o marcada como lida")}catch(e){i.oR.error("Erro ao marcar notifica\xe7\xe3o como lida")}},z=async()=>{try{await r(),await L(),i.oR.success("Todas as notifica\xe7\xf5es foram marcadas como lidas")}catch(e){i.oR.error("Erro ao marcar todas como lidas")}},I=async e=>{if(window.confirm("Tem certeza que deseja excluir esta notifica\xe7\xe3o?"))try{await t(e),await L(),i.oR.success("Notifica\xe7\xe3o exclu\xedda com sucesso")}catch(e){i.oR.error("Erro ao excluir notifica\xe7\xe3o")}},F=e=>{let a=g.find(a=>a.id===e);a&&(G(a),O(!0))},V=[{value:"MANUAL",label:"Manual"},{value:"VENCIMENTO_EMPRESA",label:"Vencimento de Empresa"},{value:"PLANO_PAGO",label:"Plano Pago"},{value:"COBRANCA_GERADA",label:"Cobran\xe7a Gerada"},{value:"FATURA_PAGA",label:"Fatura Paga"},{value:"PARCELA_PAGA",label:"Parcela Paga"}],B=[{value:"true",label:"Lidas"},{value:"false",label:"N\xe3o lidas"}],X=g.filter(e=>!e.lida).length;return(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Notifica\xe7\xf5es"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie todas as notifica\xe7\xf5es do sistema"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{variant:"primary",onClick:()=>e.push("/dashboard/admin/notificacoes/criar"),startIcon:(0,s.jsx)(b.c1,{className:"w-4 h-4"}),"aria-label":"Criar nova notifica\xe7\xe3o",children:"Criar Notifica\xe7\xe3o"}),X>0&&(0,s.jsx)(d.A,{variant:"outline",onClick:z,"aria-label":"Marcar todas como lidas",children:"Marcar todas como lidas"})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,s.jsx)(l.A,{type:"text",placeholder:"Buscar notifica\xe7\xf5es...",value:A,onChange:e=>{C(e.target.value),N(1)},className:"w-full","aria-label":"Buscar notifica\xe7\xf5es"})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(c.A,{placeholder:"Status",options:B,value:void 0!==R.lida?B.find(e=>e.value===String(R.lida)):void 0,onChange:e=>U({lida:e?"true"===e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,s.jsx)(c.A,{placeholder:"Tipo",options:V,value:R.tipo?V.find(e=>e.value===R.tipo):void 0,onChange:e=>U({tipo:e?e.value:void 0}),isClearable:!0,className:"whitespace-nowrap min-w-50","aria-label":"Filtrar por tipo"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,s.jsx)(l.A,{className:"max-w-24",type:"number",defaultValue:_,max:100,min:1,onChange:e=>{let a=Number(e.target.value)||20;E(a),N(1)},"aria-label":"Itens por p\xe1gina"})]}),(0,s.jsx)(u.A,{currentPage:P,totalPages:k,onPageChange:N})]}),w?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):0===M.length?(0,s.jsxs)(n.Z,{className:"p-12 text-center",children:[(0,s.jsx)(b.XF,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma notifica\xe7\xe3o encontrada"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:A||void 0!==R.lida||R.tipo?"Tente ajustar os filtros de busca":"N\xe3o h\xe1 notifica\xe7\xf5es no sistema"}),(0,s.jsx)(d.A,{variant:"primary",onClick:()=>e.push("/dashboard/admin/notificacoes/criar"),startIcon:(0,s.jsx)(b.c1,{className:"w-4 h-4"}),children:"Criar Primeira Notifica\xe7\xe3o"})]}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:M.map(e=>(0,s.jsx)(x.A,{notificacao:e,onMarcarComoLida:K,onDelete:I,onView:F},e.id))}),!w&&M.length>0&&(0,s.jsx)("div",{className:"mt-6 flex justify-center",children:(0,s.jsx)(u.A,{currentPage:P,totalPages:k,onPageChange:N})}),(0,s.jsx)(h.A,{isOpen:T,onClose:()=>{O(!1),G(null),L()},notificacao:D,onMarcarComoLida:K,onDelete:I})]})}[m,x,h,f]=g.then?(await g)():g,t()}catch(e){t(e)}})},47267:(e,a,r)=>{Promise.resolve().then(r.bind(r,3050))},54456:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\oKRATOS\\\\Desktop\\\\cobpanel\\\\frontend\\\\src\\\\app\\\\(dashboard)\\\\dashboard\\\\admin\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\layout.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59637:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=r(65239),s=r(48088),o=r(88170),i=r.n(o),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(a,l);let c={children:["",{children:["(dashboard)",{children:["dashboard",{children:["admin",{children:["notificacoes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,31469)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\notificacoes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,54456)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\layout.tsx"]}]},{}]},{forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e),async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e),async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\notificacoes\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(dashboard)/dashboard/admin/notificacoes/page",pathname:"/dashboard/admin/notificacoes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68335:(e,a,r)=>{Promise.resolve().then(r.bind(r,43907))},71243:(e,a,r)=>{Promise.resolve().then(r.bind(r,54456))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var a=require("../../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[4447,5397,2574,8894,2348,3021,16,1432,8066,3760],()=>r(59637));module.exports=t})();