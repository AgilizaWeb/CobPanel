(()=>{var e={};e.id=9239,e.ids=[9239],e.modules={1071:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>f});var s=a(60687),i=a(43210),l=a(16189),o=a(37590),n=a(55324),d=a(70695),c=a(20184),p=a(41721),u=a(19125),m=a(68957),x=a(97564),h=a(70568),b=a(87979),v=e([m,x,h,b]);function f(){let e=(0,l.useRouter)(),{user:t}=(0,b.A)(),[a,r]=(0,i.useState)([]),[v,f]=(0,i.useState)([]),[g,j]=(0,i.useState)(!0),[k,y]=(0,i.useState)(""),[w,A]=(0,i.useState)(1),[N,C]=(0,i.useState)(0),[P,S]=(0,i.useState)({}),[q,T]=(0,i.useState)(20),[E,R]=(0,i.useState)(!1),[O,_]=(0,i.useState)(null),[D,I]=(0,i.useState)(!1),U=(0,i.useCallback)(async()=>{try{j(!0);let e={page:w,perPage:q,search:k||void 0};P.status&&(e.status=P.status),P.tipo&&(e.tipo=P.tipo),P.prioridade&&(e.prioridade=P.prioridade),P.empresaId&&(e.empresaId=P.empresaId);let t=await m.$p.ticket.list(e);r(t.data||[]),C(t.pagination?.totalPages||1)}catch(e){console.error("Erro ao carregar tickets:",e),o.oR.error("Erro ao carregar tickets")}finally{j(!1)}},[w,P,q,k]),M=e=>{S(t=>({...t,...e})),A(1)},G=e=>{_(e),R(!0)},K=t=>{e.push(`/dashboard/admin/tickets/${t.id}`)},z=async e=>{if(window.confirm("Tem certeza que deseja excluir este ticket?"))try{await m.$p.ticket.delete(e.id),o.oR.success("Ticket exclu\xeddo com sucesso"),U()}catch(e){o.oR.error(e?.response?.data?.error||"Erro ao excluir ticket")}},B=async(e,t)=>{if(O){I(!0);try{await m.$p.ticket.update(O.id,{status:e.status,prioridade:e.prioridade}),o.oR.success("Ticket atualizado com sucesso"),R(!1),_(null),U()}catch(e){o.oR.error(e?.response?.data?.error||"Erro ao atualizar ticket")}finally{I(!1)}}},F=[{value:"",label:"Todos"},{value:"ABERTO",label:"Aberto"},{value:"EM_ANDAMENTO",label:"Em Andamento"},{value:"RESOLVIDO",label:"Resolvido"},{value:"FECHADO",label:"Fechado"}],$=[{value:"",label:"Todos"},{value:"PROBLEMA",label:"Problema"},{value:"AJUDA",label:"Ajuda"},{value:"MELHORIA",label:"Melhoria"},{value:"SUGESTAO",label:"Sugest\xe3o"}],L=[{value:"",label:"Todas"},{value:"BAIXA",label:"Baixa"},{value:"MEDIA",label:"M\xe9dia"},{value:"ALTA",label:"Alta"},{value:"URGENTE",label:"Urgente"}],V=[{value:"",label:"Todas"},...v.map(e=>({value:e.id.toString(),label:e.nome}))];return(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Gerenciar Tickets"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie todos os tickets do sistema"})]})}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,s.jsx)(n.A,{type:"text",placeholder:"Buscar tickets...",value:k,onChange:e=>{y(e.target.value),A(1)},className:"w-full","aria-label":"Buscar tickets"})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(d.A,{placeholder:"Status",options:F.filter(e=>""!==e.value),value:F.find(e=>e.value===(P.status||"")),onChange:e=>M({status:e?.value||void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,s.jsx)(d.A,{placeholder:"Tipo",options:$.filter(e=>""!==e.value),value:$.find(e=>e.value===(P.tipo||"")),onChange:e=>M({tipo:e?.value||void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por tipo"}),(0,s.jsx)(d.A,{placeholder:"Prioridade",options:L.filter(e=>""!==e.value),value:L.find(e=>e.value===(P.prioridade||"")),onChange:e=>M({prioridade:e?.value||void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por prioridade"}),(0,s.jsx)(d.A,{placeholder:"Empresa",options:V.filter(e=>""!==e.value),value:V.find(e=>e.value===(P.empresaId?.toString()||"")),onChange:e=>M({empresaId:e?.value?parseInt(e.value):void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por empresa"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)(p.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,s.jsx)(n.A,{className:"max-w-24",defaultValue:q,max:100,min:1,onChange:e=>{let t=Number(e.target.value)||9;T(t),A(1)},"aria-label":"Itens por p\xe1gina"})]}),N>1&&(0,s.jsx)(c.A,{currentPage:w,totalPages:N,onPageChange:A})]})]})]}),g?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.length>0?a.map(e=>(0,s.jsx)(x.A,{ticket:e,onView:()=>K(e),onEdit:()=>G(e),onDelete:()=>z(e)},e.id)):(0,s.jsx)("div",{className:"col-span-full text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum ticket encontrado."})})}),N>1&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,s.jsx)(c.A,{currentPage:w,totalPages:N,onPageChange:A})})}),O&&(0,s.jsx)(u.a,{isOpen:E,onClose:()=>{R(!1),_(null)},className:"max-w-2xl m-4",children:(0,s.jsx)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:(0,s.jsxs)("div",{className:"px-2 pr-14",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Editar Ticket"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"T\xedtulo:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:O.titulo})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descri\xe7\xe3o:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:O.descricao})]}),(0,s.jsx)(h.A,{ticket:O,onSubmit:B,onCancel:()=>{R(!1),_(null)},loading:D,editMode:!0})]})]})})})]})}[m,x,h,b]=v.then?(await v)():v,r()}catch(e){r(e)}})},3050:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>c});var s=a(60687),i=a(76634),l=a(61414),o=a(70881),n=a(26208);a(43210);var d=e([l,o]);function c({children:e}){let{isExpanded:t,isHovered:a,isMobileOpen:r}=(0,i.c)();return(0,s.jsxs)("div",{className:"min-h-screen xl:flex",children:[(0,s.jsx)(o.A,{}),(0,s.jsx)(n.A,{}),(0,s.jsxs)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${r?"ml-0":t||a?"lg:ml-[290px]":"lg:ml-[90px]"}`,children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("div",{className:"p-4 mx-auto max-w-(--breakpoint-2xl) md:p-6",children:e})]})]})}[l,o]=d.then?(await d)():d,r()}catch(e){r(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30303:(e,t,a)=>{Promise.resolve().then(a.bind(a,34965))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34965:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\oKRATOS\\\\Desktop\\\\cobpanel\\\\frontend\\\\src\\\\app\\\\(dashboard)\\\\dashboard\\\\admin\\\\tickets\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\tickets\\page.tsx","default")},45625:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(65239),s=a(48088),i=a(88170),l=a.n(i),o=a(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(t,n);let d={children:["",{children:["(dashboard)",{children:["dashboard",{children:["admin",{children:["tickets",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,34965)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\tickets\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,54456)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\layout.tsx"]}]},{}]},{forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e),async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,54413)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e),async e=>(await Promise.resolve().then(a.bind(a,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\tickets\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(dashboard)/dashboard/admin/tickets/page",pathname:"/dashboard/admin/tickets",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},47267:(e,t,a)=>{Promise.resolve().then(a.bind(a,3050))},54456:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\oKRATOS\\\\Desktop\\\\cobpanel\\\\frontend\\\\src\\\\app\\\\(dashboard)\\\\dashboard\\\\admin\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\admin\\layout.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71243:(e,t,a)=>{Promise.resolve().then(a.bind(a,54456))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},90551:(e,t,a)=>{Promise.resolve().then(a.bind(a,1071))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4447,5397,2574,8894,2348,3021,16,1432,8066,8866],()=>a(45625));module.exports=r})();