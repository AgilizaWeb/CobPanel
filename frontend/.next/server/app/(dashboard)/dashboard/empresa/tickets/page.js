(()=>{var e={};e.id=1183,e.ids=[1183],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5989:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(65239),a=r(48088),o=r(88170),i=r.n(o),l=r(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let d={children:["",{children:["(dashboard)",{children:["dashboard",{children:["empresa",{children:["tickets",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,26725)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\empresa\\tickets\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7720)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\empresa\\layout.tsx"]}]},{}]},{forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e),async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e),async e=>(await Promise.resolve().then(r.bind(r,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\empresa\\tickets\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/dashboard/empresa/tickets/page",pathname:"/dashboard/empresa/tickets",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7720:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\oKRATOS\\\\Desktop\\\\cobpanel\\\\frontend\\\\src\\\\app\\\\(dashboard)\\\\dashboard\\\\empresa\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\empresa\\layout.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21739:(e,t,r)=>{Promise.resolve().then(r.bind(r,24803))},21820:e=>{"use strict";e.exports=require("os")},24803:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>k});var a=r(60687),o=r(43210),i=r(16189),l=r(37590),n=r(55324),d=r(70695),c=r(94676),p=r(20184),u=r(41721),m=r(19125),x=r(68957),h=r(97564),b=r(70568),v=r(51872),f=r(87979),g=e([x,h,b,f]);function k(){let e=(0,i.useRouter)(),{user:t}=(0,f.A)(),[r,s]=(0,o.useState)([]),[g,k]=(0,o.useState)(!0),[j,A]=(0,o.useState)(""),[w,y]=(0,o.useState)(1),[N,P]=(0,o.useState)(0),[C,R]=(0,o.useState)({}),[S,T]=(0,o.useState)(20),[q,E]=(0,o.useState)(!1),[O,D]=(0,o.useState)(null),[_,U]=(0,o.useState)(!1),[M,I]=(0,o.useState)(!1),K=(0,o.useCallback)(async()=>{try{k(!0);let e={page:w,perPage:S,search:j||void 0};C.status&&(e.status=C.status),C.tipo&&(e.tipo=C.tipo),C.prioridade&&(e.prioridade=C.prioridade);let t=await x.$p.ticket.list(e);s(t.data||[]),P(t.pagination?.totalPages||1)}catch(e){console.error("Erro ao carregar tickets:",e),l.oR.error("Erro ao carregar tickets")}finally{k(!1)}},[w,C,S,j]),G=e=>{R(t=>({...t,...e})),y(1)},z=e=>{D(e),U(!1),E(!0)},B=t=>{e.push(`/dashboard/empresa/tickets/${t.id}`)},$=async e=>{if(window.confirm("Tem certeza que deseja excluir este ticket?"))try{await x.$p.ticket.delete(e.id),l.oR.success("Ticket exclu\xeddo com sucesso"),K()}catch(e){l.oR.error(e?.response?.data?.error||"Erro ao excluir ticket")}},F=async(e,r)=>{I(!0);try{O?t?.role==="SUPERADMIN"&&(await x.$p.ticket.update(O.id,{status:e.status,prioridade:e.prioridade}),l.oR.success("Ticket atualizado com sucesso")):(await x.$p.ticket.create(e,r),l.oR.success("Ticket criado com sucesso")),E(!1),K()}catch(e){l.oR.error(e?.response?.data?.error||"Erro ao salvar ticket")}finally{I(!1)}},L=[{value:"",label:"Todos"},{value:"ABERTO",label:"Aberto"},{value:"EM_ANDAMENTO",label:"Em Andamento"},{value:"RESOLVIDO",label:"Resolvido"},{value:"FECHADO",label:"Fechado"}],V=[{value:"",label:"Todos"},{value:"PROBLEMA",label:"Problema"},{value:"AJUDA",label:"Ajuda"},{value:"MELHORIA",label:"Melhoria"},{value:"SUGESTAO",label:"Sugest\xe3o"}],H=[{value:"",label:"Todas"},{value:"BAIXA",label:"Baixa"},{value:"MEDIA",label:"M\xe9dia"},{value:"ALTA",label:"Alta"},{value:"URGENTE",label:"Urgente"}];return(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Tickets"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gerencie seus tickets de suporte"})]}),(0,a.jsx)(c.A,{variant:"primary",onClick:()=>{D(null),U(!0),E(!0)},startIcon:(0,a.jsx)(v.c1,{className:"w-5 h-5"}),"aria-label":"Criar novo ticket",children:"Novo Ticket"})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-6",children:[(0,a.jsx)("div",{className:"flex-1 w-full sm:max-w-xs",children:(0,a.jsx)(n.A,{type:"text",placeholder:"Buscar tickets...",value:j,onChange:e=>{A(e.target.value),y(1)},className:"w-full","aria-label":"Buscar tickets"})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(d.A,{placeholder:"Status",options:L.filter(e=>""!==e.value),value:L.find(e=>e.value===(C.status||"")),onChange:e=>G({status:e?.value||void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por status"}),(0,a.jsx)(d.A,{placeholder:"Tipo",options:V.filter(e=>""!==e.value),value:V.find(e=>e.value===(C.tipo||"")),onChange:e=>G({tipo:e?.value||void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por tipo"}),(0,a.jsx)(d.A,{placeholder:"Prioridade",options:H.filter(e=>""!==e.value),value:H.find(e=>e.value===(C.prioridade||"")),onChange:e=>G({prioridade:e?.value||void 0}),isClearable:!0,className:"whitespace-nowrap min-w-40","aria-label":"Filtrar por prioridade"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mb-4 gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,a.jsx)(u.A,{className:"flex items-center mb-0 h-full",children:"Quantidade por p\xe1gina"}),(0,a.jsx)(n.A,{className:"max-w-24",defaultValue:S,max:100,min:1,onChange:e=>{let t=Number(e.target.value)||9;T(t),y(1)},"aria-label":"Itens por p\xe1gina"})]}),N>1&&(0,a.jsx)(p.A,{currentPage:w,totalPages:N,onPageChange:y})]})]})]}),g?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg h-48"},e))}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.length>0?r.map(e=>(0,a.jsx)(h.A,{ticket:e,onView:()=>B(e),onEdit:t?.role==="SUPERADMIN"?()=>z(e):void 0,onDelete:()=>$(e)},e.id)):(0,a.jsx)("div",{className:"col-span-full text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhum ticket encontrado. Crie um novo ticket para come\xe7ar!"})})}),N>1&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("div",{className:"flex justify-end mb-4 gap-2 flex-wrap",children:(0,a.jsx)(p.A,{currentPage:w,totalPages:N,onPageChange:y})})}),(0,a.jsx)(m.a,{isOpen:q,onClose:()=>{E(!1),D(null),U(!1)},className:"max-w-2xl m-4",children:(0,a.jsx)("div",{className:"no-scrollbar relative w-full overflow-y-auto rounded-3xl bg-white p-4 dark:bg-gray-900 lg:p-11",children:(0,a.jsxs)("div",{className:"px-2 pr-14",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:_?"Novo Ticket":"Editar Ticket"}),(0,a.jsx)(b.A,{ticket:O||null,onSubmit:F,onCancel:()=>{E(!1),D(null),U(!1)},loading:M})]})})})]})}[x,h,b,f]=g.then?(await g)():g,s()}catch(e){s(e)}})},26725:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\oKRATOS\\\\Desktop\\\\cobpanel\\\\frontend\\\\src\\\\app\\\\(dashboard)\\\\dashboard\\\\empresa\\\\tickets\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\oKRATOS\\Desktop\\cobpanel\\frontend\\src\\app\\(dashboard)\\dashboard\\empresa\\tickets\\page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64974:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>c});var a=r(60687),o=r(76634),i=r(61414),l=r(70881),n=r(26208);r(43210);var d=e([i,l]);function c({children:e}){let{isExpanded:t,isHovered:r,isMobileOpen:s}=(0,o.c)();return(0,a.jsxs)("div",{className:"min-h-screen xl:flex",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)(n.A,{}),(0,a.jsxs)("div",{className:`flex-1 transition-all  duration-300 ease-in-out ${s?"ml-0":t||r?"lg:ml-[290px]":"lg:ml-[90px]"}`,children:[(0,a.jsx)(i.A,{}),(0,a.jsx)("div",{className:"p-4 mx-auto max-w-(--breakpoint-2xl) md:p-6",children:e})]})]})}[i,l]=d.then?(await d)():d,s()}catch(e){s(e)}})},74075:e=>{"use strict";e.exports=require("zlib")},77719:(e,t,r)=>{Promise.resolve().then(r.bind(r,64974))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},83295:(e,t,r)=>{Promise.resolve().then(r.bind(r,7720))},83997:e=>{"use strict";e.exports=require("tty")},84787:(e,t,r)=>{Promise.resolve().then(r.bind(r,26725))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,5397,2574,8894,2348,3021,16,1432,8066,8866],()=>r(5989));module.exports=s})();